<!doctype html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="SoftLayer API Examples, implementations, and release notes.">
    <meta name="author" content="SoftLayer">

    <title>Order an endurance storage (block/file) - https://sldn.softlayer.com/</title>
    <link rel="canonical" href="https://sldn.softlayer.com/python/order_endurance_storage/">
        <link href="https://sldn.softlayer.com/css/main.css" rel="stylesheet">
    <link href="https://sldn.softlayer.com/css/bootstrap.css" rel="stylesheet">
    <link href="https://sldn.softlayer.com/css/fa-svg-with-js.css" rel="stylesheet">
    <link href="https://sldn.softlayer.com/css/custom.css" rel="stylesheet">
    <link href="https://sldn.softlayer.com/css/highlight/solarized_dark.css" rel="stylesheet">

    <script src="https://sldn.softlayer.com/js/highlight.pack.js"></script>

    <script>hljs.initHighlightingOnLoad();</script>
    <link rel="shortcut icon" href="https://sldn.softlayer.com/img/favicon.ico" type="image/x-icon" />
	<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Lato" />
            

    <script src="https://sldn.softlayer.com/js/jquery-3.3.1.min.js"></script> 
    <script src="https://sldn.softlayer.com/js/sldn.js"></script>
    <script src="https://sldn.softlayer.com/js/fontawesome-all.js"></script>

    <script>
		$(document).ready(function() {
			$('table').addClass("table table-hover table-striped")
		})
	</script>
    
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-88235803-1', 'auto');
	
	ga('send', 'pageview');
}
</script>

</head>

<body>
    <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                    <span class="sr-only">Toggle Navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="https://sldn.softlayer.com/">SoftLayer API</a>
            </div>
            <div class="collapse navbar-collapse navbar-ex1-collapse">
                <ul class="nav navbar-nav">
                    
                        <li><a href="https://sldn.softlayer.com/article/">Articles</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/reference/softlayerapi">Documentation</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/go/">Go</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/java/">Java</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/perl/">Perl</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/python/">Python</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/rest/">Rest</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/ruby/">Ruby</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/tools/">Tools</a></li>
                    

                    
                </ul>
                <div id="custom-search-input" class="pull-right">
                  <form class="navbar-form" role="search" method="get" action="https://www.bing.com/search">
                    <div class="input-group col-md-12">
                      <input type="text" class="form-control input-md" placeholder="Search" name="q" id="srch-term">
                      <input type="hidden" name="q1" value="site:sldn.softlayer.com" />
                      <div class="input-group-btn">
                        <button class="btn btn-info" type="submit">
                          <i class="glyphicon glyphicon-search"></i>
                        </button>
                      </div>
                    </div>
                  </form>
                </div>
            </div>
        </div>
    </nav>

<div class="container">
    <div class="row">
    
        <div class="col-md-3">
            <div style="word-wrap: break-word;"> 
                <h4>November 23, 2018<br></h4>
            </div>
        </div>
        <div class="col-md-9">

                <strong>Classes <span class="fa fa-book"/></strong>
                
                    <a class="label label-primary" href="https://sldn.softlayer.com/reference/services/SoftLayer_Product_Order">SoftLayer_Product_Order</a>
                
                    <a class="label label-primary" href="https://sldn.softlayer.com/reference/services/SoftLayer_Container_Product_Order_Network_Storage_Iscsi">SoftLayer_Container_Product_Order_Network_Storage_Iscsi</a>
                
                    <a class="label label-primary" href="https://sldn.softlayer.com/reference/services/SoftLayer_Container_Product_Order_Network_Storage_Enterprise">SoftLayer_Container_Product_Order_Network_Storage_Enterprise</a>
                
                <br>
                <strong>Tags <span class="fa fa-tags"/></strong>
                
                    <a class="label label-danger" href="https://sldn.softlayer.com/tags/order">order</a>
                
                    <a class="label label-danger" href="https://sldn.softlayer.com/tags/storage">storage</a>
                
                    <a class="label label-danger" href="https://sldn.softlayer.com/tags/endurance">endurance</a>
                          
        </div>
    </div>
    <hr>
    <div class="row">
		<div class="col-md-12">
            <div class="well well-sm release-note" style="word-wrap: break-word;">
				<h3>Order an endurance storage (block/file)<br> <small>Shows how to order endurance storage devices</small></h3>
				
                
				
                

<h3 id="important-note-there-is-a-new-version-of-storage-devices-staas-v2-so-it-is-recomended-to-review-order-block-file-storages-with-managers-order-block-file-storage-with-managers"><strong>Important Note:</strong> There is a new version of storage devices (STaaS v2) so it is recomended to review <a href="../order_block_file_storage_with_managers">Order Block/File storages with Managers</a></h3>

<p>Endurance Block/File storage devices are under package 240, the complexType is <code>SoftLayer_Container_Product_Order_Network_Storage_Enterprise</code> for both of them have in the order template.</p>

<p><br />
<strong>Tips before ordering</strong></p>

<p>In most of the cases the order verification fails whether the selected price cannot be ordered in the selected location or it does not meet the capacity restriction of the tier level.</p>

<p>Following REST call retrieves all prices under package 240 and shows on which locations are available, if <code>locationGroupId</code> is null means the price is standard and can be used on any location.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">https://api.softlayer.com/rest/v3.1/SoftLayer_Product_Package/240/getItemPrices?objectMask=mask[id,capacityRestrictionMaximum,capacityRestrictionMinimum,capacityRestrictionType,locationGroupId,item[capacity,description],categories,pricingLocationGroup[locations]]</code></pre></div>
<p>About capacity restrictions, the <code>performance_storage_space</code> and <code>storage_snapshot_space</code> prices have capacity restrictions (min/max) which should match with the <code>capacity</code> value of the selected <code>storage_tier_level</code> item, it means if the the item price &ldquo;4 IOPS per GB&rdquo; was selected and it has capacity of 300:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">    {
        <span style="color:#f92672">&#34;id&#34;</span>: <span style="color:#ae81ff">45088</span>,
        <span style="color:#f92672">&#34;locationGroupId&#34;</span>: <span style="color:#66d9ef">null</span>,
        <span style="color:#f92672">&#34;categories&#34;</span>: [
            {
                <span style="color:#f92672">&#34;categoryCode&#34;</span>: <span style="color:#e6db74">&#34;storage_tier_level&#34;</span>,
                <span style="color:#f92672">&#34;id&#34;</span>: <span style="color:#ae81ff">396</span>,
                <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;Storage Tier Level&#34;</span>,
                <span style="color:#f92672">&#34;quantityLimit&#34;</span>: <span style="color:#ae81ff">0</span>,
                <span style="color:#f92672">&#34;sortOrder&#34;</span>: <span style="color:#66d9ef">null</span>
            }
        ],
        <span style="color:#f92672">&#34;item&#34;</span>: {
            <span style="color:#f92672">&#34;capacity&#34;</span>: <span style="color:#e6db74">&#34;300&#34;</span>,
            <span style="color:#f92672">&#34;description&#34;</span>: <span style="color:#e6db74">&#34;4 IOPS per GB&#34;</span>
        }
    }<span style="color:#960050;background-color:#1e0010">,</span></code></pre></div>
<p>Then price of <code>performance_storage_space</code> should be:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">    {
        <span style="color:#f92672">&#34;id&#34;</span>: <span style="color:#ae81ff">45138</span>,
        <span style="color:#f92672">&#34;locationGroupId&#34;</span>: <span style="color:#66d9ef">null</span>,
        <span style="color:#f92672">&#34;capacityRestrictionMaximum&#34;</span>: <span style="color:#e6db74">&#34;300&#34;</span>,
        <span style="color:#f92672">&#34;capacityRestrictionMinimum&#34;</span>: <span style="color:#e6db74">&#34;300&#34;</span>,
        <span style="color:#f92672">&#34;capacityRestrictionType&#34;</span>: <span style="color:#e6db74">&#34;STORAGE_TIER_LEVEL&#34;</span>,
        <span style="color:#f92672">&#34;categories&#34;</span>: [
            {
                <span style="color:#f92672">&#34;categoryCode&#34;</span>: <span style="color:#e6db74">&#34;performance_storage_space&#34;</span>,
                <span style="color:#f92672">&#34;id&#34;</span>: <span style="color:#ae81ff">382</span>,
                <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;Storage Space&#34;</span>,
                <span style="color:#f92672">&#34;quantityLimit&#34;</span>: <span style="color:#ae81ff">0</span>,
                <span style="color:#f92672">&#34;sortOrder&#34;</span>: <span style="color:#66d9ef">null</span>
            }
        ],
        <span style="color:#f92672">&#34;item&#34;</span>: {
            <span style="color:#f92672">&#34;capacity&#34;</span>: <span style="color:#e6db74">&#34;20&#34;</span>,
            <span style="color:#f92672">&#34;description&#34;</span>: <span style="color:#e6db74">&#34;20 GB Storage Space&#34;</span>
        }
    }<span style="color:#960050;background-color:#1e0010">,</span></code></pre></div>
<h2 id="block-endurance-storage"><strong>Block Endurance Storage</strong></h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> SoftLayer
<span style="color:#f92672">from</span> pprint <span style="color:#f92672">import</span> pprint

<span style="color:#75715e"># Building an skeleton SoftLayer_Container_Product_Order_Network_Storage_Enterprise to the order</span>
orderTemplate <span style="color:#f92672">=</span> {
    <span style="color:#e6db74">&#34;complexType&#34;</span>: <span style="color:#e6db74">&#34;SoftLayer_Container_Product_Order_Network_Storage_Enterprise&#34;</span>,
    <span style="color:#e6db74">&#34;location&#34;</span>: <span style="color:#e6db74">&#34;DALLAS05&#34;</span>,
    <span style="color:#e6db74">&#34;quantity&#34;</span>: <span style="color:#ae81ff">1</span>,
    <span style="color:#e6db74">&#34;packageId&#34;</span>: <span style="color:#ae81ff">240</span>,
    <span style="color:#75715e"># To see the list of prices available for the package</span>
    <span style="color:#75715e"># use the SoftLayer_Product_Package::getItems method with masks</span>
    <span style="color:#75715e"># or SoftLayer_Product_Package::getItemPrices</span>
    <span style="color:#e6db74">&#34;prices&#34;</span>: [
        {<span style="color:#e6db74">&#34;id&#34;</span>: <span style="color:#ae81ff">45098</span>},      <span style="color:#75715e"># Block Storage         keyName: storage_block</span>
        {<span style="color:#e6db74">&#34;id&#34;</span>: <span style="color:#ae81ff">45058</span>},      <span style="color:#75715e"># Endurance Storage     keyName: storage_service_enterprise</span>
        {<span style="color:#e6db74">&#34;id&#34;</span>: <span style="color:#ae81ff">45138</span>},      <span style="color:#75715e"># 20 GB Storage Space   keyName: performance_storage_space</span>
        {<span style="color:#e6db74">&#34;id&#34;</span>: <span style="color:#ae81ff">45088</span>},      <span style="color:#75715e"># 4 IOPS per GB         keyName: storage_tier_level</span>
        {<span style="color:#e6db74">&#34;id&#34;</span>: <span style="color:#ae81ff">46140</span>}       <span style="color:#75715e"># 5 GB Storage Space    keyName: storage_snapshot_space</span>
    ],
    <span style="color:#e6db74">&#34;osFormatType&#34;</span>: {<span style="color:#e6db74">&#34;keyName&#34;</span>: <span style="color:#e6db74">&#34;LINUX&#34;</span>}
}

<span style="color:#75715e"># Declares the API client</span>
client <span style="color:#f92672">=</span> SoftLayer<span style="color:#f92672">.</span>Client()

<span style="color:#66d9ef">try</span>:
    <span style="color:#75715e"># Use placeOrder method when you ready to order</span>
    result <span style="color:#f92672">=</span> client[<span style="color:#e6db74">&#39;SoftLayer_Product_Order&#39;</span>]<span style="color:#f92672">.</span>verifyOrder(orderTemplate)
    pprint(result)
<span style="color:#66d9ef">except</span> SoftLayer<span style="color:#f92672">.</span>SoftLayerAPIError <span style="color:#66d9ef">as</span> e:
    <span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#34;Unable to place the order. </span><span style="color:#e6db74">%s</span><span style="color:#e6db74">, </span><span style="color:#e6db74">%s</span><span style="color:#e6db74">&#34;</span> <span style="color:#f92672">%</span> (e<span style="color:#f92672">.</span>faultCode, e<span style="color:#f92672">.</span>faultString))</code></pre></div>
<h2 id="file-endurance-storage"><strong>File Endurance Storage</strong></h2>

<p>Since the prices are the same, basically it is only to required change the price of <code>storage_block</code> by <code>storage_file</code>, and remove the property <code>osFormatType</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> SoftLayer
<span style="color:#f92672">from</span> pprint <span style="color:#f92672">import</span> pprint

<span style="color:#75715e"># Building an skeleton SoftLayer_Container_Product_Order_Network_Storage_Enterprise to the order</span>
orderTemplate <span style="color:#f92672">=</span> {
    <span style="color:#e6db74">&#34;complexType&#34;</span>: <span style="color:#e6db74">&#34;SoftLayer_Container_Product_Order_Network_Storage_Enterprise&#34;</span>,
    <span style="color:#e6db74">&#34;location&#34;</span>: <span style="color:#e6db74">&#34;DALLAS05&#34;</span>,
    <span style="color:#e6db74">&#34;quantity&#34;</span>: <span style="color:#ae81ff">1</span>,
    <span style="color:#e6db74">&#34;packageId&#34;</span>: <span style="color:#ae81ff">240</span>,
    <span style="color:#75715e"># To see the list of prices available for the package</span>
    <span style="color:#75715e"># use the SoftLayer_Product_Package::getItems method with masks</span>
    <span style="color:#75715e"># or SoftLayer_Product_Package::getItemPrices</span>
    <span style="color:#e6db74">&#34;prices&#34;</span>: [
        {<span style="color:#e6db74">&#34;id&#34;</span>: <span style="color:#ae81ff">45108</span>},      <span style="color:#75715e"># File Storage          keyName: storage_file</span>
        {<span style="color:#e6db74">&#34;id&#34;</span>: <span style="color:#ae81ff">45058</span>},      <span style="color:#75715e"># Endurance Storage     keyName: storage_service_enterprise</span>
        {<span style="color:#e6db74">&#34;id&#34;</span>: <span style="color:#ae81ff">45138</span>},      <span style="color:#75715e"># 20 GB Storage Space   keyName: performance_storage_space</span>
        {<span style="color:#e6db74">&#34;id&#34;</span>: <span style="color:#ae81ff">45088</span>},      <span style="color:#75715e"># 4 IOPS per GB         keyName: storage_tier_level</span>
        {<span style="color:#e6db74">&#34;id&#34;</span>: <span style="color:#ae81ff">46140</span>}       <span style="color:#75715e"># 5 GB Storage Space    keyName: storage_snapshot_space</span>
    ]
}

<span style="color:#75715e"># Declares the API client</span>
client <span style="color:#f92672">=</span> SoftLayer<span style="color:#f92672">.</span>Client()

<span style="color:#66d9ef">try</span>:
    <span style="color:#75715e"># Use placeOrder method when you ready to order</span>
    result <span style="color:#f92672">=</span> client[<span style="color:#e6db74">&#39;SoftLayer_Product_Order&#39;</span>]<span style="color:#f92672">.</span>verifyOrder(orderTemplate)
    pprint(result)
<span style="color:#66d9ef">except</span> SoftLayer<span style="color:#f92672">.</span>SoftLayerAPIError <span style="color:#66d9ef">as</span> e:
    <span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#34;Unable to place the order. </span><span style="color:#e6db74">%s</span><span style="color:#e6db74">, </span><span style="color:#e6db74">%s</span><span style="color:#e6db74">&#34;</span> <span style="color:#f92672">%</span> (e<span style="color:#f92672">.</span>faultCode, e<span style="color:#f92672">.</span>faultString))</code></pre></div>
<h2 id="complex-example"><strong>Complex example</strong></h2>

<p>Following is a more complex example which order a file storage by setting only the parameters of location, size, and iops.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> SoftLayer
<span style="color:#f92672">import</span> json

<span style="color:#75715e"># Values &#34;AMS01&#34;, &#34;AMS03&#34;, &#34;CHE01&#34;, &#34;DAL05&#34;, &#34;DAL06&#34; &#34;FRA02&#34;, &#34;HKG02&#34;, &#34;LON02&#34;, etc.</span>
location <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;AMS01&#34;</span>

<span style="color:#75715e"># Values: &#34;0.25&#34;, &#34;2&#34;, &#34;4&#34;</span>
iops <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;2&#34;</span>

<span style="color:#75715e"># Values &#34;20&#34;, &#34;40&#34;, &#34;80&#34;, &#34;100&#34;, etc.</span>
storageSize <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;20&#34;</span>

PACKAGE_ID <span style="color:#f92672">=</span> <span style="color:#ae81ff">240</span>

client <span style="color:#f92672">=</span> SoftLayer<span style="color:#f92672">.</span>Client()

productOrderService <span style="color:#f92672">=</span> client[<span style="color:#e6db74">&#39;SoftLayer_Product_Order&#39;</span>]
packageService <span style="color:#f92672">=</span> client[<span style="color:#e6db74">&#39;SoftLayer_Product_Package&#39;</span>]
locationGroupService <span style="color:#f92672">=</span> client[<span style="color:#e6db74">&#39;SoftLayer_Location_Group_Pricing&#39;</span>]
locationService <span style="color:#f92672">=</span> client[<span style="color:#e6db74">&#39;SoftLayer_Location&#39;</span>]

objectFilterDatacenter <span style="color:#f92672">=</span> {<span style="color:#e6db74">&#34;name&#34;</span>: {<span style="color:#e6db74">&#34;operation&#34;</span>: location<span style="color:#f92672">.</span>lower()}}
objectFilterStorageEnterprise <span style="color:#f92672">=</span> {<span style="color:#e6db74">&#34;items&#34;</span>: {<span style="color:#e6db74">&#34;categories&#34;</span>: {<span style="color:#e6db74">&#34;categoryCode&#34;</span>: {<span style="color:#e6db74">&#34;operation&#34;</span>: <span style="color:#e6db74">&#34;storage_service_enterprise&#34;</span>}}}}
objectFilterFileStorage <span style="color:#f92672">=</span> {<span style="color:#e6db74">&#34;items&#34;</span>: {<span style="color:#e6db74">&#34;categories&#34;</span>: {<span style="color:#e6db74">&#34;categoryCode&#34;</span>: {<span style="color:#e6db74">&#34;operation&#34;</span>: <span style="color:#e6db74">&#34;storage_file&#34;</span>}}}}
objectMaskLocation <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;mask[locations]&#34;</span>
objectMaskIops <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;mask[attributes]&#34;</span>


<span style="color:#66d9ef">try</span>:
    <span style="color:#75715e"># Getting the datacenter.</span>
    datacenter <span style="color:#f92672">=</span> locationService<span style="color:#f92672">.</span>getDatacenters(filter<span style="color:#f92672">=</span>objectFilterDatacenter)
    <span style="color:#75715e"># Getting file storage prices.</span>
    itemsFileStorage <span style="color:#f92672">=</span> packageService<span style="color:#f92672">.</span>getItems(id<span style="color:#f92672">=</span>PACKAGE_ID, filter<span style="color:#f92672">=</span>objectFilterFileStorage)
    <span style="color:#75715e"># Getting the item prices whose category is storage_service_enterprise.</span>
    itemsStorageEnterprise <span style="color:#f92672">=</span> packageService<span style="color:#f92672">.</span>getItems(id<span style="color:#f92672">=</span>PACKAGE_ID, filter<span style="color:#f92672">=</span>objectFilterStorageEnterprise)
    <span style="color:#75715e"># Getting the SoftLayer_Location_Group_Pricing which contains the configured location.</span>
    locations <span style="color:#f92672">=</span> locationGroupService<span style="color:#f92672">.</span>getAllObjects(mask<span style="color:#f92672">=</span>objectMaskLocation)
    <span style="color:#66d9ef">for</span> item <span style="color:#f92672">in</span> locations:
        <span style="color:#66d9ef">for</span> loc <span style="color:#f92672">in</span> item[<span style="color:#e6db74">&#39;locations&#39;</span>]:
            <span style="color:#66d9ef">if</span> location<span style="color:#f92672">.</span>lower() <span style="color:#f92672">==</span> loc[<span style="color:#e6db74">&#39;name&#39;</span>]<span style="color:#f92672">.</span>lower():
                location <span style="color:#f92672">=</span> item
                <span style="color:#66d9ef">break</span>
        <span style="color:#66d9ef">if</span> <span style="color:#e6db74">&#39;id&#39;</span> <span style="color:#f92672">in</span> location:
            <span style="color:#66d9ef">break</span>
    <span style="color:#75715e"># Getting the IOPS item prices which are equals to the configured IOPS, and are valid for the configured location.</span>
    <span style="color:#75715e"># In case we did not get a location group for the configured location</span>
    <span style="color:#75715e"># we are going to search for standard prices.</span>
    <span style="color:#66d9ef">if</span> <span style="color:#e6db74">&#39;id&#39;</span> <span style="color:#f92672">in</span> location:
        objectFilterLocation <span style="color:#f92672">=</span> {<span style="color:#e6db74">&#34;items&#34;</span>: {<span style="color:#e6db74">&#34;description&#34;</span>: {<span style="color:#e6db74">&#34;operation&#34;</span>: iops <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34; IOPS per GB&#34;</span>}, <span style="color:#e6db74">&#34;categories&#34;</span>: {<span style="color:#e6db74">&#34;categoryCode&#34;</span>: {<span style="color:#e6db74">&#34;operation&#34;</span>: <span style="color:#e6db74">&#34;storage_tier_level&#34;</span>}}, <span style="color:#e6db74">&#34;locationGroupId&#34;</span>: {<span style="color:#e6db74">&#34;operation&#34;</span>: <span style="color:#e6db74">&#34;in&#34;</span>, <span style="color:#e6db74">&#34;options&#34;</span>: [{<span style="color:#e6db74">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;data&#34;</span>, <span style="color:#e6db74">&#34;value&#34;</span>: [location[<span style="color:#e6db74">&#39;id&#39;</span>]]}]}}}
        objectFilter <span style="color:#f92672">=</span> objectFilterLocation
    <span style="color:#66d9ef">else</span>:
        objectFilterNoLocation <span style="color:#f92672">=</span> {<span style="color:#e6db74">&#34;items&#34;</span>: {<span style="color:#e6db74">&#34;description&#34;</span>: {<span style="color:#e6db74">&#34;operation&#34;</span>:  iops <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34; IOPS per GB&#34;</span>}, <span style="color:#e6db74">&#34;categories&#34;</span>: {<span style="color:#e6db74">&#34;categoryCode&#34;</span>: {<span style="color:#e6db74">&#34;operation&#34;</span>: <span style="color:#e6db74">&#34;storage_tier_level&#34;</span>}}, <span style="color:#e6db74">&#34;locationGroupId&#34;</span>: {<span style="color:#e6db74">&#34;operation&#34;</span>: <span style="color:#e6db74">&#34;is null&#34;</span>}}}
        objectFilter <span style="color:#f92672">=</span> objectFilterNoLocation
    itemsIops <span style="color:#f92672">=</span> packageService<span style="color:#f92672">.</span>getItems(id<span style="color:#f92672">=</span>PACKAGE_ID, filter<span style="color:#f92672">=</span>objectFilter, mask<span style="color:#f92672">=</span>objectMaskIops)
    <span style="color:#66d9ef">if</span> len(itemsIops) <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>:
        <span style="color:#75715e"># In case we got an empty list we try getting the standard prices</span>
        objectFilter <span style="color:#f92672">=</span> {<span style="color:#e6db74">&#34;items&#34;</span>: {<span style="color:#e6db74">&#34;description&#34;</span>: {<span style="color:#e6db74">&#34;operation&#34;</span>: iops <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34; IOPS per GB&#34;</span>}, <span style="color:#e6db74">&#34;categories&#34;</span>: {<span style="color:#e6db74">&#34;categoryCode&#34;</span>: {<span style="color:#e6db74">&#34;operation&#34;</span>: <span style="color:#e6db74">&#34;storage_tier_level&#34;</span>}}, <span style="color:#e6db74">&#34;locationGroupId&#34;</span>: {<span style="color:#e6db74">&#34;operation&#34;</span>: <span style="color:#e6db74">&#34;is null&#34;</span>}}}
        itemsIops <span style="color:#f92672">=</span> packageService<span style="color:#f92672">.</span>getItems(id<span style="color:#f92672">=</span>PACKAGE_ID, filter<span style="color:#f92672">=</span>objectFilter, mask<span style="color:#f92672">=</span>objectMaskIops)
    <span style="color:#75715e"># Getting the storage space which are equals to the configured storage space, meet the requirements for the configured IOPS, and are valid for the configured location</span>
    <span style="color:#75715e"># In case we did not get a location group for the configured location</span>
    <span style="color:#75715e"># we are going to search for standard prices.</span>
    <span style="color:#66d9ef">if</span> <span style="color:#e6db74">&#39;id&#39;</span> <span style="color:#f92672">in</span> location:
        objectFilterLocation <span style="color:#f92672">=</span> {<span style="color:#e6db74">&#34;items&#34;</span>: {<span style="color:#e6db74">&#34;capacity&#34;</span>: {<span style="color:#e6db74">&#34;operation&#34;</span>:  storageSize}, <span style="color:#e6db74">&#34;prices&#34;</span>: {<span style="color:#e6db74">&#34;capacityRestrictionMaximum&#34;</span>: {<span style="color:#e6db74">&#34;operation&#34;</span>: itemsIops[<span style="color:#ae81ff">0</span>][<span style="color:#e6db74">&#39;attributes&#39;</span>][<span style="color:#ae81ff">0</span>][<span style="color:#e6db74">&#39;value&#39;</span>]}, <span style="color:#e6db74">&#34;categories&#34;</span>: {<span style="color:#e6db74">&#34;categoryCode&#34;</span>: {<span style="color:#e6db74">&#34;operation&#34;</span>: <span style="color:#e6db74">&#34;performance_storage_space&#34;</span>}}, <span style="color:#e6db74">&#34;locationGroupId&#34;</span>: {<span style="color:#e6db74">&#34;operation&#34;</span>: <span style="color:#e6db74">&#34;in&#34;</span>, <span style="color:#e6db74">&#34;options&#34;</span>: [{<span style="color:#e6db74">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;data&#34;</span>, <span style="color:#e6db74">&#34;value&#34;</span>: [location[<span style="color:#e6db74">&#39;id&#39;</span>]]}]}}}}
        objectFilter <span style="color:#f92672">=</span> objectFilterLocation
    <span style="color:#66d9ef">else</span>:
        objectFilterNoLocation <span style="color:#f92672">=</span> {<span style="color:#e6db74">&#34;items&#34;</span>: {<span style="color:#e6db74">&#34;capacity&#34;</span>: {<span style="color:#e6db74">&#34;operation&#34;</span>:  storageSize}, <span style="color:#e6db74">&#34;prices&#34;</span>: {<span style="color:#e6db74">&#34;capacityRestrictionMaximum&#34;</span>: {<span style="color:#e6db74">&#34;operation&#34;</span>: itemsIops[<span style="color:#ae81ff">0</span>][<span style="color:#e6db74">&#39;attributes&#39;</span>][<span style="color:#ae81ff">0</span>][<span style="color:#e6db74">&#39;value&#39;</span>]}, <span style="color:#e6db74">&#34;categories&#34;</span>: {<span style="color:#e6db74">&#34;categoryCode&#34;</span>: {<span style="color:#e6db74">&#34;operation&#34;</span>: <span style="color:#e6db74">&#34;performance_storage_space&#34;</span>}}, <span style="color:#e6db74">&#34;locationGroupId&#34;</span>: {<span style="color:#e6db74">&#34;operation&#34;</span>: <span style="color:#e6db74">&#34;is null&#34;</span>}}}}
        objectFilter <span style="color:#f92672">=</span> objectFilterNoLocation
    itemsStorage <span style="color:#f92672">=</span> packageService<span style="color:#f92672">.</span>getItems(id<span style="color:#f92672">=</span>PACKAGE_ID, filter<span style="color:#f92672">=</span>objectFilter)
    <span style="color:#66d9ef">if</span> len(itemsStorage) <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>:
        <span style="color:#75715e"># In case we got an empty list we try getting the standard prices</span>
        objectFilter <span style="color:#f92672">=</span> {<span style="color:#e6db74">&#34;items&#34;</span>: {<span style="color:#e6db74">&#34;capacity&#34;</span>: {<span style="color:#e6db74">&#34;operation&#34;</span>: storageSize}, <span style="color:#e6db74">&#34;prices&#34;</span>: {<span style="color:#e6db74">&#34;capacityRestrictionMaximum&#34;</span>: {<span style="color:#e6db74">&#34;operation&#34;</span>: itemsIops[<span style="color:#ae81ff">0</span>][<span style="color:#e6db74">&#39;attributes&#39;</span>][<span style="color:#ae81ff">0</span>][<span style="color:#e6db74">&#39;value&#39;</span>]}, <span style="color:#e6db74">&#34;categories&#34;</span>: {<span style="color:#e6db74">&#34;categoryCode&#34;</span>: {<span style="color:#e6db74">&#34;operation&#34;</span>: <span style="color:#e6db74">&#34;performance_storage_space&#34;</span>}}, <span style="color:#e6db74">&#34;locationGroupId&#34;</span>: {<span style="color:#e6db74">&#34;operation&#34;</span>: <span style="color:#e6db74">&#34;is null&#34;</span>}}}}
        itemsStorage <span style="color:#f92672">=</span> packageService<span style="color:#f92672">.</span>getItems(id<span style="color:#f92672">=</span>PACKAGE_ID, filter<span style="color:#f92672">=</span>objectFilter)
    <span style="color:#75715e"># Building the order template</span>
    orderData <span style="color:#f92672">=</span> {
        <span style="color:#e6db74">&#34;complexType&#34;</span>: <span style="color:#e6db74">&#34;SoftLayer_Container_Product_Order_Network_Storage_Enterprise&#34;</span>,
        <span style="color:#e6db74">&#34;packageId&#34;</span>: PACKAGE_ID,
        <span style="color:#e6db74">&#34;location&#34;</span>: datacenter[<span style="color:#ae81ff">0</span>][<span style="color:#e6db74">&#39;id&#39;</span>],
        <span style="color:#e6db74">&#34;quantity&#34;</span>: <span style="color:#ae81ff">1</span>,
        <span style="color:#e6db74">&#34;prices&#34;</span>: [
            {
                <span style="color:#e6db74">&#34;id&#34;</span>: itemsFileStorage[<span style="color:#ae81ff">0</span>][<span style="color:#e6db74">&#39;prices&#39;</span>][<span style="color:#ae81ff">0</span>][<span style="color:#e6db74">&#39;id&#39;</span>]
            },
            {
                <span style="color:#e6db74">&#34;id&#34;</span>: itemsStorageEnterprise[<span style="color:#ae81ff">0</span>][<span style="color:#e6db74">&#39;prices&#39;</span>][<span style="color:#ae81ff">0</span>][<span style="color:#e6db74">&#39;id&#39;</span>]
            },
            {
                <span style="color:#e6db74">&#34;id&#34;</span>: itemsIops[<span style="color:#ae81ff">0</span>][<span style="color:#e6db74">&#39;prices&#39;</span>][<span style="color:#ae81ff">0</span>][<span style="color:#e6db74">&#39;id&#39;</span>]
            },
            {
                <span style="color:#e6db74">&#34;id&#34;</span>: itemsStorage[<span style="color:#ae81ff">0</span>][<span style="color:#e6db74">&#39;prices&#39;</span>][<span style="color:#ae81ff">0</span>][<span style="color:#e6db74">&#39;id&#39;</span>]
            }
        ]
    }
    <span style="color:#75715e"># verifyOrder() will check your order for errors. Replace this with a call to</span>
    <span style="color:#75715e"># placeOrder() when you&#39;re ready to order. Both calls return a receipt object</span>
    <span style="color:#75715e"># that you can use for your records.</span>
    response <span style="color:#f92672">=</span> productOrderService<span style="color:#f92672">.</span>verifyOrder(orderData)
    <span style="color:#66d9ef">print</span>(json<span style="color:#f92672">.</span>dumps(response, sort_keys<span style="color:#f92672">=</span>True, indent<span style="color:#f92672">=</span><span style="color:#ae81ff">2</span>, separators<span style="color:#f92672">=</span>(<span style="color:#e6db74">&#39;,&#39;</span>, <span style="color:#e6db74">&#39;: &#39;</span>)))
<span style="color:#66d9ef">except</span> SoftLayer<span style="color:#f92672">.</span>SoftLayerAPIError <span style="color:#66d9ef">as</span> e:
    <span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#34;Unable to place the order. faultCode=</span><span style="color:#e6db74">%s</span><span style="color:#e6db74">, faultString=</span><span style="color:#e6db74">%s</span><span style="color:#e6db74">&#34;</span> <span style="color:#f92672">%</span> (e<span style="color:#f92672">.</span>faultCode, e<span style="color:#f92672">.</span>faultString))</code></pre></div>
            </div>
        </div>

    </div>
    <hr>
    <div class="row">
            
        <div class="col-md-6">
            
<div class="panel panel-default">
    <div class="panel-heading" style="padding: 2px 15px;">
        <h4>More Documentation</h4>
    </div>
    <div class="panel-body">
        <a href="https://softlayer.github.com/reference/softlayerapi"><i class="fa fa-link"></i> SoftLayer API Reference<br></a>
        <a href="https://github.com/softlayer/softlayer-java"><i class="fab fa-github"></i> softlayer-java<br></a>
        <a href="https://github.com/softlayer/softlayer-api-perl-client"><i class="fab fa-github"></i> softlayer-perl<br></a>
        <a href="https://github.com/softlayer/softlayer-api-php-client"><i class="fab fa-github"></i> softlayer-php<br></a>
        <a href="https://github.com/softlayer/softlayer-python"><i class="fab fa-github"></i> softlayer-python<br></a>
        <a href="https://github.com/softlayer/softlayer-ruby"><i class="fab fa-github"></i> softlayer-ruby<br></a>
    </div>
</div>

<div class="panel panel-default">
    <div class="panel-heading text-center" style="padding: 2px 15px;">
      <a href="https://www.facebook.com/IBMBluemixIaaS/"><i class="fab fa-facebook-square" alt="facebook"></i> </a>
      <a href="https://twitter.com/IBMBluemixIaaS"><i class="fab fa-twitter" alt="twitter"></i> </a>
      <a href="http://www.linkedin.com/company/softlayer-technologies-inc-" alt="linked-in"><i class="fab fa-linkedin"></i> </a>
      <a href="https://github.com/softlayer/softlayer.github.io"><i class="fab fa-github" alt="github"></i> </a>

    </div>
</div>

        </div>
        <div class="col-md-6">
            <div class="well well-sm" style="word-wrap: break-word;"> 
                <strong>Feedback? <span class="fa fa-comment"/></strong>
                    <p>
                        We would love to hear it<br>
                        <a class="" href="https://github.com/softlayer/api_examples/issues/new?title=Feedback%20for%20python%20-%20Order%20an%20endurance%20storage%20%28block%2ffile%29&body=Feedback+regarding%3A%20https%3a%2f%2fsldn.softlayer.com%2fpython%2forder_endurance_storage%2f"><span class="fa fa-github-square"/> Open an issue</a>
                    </p>
            </div>
        </div>

    </div>
        <footer>
            <div class="row">
                <hr>
                <div class="col-sm-12">
                    <p>&copy; SoftLayer 2015<br>
                    Built with <a href="https://github.com/spf13/hugo">Hugo</a></p>
                </div>
            </div>
        </footer>
</div>

    <script src="https://sldn.softlayer.com/js/jquery.js"></script>
    <script src="https://sldn.softlayer.com/js/bootstrap.js"></script>
</body>
</html>
