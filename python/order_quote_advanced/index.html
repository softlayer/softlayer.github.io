<!doctype html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="SoftLayer API Examples, implementations, and release notes.">
    <meta name="author" content="SoftLayer">

    <title>Advanced Quote Ordering - https://sldn.softlayer.com/</title>
    <link rel="canonical" href="https://sldn.softlayer.com/python/order_quote_advanced/">
        <link href="https://sldn.softlayer.com/css/main.css" rel="stylesheet">
    <link href="https://sldn.softlayer.com/css/bootstrap.css" rel="stylesheet">
    <link href="https://sldn.softlayer.com/css/custom.css" rel="stylesheet">
    <link href="https://sldn.softlayer.com/css/monokai.css" rel="stylesheet">
    <link href="https://sldn.softlayer.com/css/highlight/solarized_dark.css" rel="stylesheet">
    

    <script src="https://sldn.softlayer.com/js/highlight.pack.js"></script>

    <script>hljs.initHighlightingOnLoad();</script>
    <link rel="shortcut icon" href="https://sldn.softlayer.com/img/favicon.ico" type="image/x-icon" />
	<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Lato" />
            

    <script src="https://sldn.softlayer.com/js/jquery-3.3.1.min.js"></script> 
    <script src="https://sldn.softlayer.com/js/sldn.js"></script>


    <link href="https://sldn.softlayer.com/fontawesome/css/fontawesome.min.css" rel="stylesheet" type="text/css">
    <link href="https://sldn.softlayer.com/fontawesome/css/brands.min.css" rel="stylesheet" type="text/css">
    <link href="https://sldn.softlayer.com/fontawesome/css/solid.min.css" rel="stylesheet" type="text/css">
    
    <script defer src="https://sldn.softlayer.com/fontawesome/js/solid.min.js"></script>
    <script defer src="https://sldn.softlayer.com/fontawesome/js/brands.min.js"></script>
    <script defer src="https://sldn.softlayer.com/fontawesome/js/fontawesome.min.js"></script>

    <script>
        var head = document.getElementsByTagName('head')[0]
        var style = document.createElement('link')
        style.type = 'text/css'
        style.rel = 'stylesheet'
        style.id = "dark-theme"
        if (localStorage.getItem("dark-mode-theme") == "dark") {
            style.href = '/css/dark.css'
        } else {
            style.href = '/css/light.css'
        }
        head.append(style)
    </script>

    <script>
		$(document).ready(function() {
			$('table').addClass("table table-hover table-striped")
            setThemeMode(localStorage.getItem("dark-mode-theme") || "dark");
		})
	</script>
    
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-9XPZ9ZBSJE"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-9XPZ9ZBSJE');
        }
      </script>
</head>

<body>
    <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
        <div class="nav-container">
            <div class="navbar-header" style="width: 150px">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                    <span class="sr-only">Toggle Navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="https://sldn.softlayer.com/">SoftLayer API</a>
            </div>

            <div class="navbar-header" style="width: calc(100% - 350px)">
                <ul class="nav navbar-nav" style="width: 100%">
                    
                        <li><a href="https://sldn.softlayer.com/article/">Articles</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/reference/softlayerapi">Docs</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/go/">Go</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/java/">Java</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/php/">PHP</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/python/">Python</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/rest/">Rest</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/ruby/">Ruby</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/tools/">Tools</a></li>
                    
                    <li class="nav-item">
                        <a id="dark-toggle" class="dark-mode-toggle" aria-label="dark-mode-toggle" style="color: var(--Red); font-size: 20px">
                            <i class="fas fa-sun"></i>
                        </a>
                    </li>
                </ul>
            </div>

            <div id="custom-search-input" class="pull-right" style="width: 200px">
              <form class="navbar-form" role="search" method="get" action="https://www.bing.com/search">
                <div class="input-group col-md-12">
                  <input type="text" class="form-control input-md" placeholder="Search" name="q" id="srch-term">
                  <input type="hidden" name="q1" value="site:sldn.softlayer.com" />
                  <div class="input-group-btn">
                    <button class="btn btn-info" type="submit">
                      <i class="glyphicon glyphicon-search"></i>
                    </button>
                  </div>
                </div>
              </form>
            </div>

        </div>
    </nav>

<script type="text/javascript">
const darkIconClass = 'fas fa-moon'
const lightIconClass = 'fas fa-sun'
var darkCSS = $("#dark-theme");
var darkToggleIcon = $("#dark-toggle i");




function setThemeMode(mode) {
    localStorage.setItem("dark-mode-theme", mode);
    if (mode === "dark") {
        darkToggleIcon.attr('class', darkIconClass)
    } else  {
        darkToggleIcon.attr('class', lightIconClass)
    }
}


$("#dark-toggle").click(function () {
  if (darkToggleIcon.attr("class") == lightIconClass) {
    setThemeMode("dark")
  } else if (darkToggleIcon.attr("class") == darkIconClass) {
    setThemeMode("light")
  }
  location.reload();
});
</script>
<div class="container">
    <div class="row">
    
        <div class="col-md-3">
            <div style="word-wrap: break-word;"> 
                <h4>August 7, 2018<br></h4>
            </div>
        </div>
        <div class="col-md-9">

                <strong>Classes <span class="fa fa-book"/></strong>
                
                    <a class="label label-primary" href="https://sldn.softlayer.com/reference/services/SoftLayer_Billing_Order_Quote">SoftLayer_Billing_Order_Quote</a>
                
                    <a class="label label-primary" href="https://sldn.softlayer.com/reference/services/SoftLayer_Account">SoftLayer_Account</a>
                
                    <a class="label label-primary" href="https://sldn.softlayer.com/reference/services/SoftLayer_Product_Order">SoftLayer_Product_Order</a>
                
                    <a class="label label-primary" href="https://sldn.softlayer.com/reference/services/SoftLayer_Location">SoftLayer_Location</a>
                
                <br>
                <strong>Tags <span class="fa fa-tags"/></strong>
                
                    <a class="label label-danger" href="https://sldn.softlayer.com/tags/order">order</a>
                
                    <a class="label label-danger" href="https://sldn.softlayer.com/tags/quote">quote</a>
                
                    <a class="label label-danger" href="https://sldn.softlayer.com/tags/sshkeys">sshkeys</a>
                
                    <a class="label label-danger" href="https://sldn.softlayer.com/tags/provisionscripts">provisionscripts</a>
                          
        </div>
    </div>
    <hr>
    <div class="row">
		<div class="col-md-12">
            <div class="well well-sm  article" style="word-wrap: break-word;">
                <div class="article-title">
				    <h1>Advanced Quote Ordering</h1>
                    <small>Place an order using a quote with SSH keys and post provisioning scripts. Along with a few examples of how to get the needed data.</small>
                </div>
				
                
				
                <h2 id="quotes">Quotes</h2>
<p>Quotes are a way to save an order, and then easily duplicate the order later. You can create a quote from the control portal by going through the normal order process, and then instead of hitting &ldquo;Order&rdquo; at the end, there will be a button that says &ldquo;Save Quote&rdquo;, which will save the order for later. You can then use the quote service to pull down the information about it from the API. <code>listQuotes</code> in the example below does exactly this.</p>
<p>To order from a quote you will need the following bits of information</p>
<ul>
<li>Quote ID</li>
<li>Datacenter ID where you want the order to end up</li>
<li>Other bits of optional data, like SSH keys, vlan ids, image ids, etc.</li>
</ul>
<h3 id="rest-api-call">REST API Call</h3>
<p><code>curl -u $SL_USER:$SL_APIKEY 'https://api.softlayer.com/rest/v3.1/SoftLayer_Account/getActiveQuotes.json?objectMask=mask%5Border%5Bid%2C+orderTotalAmount%2C+orderTopLevelItems%5Bid%2C+description%5D%5D%2C+ordersFromQuoteCount%5D'</code></p>
<h3 id="python-output">Python Output</h3>
<p>The sample code will output something like this. Quotes can be PENDING, which means they might expire if you don&rsquo;t call <a href="https://softlayer.github.io/reference/services/SoftLayer_Billing_Order_Quote/saveQuote/">SoftLayer_Billing_Order_Quote::saveQuote(id=quoteId)</a> before its expiration date. SAVED quotes will stick around until you call <a href="https://softlayer.github.io/reference/services/SoftLayer_Billing_Order_Quote/deleteQuote/">SoftLayer_Billing_Order_Quote::deleteQuote(id=quoteId)</a>
The quoteId in the first column is what will be used for placing the order. Description is just the topLevelBillingItem for the quote.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">ID, createDate, name, status, order count, description
</span></span><span class="line"><span class="cl">2460465, 2018-07-23T14:20:59-06:00, Ruber, SAVED, 0, Single Intel Xeon E3-1270 v3 <span class="o">(</span><span class="m">4</span> Cores, 3.50 GHz<span class="o">)</span>
</span></span><span class="line"><span class="cl">2457385, 2018-07-17T14:23:54-06:00, AJCB-TESTWITHSSHKEYS, PENDING, 0, Single Intel Xeon E3-1270 v3 <span class="o">(</span><span class="m">4</span> Cores, 3.50 GHz<span class="o">)</span>
</span></span><span class="line"><span class="cl">1528487, 2015-09-25T15:37:27-06:00, test-quote, SAVED, 3, <span class="m">1</span> x 2.0 GHz Core
</span></span></code></pre></div><h2 id="finding-the-dc-id">Finding the DC id</h2>
<p>Now we need to figure out which DC we want to place the order in.
The way we are going to do this, is by checking the quote&rsquo;s top level item, and see what DCs that package is available in. Using <a href="https://softlayer.github.io/reference/services/SoftLayer_Location/getDatacenters/">SoftLayer_Location::getDatacenters()</a> would show you all datacenters, and not all packages are available in all datacenters.</p>
<h3 id="rest-call">REST Call</h3>
<p><code>'https://api.softlayer.com/rest/v3.1/SoftLayer_Billing_Order_Quote/&lt;QUOTEID&gt;/getObject.json?objectMask=mask[id,+order[id,orderTopLevelItems[id,package[id,availableLocations[location[longName,id]]]]]]'</code></p>
<h3 id="python">Python</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">listLocationsForQuote</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">quoteId</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="n">mask</span><span class="o">=</span><span class="s2">&#34;mask[id, order[id, orderTopLevelItems[id, package[id, availableLocations[location[longName, id]]]]]]&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="n">locations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="p">[</span><span class="s1">&#39;Billing_Order_Quote&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">getObject</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">quoteId</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="n">package_id</span> <span class="o">=</span> <span class="n">locations</span><span class="p">[</span><span class="s1">&#39;order&#39;</span><span class="p">][</span><span class="s1">&#39;orderTopLevelItems&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;package&#39;</span><span class="p">][</span><span class="s1">&#39;id&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;Package </span><span class="si">{}</span><span class="s2"> is available in the following locations...&#34;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">package_id</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="n">dc</span> <span class="ow">in</span> <span class="n">locations</span><span class="p">[</span><span class="s1">&#39;order&#39;</span><span class="p">][</span><span class="s1">&#39;orderTopLevelItems&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;package&#39;</span><span class="p">][</span><span class="s1">&#39;availableLocations&#39;</span><span class="p">]:</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;</span><span class="si">{}</span><span class="s2">, id=</span><span class="si">{}</span><span class="s2">&#34;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">dc</span><span class="p">[</span><span class="s1">&#39;location&#39;</span><span class="p">][</span><span class="s1">&#39;longName&#39;</span><span class="p">],</span> <span class="n">dc</span><span class="p">[</span><span class="s1">&#39;location&#39;</span><span class="p">][</span><span class="s1">&#39;id&#39;</span><span class="p">]))</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">Package <span class="m">46</span> is available in the following locations...
</span></span><span class="line"><span class="cl">Seattle 1, <span class="nv">id</span><span class="o">=</span><span class="m">18171</span>
</span></span><span class="line"><span class="cl">Dallas 5, <span class="nv">id</span><span class="o">=</span><span class="m">138124</span>
</span></span><span class="line"><span class="cl">Houston 2, <span class="nv">id</span><span class="o">=</span><span class="m">142775</span>
</span></span><span class="line"><span class="cl">Dallas 7, <span class="nv">id</span><span class="o">=</span><span class="m">142776</span>
</span></span><span class="line"><span class="cl">San Jose 1, <span class="nv">id</span><span class="o">=</span><span class="m">168642</span>
</span></span><span class="line"><span class="cl">...
</span></span></code></pre></div><h2 id="building-our-new-order">Building our new order</h2>
<p>Ok, now we have a quote, a dc, now we just need to build our order out.</p>
<h3 id="softlayer_billing_order_quotegetrecalculatedordercontainerhttpssoftlayergithubioreferenceservicessoftlayer_billing_order_quotegetrecalculatedordercontainer"><a href="https://softlayer.github.io/reference/services/SoftLayer_Billing_Order_Quote/getRecalculatedOrderContainer/">SoftLayer_Billing_Order_Quote::getRecalculatedOrderContainer()</a></h3>
<p><code>'https://api.softlayer.com/rest/v3.1/SoftLayer_Billing_Order_Quote/&lt;QUOTEID&gt;/getRecalculatedOrderContainer.json</code></p>
<p>This function takes a quote, and returns an order container with all the proper price ids filled in, which are required to place the actual order.</p>
<p>With this order container, all we need to do is fill out some extra information (basically anything that would be on the last page of the order form).</p>
<h3 id="order-containershttpssoftlayergithubioreferencedatatypessoftlayer_container_product_order"><a href="https://softlayer.github.io/reference/datatypes/SoftLayer_Container_Product_Order/">Order containers</a></h3>
<p>The object you send in to the placeOrder method, is going to be a SoftLayer_Container_Product_Order, or possibly one of its child classes, like <a href="https://softlayer.github.io/reference/datatypes/SoftLayer_Container_Product_Order_Hardware_Server/">Hardware_Server</a> or <a href="https://softlayer.github.io/reference/datatypes/SoftLayer_Container_Product_Order_Virtual_Guest/">Virtual_Guest</a></p>
<p>The only data you have to change here is the hostname and domain for your servers, the location, and the quantity.</p>
<blockquote>
<p>If you are ordering baremetal, you need to change container[&lsquo;hardware&rsquo;], if you are ordering virtual guests, you need to change container[&lsquo;virtualGuests&rsquo;]</p>
</blockquote>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">guests</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;hostname&#39;</span><span class="p">:</span> <span class="s1">&#39;quotetest&#39;</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;domain&#39;</span><span class="p">:</span> <span class="s1">&#39;example.com&#39;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="n">quote</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="p">[</span><span class="s1">&#39;Billing_Order_Quote&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="n">quote_container</span> <span class="o">=</span> <span class="n">quote</span><span class="o">.</span><span class="n">getRecalculatedOrderContainer</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">quote_id</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">container</span> <span class="o">=</span> <span class="n">quote_container</span>
</span></span><span class="line"><span class="cl"><span class="n">container</span><span class="p">[</span><span class="s1">&#39;complexType&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&#34;SoftLayer_Container_Product_Order_Virtual_Guest&#34;</span>
</span></span><span class="line"><span class="cl"><span class="n">container</span><span class="p">[</span><span class="s1">&#39;quantity&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span>
</span></span><span class="line"><span class="cl"><span class="n">container</span><span class="p">[</span><span class="s1">&#39;virtualGuests&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span></span><span class="line"><span class="cl"><span class="n">container</span><span class="p">[</span><span class="s1">&#39;virtualGuests&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">guests</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">container</span><span class="p">[</span><span class="s1">&#39;virtualGuests&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">guests</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">container</span><span class="p">[</span><span class="s1">&#39;location&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">dc_id</span>
</span></span></code></pre></div><p>The <code>container['virtualGuests']</code> array should have 1 entry for each server you want to order. Since I am ordering 2 servers, I appeneded 2 entries to the array.</p>
<h3 id="complex-types">Complex Types</h3>
<p><code>getRecalculatedOrderContainer</code> will return a generic Container_Product_Order type, so you will need to specify the correct type to be able to actually place an order. Orders can occasionally work without specifying this complexType, but its better to be sure. There are quite a lot of container types, the full list can be found here: <a href="https://softlayer.github.io/reference/softlayerapi/">https://softlayer.github.io/reference/softlayerapi/</a> , and search for <code>Container_Product_Order</code> to see all the options.</p>
<p>The most common are:</p>
<ul>
<li><a href="https://softlayer.github.io/reference/datatypes/SoftLayer_Container_Product_Order_Hardware_Server">https://softlayer.github.io/reference/datatypes/SoftLayer_Container_Product_Order_Hardware_Server</a></li>
<li><a href="https://softlayer.github.io/reference/datatypes/SoftLayer_Container_Product_Order_Hardware_Server_Gateway_Appliance">https://softlayer.github.io/reference/datatypes/SoftLayer_Container_Product_Order_Hardware_Server_Gateway_Appliance</a></li>
<li><a href="https://softlayer.github.io/reference/datatypes/SoftLayer_Container_Product_Order_Network_LoadBalancer_AsAService">https://softlayer.github.io/reference/datatypes/SoftLayer_Container_Product_Order_Network_LoadBalancer_AsAService</a></li>
<li><a href="https://softlayer.github.io/reference/datatypes/SoftLayer_Container_Product_Order_Network_Storage_AsAService">https://softlayer.github.io/reference/datatypes/SoftLayer_Container_Product_Order_Network_Storage_AsAService</a></li>
<li><a href="https://softlayer.github.io/reference/datatypes/SoftLayer_Container_Product_Order_Network_Vlan">https://softlayer.github.io/reference/datatypes/SoftLayer_Container_Product_Order_Network_Vlan</a></li>
<li><a href="https://softlayer.github.io/reference/datatypes/SoftLayer_Container_Product_Order_Virtual_Guest">https://softlayer.github.io/reference/datatypes/SoftLayer_Container_Product_Order_Virtual_Guest</a></li>
</ul>
<h3 id="ssh-keys">SSH keys</h3>
<p>To have SSH keys installed on a server at order time, we need to specify them in the [sshKeys]https://softlayer.github.io/reference/datatypes/SoftLayer_Container_Product_Order_SshKeys/) property. This property is at the container level, NOT the guest level, even though guests have a sshKey property.
This propety is an array of sshKeys, which itself is an array of ids. This means that there needs to be 1 array of keys per server you are ordering, and the order they are applied should match the order they are listed in the virtualGuests propety. <code>sshKeys[0] =&gt; virtualGuests[0]</code>, <code>sshKeys[1] =&gt; virtualGuests[1]</code> and so on.</p>
<p>An sshKey itself should look like this</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">sshKey = {
</span></span><span class="line"><span class="cl">    &#39;sshKeyIds&#39; : [1234, 456, 11111]
</span></span><span class="line"><span class="cl">}
</span></span><span class="line"><span class="cl">container[&#39;sshKeys&#39;].append(sshKey)
</span></span><span class="line"><span class="cl">container[&#39;sshKeys&#39;].append(sshKey)
</span></span></code></pre></div><p>This is a bit combersome, but it does allow you the flexibility to order different sshKeys on different servers if you need to.</p>
<h3 id="post-provision-scripts">Post Provision Scripts</h3>
<p><a href="https://softlayer.github.io/reference/datatypes/SoftLayer_Container_Product_Order_Virtual_Guest/#provisionScripts">provisionScripts</a> are simply an array of strings (urls) to apply to each server in order. Like sshKeys, the order these provision scripts are listed match up with their virtualGuests. Each guest will only have 1 provision script run on it.</p>
<blockquote>
<p>Post provision scripts need to be HTTPS to be executed, HTTP scripts just get downloaded</p>
</blockquote>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">scriptUrl = &#39;https://somesite.com/script.sh&#39;
</span></span><span class="line"><span class="cl">container[&#39;provisionScripts&#39;] = [scriptUrl, scriptUrl]
</span></span></code></pre></div><h3 id="vlans-and-subnets">Vlans and Subnets</h3>
<p>Vlans and Subnets need to be specified at the guest level, not the container level. You will also need the VLAN/Subnet ID, which is different than the vlan number which can be a bit confusing to new api users.</p>
<p>Public Vlans and Public Subnets need to be added to the <a href="https://softlayer.github.io/reference/datatypes/SoftLayer_Virtual_Guest/#primaryNetworkComponent">primaryNetworkComponent</a>.
Private Vlans and Private Subnets need to be added to the <a href="https://softlayer.github.io/reference/datatypes/SoftLayer_Virtual_Guest/#primaryBackendNetworkComponent">primaryBackendNetworkComponent</a></p>
<p>This example selects a specific VLAN for the primaryNetwork, and a specific Subnet for the primaryBackendNetwork. You can have both a specific vlan and specific network, assuming the subnet is already routed to the vlan you specified.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">guest = {
</span></span><span class="line"><span class="cl">    &#39;hostname&#39;: &#39;tester&#39;,
</span></span><span class="line"><span class="cl">    &#39;domain&#39;: &#39;example.com&#39;,
</span></span><span class="line"><span class="cl">    &#39;primaryNetworkComponent&#39;: {
</span></span><span class="line"><span class="cl">        &#34;networkVlan&#34;: {&#34;id&#34;: int(public_vlan)}},
</span></span><span class="line"><span class="cl">    &#34;primaryBackendNetworkComponent&#34;: {
</span></span><span class="line"><span class="cl">        &#34;primarySubnet&#34;: {&#34;id&#34;: int(private_subnet)}}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">}
</span></span></code></pre></div><h3 id="image-templates">Image Templates</h3>
<p>Instead of specifying a fresh operating system, you can have a server provisioned from a imageTemplate by specifying its ID.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">container[&#39;imageTemplateId&#39;] = image_id
</span></span></code></pre></div><p>This ISN&rsquo;T an array, so the imageTemplate here will get applied to all guests in the order.</p>
<h2 id="the-whole-script">The Whole Script</h2>
<p>This is the script I use when testing out bits of the ordering API, and hopefully it will be helpful in building your own way to order image templates.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">SoftLayer</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span> <span class="k">as</span> <span class="n">pp</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">example</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">client</span> <span class="o">=</span> <span class="n">SoftLayer</span><span class="o">.</span><span class="n">Client</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="n">debugger</span> <span class="o">=</span> <span class="n">SoftLayer</span><span class="o">.</span><span class="n">DebugTransport</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">transport</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">transport</span> <span class="o">=</span> <span class="n">debugger</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">orderQuote</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">quote_id</span><span class="p">,</span> <span class="n">dc_id</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">image_id</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">private_vlan</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">public_vlan</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># If you have more than 1 server in the quote, you will need to append</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># a copy of this for each VSI, with hostnames changed as needed</span>
</span></span><span class="line"><span class="cl">        <span class="n">guests</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;hostname&#39;</span><span class="p">:</span> <span class="s1">&#39;quotetest&#39;</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;domain&#39;</span><span class="p">:</span> <span class="s1">&#39;example.com&#39;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="n">public_vlan</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">guests</span><span class="o">.</span><span class="n">update</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">                <span class="s1">&#39;primaryNetworkComponent&#39;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="s2">&#34;networkVlan&#34;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&#34;id&#34;</span><span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">public_vlan</span><span class="p">)}}})</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="n">private_vlan</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">guests</span><span class="o">.</span><span class="n">update</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">                <span class="s2">&#34;primaryBackendNetworkComponent&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="s2">&#34;networkVlan&#34;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&#34;id&#34;</span><span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">private_vlan</span><span class="p">)}}})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">quote</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="p">[</span><span class="s1">&#39;Billing_Order_Quote&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">        <span class="n">quote_container</span> <span class="o">=</span> <span class="n">quote</span><span class="o">.</span><span class="n">getRecalculatedOrderContainer</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">quote_id</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;================= QUOTE CONTAINER =================&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">pp</span><span class="p">(</span><span class="n">quote_container</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;================= QUOTE CONTAINER =================&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">container</span> <span class="o">=</span> <span class="n">quote_container</span>
</span></span><span class="line"><span class="cl">        <span class="n">container</span><span class="p">[</span><span class="s1">&#39;complexType&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&#34;SoftLayer_Container_Product_Order_Virtual_Guest&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="n">container</span><span class="p">[</span><span class="s1">&#39;quantity&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span>
</span></span><span class="line"><span class="cl">        <span class="n">container</span><span class="p">[</span><span class="s1">&#39;virtualGuests&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span></span><span class="line"><span class="cl">        <span class="n">container</span><span class="p">[</span><span class="s1">&#39;virtualGuests&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">guests</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">container</span><span class="p">[</span><span class="s1">&#39;virtualGuests&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">guests</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1"># container[&#39;provisionScripts&#39;] = [&#39;https://gist.githubusercontent.com/myscript.py&#39;]</span>
</span></span><span class="line"><span class="cl">        <span class="n">sshKeys</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;sshKeyIds&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">395515</span><span class="p">,</span> <span class="mi">87634</span><span class="p">]}</span>
</span></span><span class="line"><span class="cl">        <span class="n">container</span><span class="p">[</span><span class="s1">&#39;sshKeys&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">sshKeys</span><span class="p">,</span> <span class="n">sshKeys</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="n">image_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">container</span><span class="p">[</span><span class="s1">&#39;imageTemplateId&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">image_id</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="n">dc_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">container</span><span class="p">[</span><span class="s1">&#39;location&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">dc_id</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1"># result = self.client[&#39;Billing_Order_Quote&#39;].verifyOrder(container, id=quote_id)</span>
</span></span><span class="line"><span class="cl">        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="p">[</span><span class="s1">&#39;Billing_Order_Quote&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">placeOrder</span><span class="p">(</span><span class="n">container</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="n">quote_id</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;================= RECEIPT CONTAINER =================&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">pp</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;================= RECEIPT CONTAINER =================&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">listQuotes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># https://softlayer.github.io/reference/datatypes/SoftLayer_Billing_Order_Quote/</span>
</span></span><span class="line"><span class="cl">        <span class="n">mask</span> <span class="o">=</span> <span class="s2">&#34;mask[order[id, orderTotalAmount, orderTopLevelItems[id, description]], ordersFromQuoteCount]&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="n">quotes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="p">[</span><span class="s1">&#39;SoftLayer_Account&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">getActiveQuotes</span><span class="p">(</span><span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;ID, createDate, name, status, order count, description&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="n">quote</span> <span class="ow">in</span> <span class="n">quotes</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;</span><span class="si">{}</span><span class="s2">, </span><span class="si">{}</span><span class="s2">, </span><span class="si">{}</span><span class="s2">, </span><span class="si">{}</span><span class="s2">, </span><span class="si">{}</span><span class="s2">, </span><span class="si">{}</span><span class="s2">&#34;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">                <span class="n">quote</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">],</span> <span class="n">quote</span><span class="p">[</span><span class="s1">&#39;createDate&#39;</span><span class="p">],</span> <span class="n">quote</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">],</span> <span class="n">quote</span><span class="p">[</span><span class="s1">&#39;status&#39;</span><span class="p">],</span> 
</span></span><span class="line"><span class="cl">                <span class="n">quote</span><span class="p">[</span><span class="s1">&#39;ordersFromQuoteCount&#39;</span><span class="p">],</span> <span class="n">quote</span><span class="p">[</span><span class="s1">&#39;order&#39;</span><span class="p">][</span><span class="s1">&#39;orderTopLevelItems&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;description&#39;</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">            <span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">listLocations</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">locations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="p">[</span><span class="s1">&#39;SoftLayer_Location&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">getDatacenters</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="n">pp</span><span class="p">(</span><span class="n">locations</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">listLocationsForQuote</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">quoteId</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">mask</span><span class="o">=</span><span class="s2">&#34;mask[id, order[id, orderTopLevelItems[id, package[id, availableLocations[location[longName, id]]]]]]&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="n">locations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="p">[</span><span class="s1">&#39;Billing_Order_Quote&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">getObject</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">quoteId</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">package_id</span> <span class="o">=</span> <span class="n">locations</span><span class="p">[</span><span class="s1">&#39;order&#39;</span><span class="p">][</span><span class="s1">&#39;orderTopLevelItems&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;package&#39;</span><span class="p">][</span><span class="s1">&#39;id&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;Package </span><span class="si">{}</span><span class="s2"> is available in the following locations...&#34;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">package_id</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="n">dc</span> <span class="ow">in</span> <span class="n">locations</span><span class="p">[</span><span class="s1">&#39;order&#39;</span><span class="p">][</span><span class="s1">&#39;orderTopLevelItems&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;package&#39;</span><span class="p">][</span><span class="s1">&#39;availableLocations&#39;</span><span class="p">]:</span>
</span></span><span class="line"><span class="cl">            <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;</span><span class="si">{}</span><span class="s2">, id=</span><span class="si">{}</span><span class="s2">&#34;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">dc</span><span class="p">[</span><span class="s1">&#39;location&#39;</span><span class="p">][</span><span class="s1">&#39;longName&#39;</span><span class="p">],</span> <span class="n">dc</span><span class="p">[</span><span class="s1">&#39;location&#39;</span><span class="p">][</span><span class="s1">&#39;id&#39;</span><span class="p">]))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">listSshKeys</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">keys</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="p">[</span><span class="s1">&#39;SoftLayer_Account&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">getSshKeys</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="n">pp</span><span class="p">(</span><span class="n">keys</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">listImageTemplates</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">mask</span> <span class="o">=</span> <span class="s2">&#34;mask[id,name,note]&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="n">imageTemplates</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="p">[</span><span class="s1">&#39;SoftLayer_Account&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">getPrivateBlockDeviceTemplateGroups</span><span class="p">(</span><span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;ID - Name - Note&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="n">template</span> <span class="ow">in</span> <span class="n">imageTemplates</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="k">try</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;</span><span class="si">%s</span><span class="s2"> - </span><span class="si">%s</span><span class="s2"> - </span><span class="si">%s</span><span class="s2">&#34;</span> <span class="o">%</span> <span class="p">(</span><span class="n">template</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">],</span> <span class="n">template</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">],</span> <span class="n">template</span><span class="p">[</span><span class="s1">&#39;note&#39;</span><span class="p">]))</span>
</span></span><span class="line"><span class="cl">            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;</span><span class="si">%s</span><span class="s2"> - </span><span class="si">%s</span><span class="s2"> - </span><span class="si">%s</span><span class="s2">&#34;</span> <span class="o">%</span> <span class="p">(</span><span class="n">template</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">],</span> <span class="n">template</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">],</span> <span class="s1">&#39;None&#39;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">listVlansInLocation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">location_id</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">mask</span> <span class="o">=</span> <span class="s2">&#34;mask[id,vlanNumber,primaryRouter[hostname,datacenter[id,name]]]&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="n">objfilter2</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">&#34;networkVlans&#34;</span><span class="p">:</span>    
</span></span><span class="line"><span class="cl">                        <span class="p">{</span><span class="s2">&#34;primaryRouter&#34;</span><span class="p">:</span> 
</span></span><span class="line"><span class="cl">                            <span class="p">{</span><span class="s2">&#34;datacenter&#34;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&#34;id&#34;</span> <span class="p">:</span> <span class="p">{</span><span class="s2">&#34;operation&#34;</span><span class="p">:</span><span class="n">location_id</span><span class="p">}</span> <span class="p">}</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">                        <span class="p">}</span>
</span></span><span class="line"><span class="cl">                    <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="n">subnets</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="p">[</span><span class="s1">&#39;SoftLayer_Account&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">getNetworkVlans</span><span class="p">(</span><span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">,</span><span class="nb">filter</span><span class="o">=</span><span class="n">objfilter2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="n">subnet</span> <span class="ow">in</span> <span class="n">subnets</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;</span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">&#34;</span> <span class="o">%</span> <span class="p">(</span> <span class="n">subnet</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">],</span> <span class="n">subnet</span><span class="p">[</span><span class="s1">&#39;vlanNumber&#39;</span><span class="p">],</span> <span class="n">subnet</span><span class="p">[</span><span class="s1">&#39;primaryRouter&#39;</span><span class="p">][</span><span class="s1">&#39;hostname&#39;</span><span class="p">]))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">debug</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="n">call</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">transport</span><span class="o">.</span><span class="n">get_last_calls</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">            <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">transport</span><span class="o">.</span><span class="n">print_reproduceable</span><span class="p">(</span><span class="n">call</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&#34;__main__&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">quote_id</span> <span class="o">=</span> <span class="mi">1528487</span>
</span></span><span class="line"><span class="cl">    <span class="n">main</span> <span class="o">=</span> <span class="n">example</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># main.listImageTemplates()</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># main.listQuotes()</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># main.listLocationsForQuote(quote_id)</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># main.listLocations()</span>
</span></span><span class="line"><span class="cl">    <span class="n">dal13</span> <span class="o">=</span> <span class="mi">1854895</span>
</span></span><span class="line"><span class="cl">    <span class="n">ams03</span> <span class="o">=</span> <span class="mi">814994</span>
</span></span><span class="line"><span class="cl">    <span class="n">dal09</span> <span class="o">=</span> <span class="mi">449494</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># main.listSshKeys()</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># main.listVlansInLocation(dal13)</span>
</span></span><span class="line"><span class="cl">    <span class="n">backend_vlan</span> <span class="o">=</span> <span class="mi">2068355</span> <span class="c1">#951, bcr01a.dal13</span>
</span></span><span class="line"><span class="cl">    <span class="n">front_vlan</span> <span class="o">=</span> <span class="mi">2068353</span> <span class="c1"># 907, fcr01a.dal13</span>
</span></span><span class="line"><span class="cl">    <span class="n">main</span><span class="o">.</span><span class="n">orderQuote</span><span class="p">(</span><span class="n">quote_id</span><span class="p">,</span> <span class="n">dc_id</span><span class="o">=</span><span class="n">dal13</span><span class="p">,</span> <span class="n">public_vlan</span><span class="o">=</span><span class="n">front_vlan</span><span class="p">,</span><span class="n">private_vlan</span><span class="o">=</span><span class="n">backend_vlan</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">main</span><span class="o">.</span><span class="n">debug</span><span class="p">()</span>
</span></span></code></pre></div><h4 id="notes">Notes</h4>
<p>When placing an order from a quote, it is important to note the following.</p>
<ol>
<li>Use the <code>Billing_Order_Quote</code> service, NOT The <code>Product_Order</code> service.</li>
<li>Make sure your container that is sent to placeOrder contains the <a href="https://sldn.softlayer.com/reference/datatypes/SoftLayer_Container_Product_Order/#billingorderitemid"><code>billingOrderItemId </code></a> is set. This will usually be returned from the Billing_Order_Quote::getRecalculatedOrderContainer() API call. But if it is removed, the order you place will not be tracked as being placed from a quote.</li>
</ol>

            </div>
        </div>

    </div>
    <hr>
    <div class="row">
        <div class="row">
            <div class="col-md-6">
    <div class="well well-sm footer" style="word-wrap: break-word;"> 
        <strong>Feedback? <span class="fas fa-comment"/></strong>
            <p>
                If this article contains any error, or leaves any of your questions unanswered, please help us out by 
                opening up a github issue.<br>
                <a class="" href="https://github.com/softlayer/githubio_source/issues/new?title=Feedback%20for%20python%20-%20Advanced%20Quote%20Ordering&body=Feedback+regarding%3A%20https%3a%2f%2fsldn.softlayer.com%2fpython%2forder_quote_advanced%2f"> Open an issue</a>
                <i class="fab fa-github" alt="github"></i>
                <span> - </span>
                <a class="" href="https://github.com/softlayer/githubio_source/edit/master/content/python/order_quote_advanced.md" style="text-align: right;"> Quick Edit</a>
                <i class="fab fa-github" alt="github"></i>

            </p>
    </div>
</div>

        </div>
    </div>
<footer>
    <div class="row">
        <div class="col-sm-12 footer">
            <p>&copy; SoftLayer 2024<br>
            Built with <a href="https://github.com/spf13/hugo">Hugo</a></p>
        </div>
    </div>
</footer>
</div>

    <script src="https://sldn.softlayer.com/js/jquery.js"></script>
    <script src="https://sldn.softlayer.com/js/bootstrap.js"></script>
</body>
</html>
