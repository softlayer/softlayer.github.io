<!doctype html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="SoftLayer API Examples, implementations, and release notes.">
    <meta name="author" content="SoftLayer">

    <title>Add second disk on flavor vsi - https://sldn.softlayer.com/</title>
    <link rel="canonical" href="https://sldn.softlayer.com/python/vsi_flavor_add_second_disk/">
        <link href="https://sldn.softlayer.com/css/main.css" rel="stylesheet">
    <link href="https://sldn.softlayer.com/css/bootstrap.css" rel="stylesheet">
    <link href="https://sldn.softlayer.com/css/custom.css" rel="stylesheet">
    <link href="https://sldn.softlayer.com/css/monokai.css" rel="stylesheet">
    <link href="https://sldn.softlayer.com/css/highlight/solarized_dark.css" rel="stylesheet">

    <script src="https://sldn.softlayer.com/js/highlight.pack.js"></script>

    <script>hljs.initHighlightingOnLoad();</script>
    <link rel="shortcut icon" href="https://sldn.softlayer.com/img/favicon.ico" type="image/x-icon" />
	<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Lato" />
            

    <script src="https://sldn.softlayer.com/js/jquery-3.3.1.min.js"></script> 
    <script src="https://sldn.softlayer.com/js/sldn.js"></script>


    <link href="https://sldn.softlayer.com/fontawesome/css/fontawesome.min.css" rel="stylesheet" type="text/css">
    <link href="https://sldn.softlayer.com/fontawesome/css/brands.min.css" rel="stylesheet" type="text/css">
    <link href="https://sldn.softlayer.com/fontawesome/css/solid.min.css" rel="stylesheet" type="text/css">
    
    <script defer src="https://sldn.softlayer.com/fontawesome/js/solid.min.js"></script>
    <script defer src="https://sldn.softlayer.com/fontawesome/js/brands.min.js"></script>
    <script defer src="https://sldn.softlayer.com/fontawesome/js/fontawesome.min.js"></script>

    <script>
		$(document).ready(function() {
			$('table').addClass("table table-hover table-striped")
		})
	</script>
    
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-88235803-1', 'auto');
	
	ga('send', 'pageview');
}
</script>

</head>

<body>
    <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                    <span class="sr-only">Toggle Navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="https://sldn.softlayer.com/">SoftLayer API</a>
            </div>
            <div class="collapse navbar-collapse navbar-ex1-collapse">
                <ul class="nav navbar-nav">
                    
                        <li><a href="https://sldn.softlayer.com/article/">Articles</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/reference/softlayerapi">Documentation</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/go/">Go</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/java/">Java</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/perl/">Perl</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/php/">PHP</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/python/">Python</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/rest/">Rest</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/ruby/">Ruby</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/tools/">Tools</a></li>
                    

                    
                </ul>
                <div id="custom-search-input" class="pull-right">
                  <form class="navbar-form" role="search" method="get" action="https://www.bing.com/search">
                    <div class="input-group col-md-12">
                      <input type="text" class="form-control input-md" placeholder="Search" name="q" id="srch-term">
                      <input type="hidden" name="q1" value="site:sldn.softlayer.com" />
                      <div class="input-group-btn">
                        <button class="btn btn-info" type="submit">
                          <i class="glyphicon glyphicon-search"></i>
                        </button>
                      </div>
                    </div>
                  </form>
                </div>
            </div>
        </div>
    </nav>

<div class="container">
    <div class="row">
    
        <div class="col-md-3">
            <div style="word-wrap: break-word;"> 
                <h4>August 9, 2018<br></h4>
            </div>
        </div>
        <div class="col-md-9">

                <strong>Classes <span class="fa fa-book"/></strong>
                
                    <a class="label label-primary" href="https://sldn.softlayer.com/reference/services/SoftLayer_Product_Order">SoftLayer_Product_Order</a>
                
                    <a class="label label-primary" href="https://sldn.softlayer.com/reference/services/SoftLayer_Virtual_Guest">SoftLayer_Virtual_Guest</a>
                
                    <a class="label label-primary" href="https://sldn.softlayer.com/reference/services/SoftLayer_Product_Item_Price">SoftLayer_Product_Item_Price</a>
                
                <br>
                <strong>Tags <span class="fa fa-tags"/></strong>
                
                    <a class="label label-danger" href="https://sldn.softlayer.com/tags/upgrade">upgrade</a>
                
                    <a class="label label-danger" href="https://sldn.softlayer.com/tags/virtualguest">virtualguest</a>
                          
        </div>
    </div>
    <hr>
    <div class="row">
		<div class="col-md-12">
            <div class="well well-sm  article" style="word-wrap: break-word;">
                <div class="article-title">
				    <h1>Add second disk on flavor vsi</h1>
                    <small>Upgrade a flavor vsi in order to add a second disk</small>
                </div>
				
                
				
                <p>The example retrieves the packageId and presetId whit which the device was ordered, change the presetId if you wants to add the second disk and upgrade the CPU, RAM, or First Disk.</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python">
<span class="kn">import</span> <span class="nn">SoftLayer</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="k">class</span> <span class="nc">example</span><span class="p">():</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>        
        <span class="bp">self</span><span class="o">.</span><span class="n">client</span> <span class="o">=</span> <span class="n">SoftLayer</span><span class="o">.</span><span class="n">Client</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">orderData</span> <span class="o">=</span> <span class="p">{}</span>
    
    <span class="c1"># Retrieve the packageId and presetId with which the device was ordered</span>
    <span class="c1"># and set them in the orderData</span>
    <span class="k">def</span> <span class="nf">setPackageAndPreset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">guestId</span><span class="p">):</span>
        <span class="n">mask</span> <span class="o">=</span> <span class="s2">&#34;mask[id,orderItem[package,presetId]]&#34;</span>

        <span class="n">item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="p">[</span><span class="s1">&#39;Virtual_Guest&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">getBillingItem</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">guestId</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">orderData</span><span class="p">[</span><span class="s1">&#39;packageId&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;orderItem&#39;</span><span class="p">][</span><span class="s1">&#39;package&#39;</span><span class="p">][</span><span class="s1">&#39;id&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">orderData</span><span class="p">[</span><span class="s1">&#39;presetId&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;orderItem&#39;</span><span class="p">][</span><span class="s1">&#39;presetId&#39;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">addSecondDisk</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">guestId</span><span class="p">,</span> <span class="n">priceId</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">note</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">date</span><span class="o">=</span><span class="s2">&#34;NOW&#34;</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setPackageAndPreset</span><span class="p">(</span><span class="n">guestId</span><span class="p">)</span>
        
        <span class="n">prices</span> <span class="o">=</span> <span class="p">[{</span>
            <span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="n">priceId</span><span class="p">,</span>
            <span class="s1">&#39;categories&#39;</span><span class="p">:</span> <span class="p">[{</span>
                <span class="s1">&#39;categoryCode&#39;</span><span class="p">:</span> <span class="s1">&#39;guest_disk1&#39;</span><span class="p">,</span>    <span class="c1">#second disk</span>
                <span class="s1">&#39;complexType&#39;</span><span class="p">:</span> <span class="s1">&#39;SoftLayer_Product_Item_Category&#39;</span>
            <span class="p">}],</span>
            <span class="s1">&#39;complexType&#39;</span><span class="p">:</span> <span class="s1">&#39;SoftLayer_Product_Item_Price&#39;</span>
        <span class="p">}]</span>

        <span class="c1"># Build a skeleton SoftLayer_Container_Product_Order_Virtual_Guest_Upgrade object</span>
        <span class="c1"># containing the upgrade you wish to place.</span>
        <span class="n">properties</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;NOTE_GENERAL&#39;</span><span class="p">,</span>
                <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="n">note</span>
            <span class="p">},</span>   
            <span class="p">{</span>
                <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;MAINTENANCE_WINDOW&#39;</span><span class="p">,</span>
                <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="n">date</span>
            <span class="p">}</span>
        <span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">orderData</span><span class="p">[</span><span class="s1">&#39;virtualGuests&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="n">guestId</span><span class="p">}]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">orderData</span><span class="p">[</span><span class="s1">&#39;prices&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">prices</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">orderData</span><span class="p">[</span><span class="s1">&#39;properties&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">properties</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">orderData</span><span class="p">[</span><span class="s1">&#39;complexType&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;SoftLayer_Container_Product_Order_Virtual_Guest_Upgrade&#39;</span>
        
        <span class="k">try</span><span class="p">:</span>
            <span class="s2">&#34;&#34;&#34;
</span><span class="s2">            Use verifyOrder method to test that your upgrade is fine and
</span><span class="s2">            when you are ready you can call the placeOrder method.
</span><span class="s2">            &#34;&#34;&#34;</span>
            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="p">[</span><span class="s1">&#39;Product_Order&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">verifyOrder</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">orderData</span><span class="p">)</span>
            <span class="k">print</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">sort_keys</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">separators</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="s1">&#39;: &#39;</span><span class="p">)))</span>
        <span class="k">except</span> <span class="n">SoftLayer</span><span class="o">.</span><span class="n">SoftLayerAPIError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="s2">&#34;&#34;&#34;
</span><span class="s2">            If there was an error returned from the SoftLayer API then bomb out with the
</span><span class="s2">            error message.
</span><span class="s2">            &#34;&#34;&#34;</span>
            <span class="k">print</span><span class="p">(</span><span class="s2">&#34;Unable to upgrade VSI faultCode=</span><span class="si">%s</span><span class="s2">, faultString=</span><span class="si">%s</span><span class="s2">&#34;</span> <span class="o">%</span> <span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">faultCode</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">faultString</span><span class="p">))</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&#34;__main__&#34;</span><span class="p">:</span>    
    <span class="c1"># ID of virtual guest you want to add a second disk</span>
    <span class="n">guestID</span> <span class="o">=</span> <span class="mi">58670025</span>

    <span class="c1"># The price id of disk you want to add as second disk. To get prices</span>
    <span class="c1"># you can call the SoftLayer_Virtual_Guest::getUpgradeItemPrices method</span>
    <span class="n">priceID</span> <span class="o">=</span> <span class="mi">204661</span>   <span class="c1"># 100 GB (LOCAL)</span>

    <span class="n">note</span> <span class="o">=</span> <span class="s2">&#34;adding second disk&#34;</span>
    <span class="n">date</span> <span class="o">=</span> <span class="s2">&#34;NOW&#34;</span>

    <span class="c1"># Start the script</span>
    <span class="n">main</span> <span class="o">=</span> <span class="n">example</span><span class="p">()</span>
    
    <span class="n">main</span><span class="o">.</span><span class="n">addSecondDisk</span><span class="p">(</span><span class="n">guestID</span><span class="p">,</span> <span class="n">priceId</span><span class="o">=</span><span class="n">priceID</span><span class="p">,</span> <span class="n">note</span><span class="o">=</span><span class="n">note</span><span class="p">,</span> <span class="n">date</span><span class="o">=</span><span class="n">date</span><span class="p">)</span>    

</code></pre></div>
            </div>
        </div>

    </div>
    <hr>
    <div class="row">
        <div class="row">
            <div class="col-md-6">
    <div class="well well-sm" style="word-wrap: break-word;"> 
        <strong>Feedback? <span class="fas fa-comment"/></strong>
            <p>
                If this article contains any error, or leaves any of your questions unanswered, please help us out by 
                opening up a github issue.<br>
                <a class="" href="https://github.com/softlayer/githubio_source/issues/new?title=Feedback%20for%20python%20-%20Add%20second%20disk%20on%20flavor%20vsi&body=Feedback+regarding%3A%20https%3a%2f%2fsldn.softlayer.com%2fpython%2fvsi_flavor_add_second_disk%2f"> Open an issue</a>
                <i class="fab fa-github" alt="github"></i>
            </p>
    </div>
</div>
        </div>
    </div>
        <footer>
            <div class="row">
                <hr>
                <div class="col-sm-12">
                    <p>&copy; SoftLayer 2020<br>
                    Built with <a href="https://github.com/spf13/hugo">Hugo</a></p>
                </div>
            </div>
        </footer>
</div>

    <script src="https://sldn.softlayer.com/js/jquery.js"></script>
    <script src="https://sldn.softlayer.com/js/bootstrap.js"></script>
</body>
</html>
