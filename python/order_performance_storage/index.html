<!doctype html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="SoftLayer API Examples, implementations, and release notes.">
    <meta name="author" content="SoftLayer">

    <title>Order a performance storage (block/file) - https://sldn.softlayer.com/</title>
    <link rel="canonical" href="https://sldn.softlayer.com/python/order_performance_storage/">
        <link href="https://sldn.softlayer.com/css/main.css" rel="stylesheet">
    <link href="https://sldn.softlayer.com/css/bootstrap.css" rel="stylesheet">
    <link href="https://sldn.softlayer.com/css/custom.css" rel="stylesheet">
    <link href="https://sldn.softlayer.com/css/monokai.css" rel="stylesheet">
    <link href="https://sldn.softlayer.com/css/highlight/solarized_dark.css" rel="stylesheet">
    

    <script src="https://sldn.softlayer.com/js/highlight.pack.js"></script>

    <script>hljs.initHighlightingOnLoad();</script>
    <link rel="shortcut icon" href="https://sldn.softlayer.com/img/favicon.ico" type="image/x-icon" />
	<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Lato" />
            

    <script src="https://sldn.softlayer.com/js/jquery-3.3.1.min.js"></script> 
    <script src="https://sldn.softlayer.com/js/sldn.js"></script>


    <link href="https://sldn.softlayer.com/fontawesome/css/fontawesome.min.css" rel="stylesheet" type="text/css">
    <link href="https://sldn.softlayer.com/fontawesome/css/brands.min.css" rel="stylesheet" type="text/css">
    <link href="https://sldn.softlayer.com/fontawesome/css/solid.min.css" rel="stylesheet" type="text/css">
    
    <script defer src="https://sldn.softlayer.com/fontawesome/js/solid.min.js"></script>
    <script defer src="https://sldn.softlayer.com/fontawesome/js/brands.min.js"></script>
    <script defer src="https://sldn.softlayer.com/fontawesome/js/fontawesome.min.js"></script>

    <script>
        var head = document.getElementsByTagName('head')[0]
        var style = document.createElement('link')
        style.type = 'text/css'
        style.rel = 'stylesheet'
        style.id = "dark-theme"
        if (localStorage.getItem("dark-mode-theme") == "dark") {
            style.href = '/css/dark.css'
        } else {
            style.href = '/css/light.css'
        }
        head.append(style)
    </script>

    <script>
		$(document).ready(function() {
			$('table').addClass("table table-hover table-striped")
            setThemeMode(localStorage.getItem("dark-mode-theme") || "dark");
		})
	</script>
    
<script async src="https://www.googletagmanager.com/gtag/js?id=G-9XPZ9ZBSJE"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-9XPZ9ZBSJE', { 'anonymize_ip': false });
}
</script>

</head>

<body>
    <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
        <div class="nav-container">
            <div class="navbar-header" style="width: 150px">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                    <span class="sr-only">Toggle Navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="https://sldn.softlayer.com/">SoftLayer API</a>
            </div>

            <div class="navbar-header" style="width: calc(100% - 400px)">
                <ul class="nav navbar-nav" style="width: 100%">
                    
                        <li><a href="https://sldn.softlayer.com/article/">Articles</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/reference/softlayerapi">Documentation</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/go/">Go</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/java/">Java</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/perl/">Perl</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/php/">PHP</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/python/">Python</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/rest/">Rest</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/ruby/">Ruby</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/tools/">Tools</a></li>
                    
                    <li class="nav-item">
                        <a id="dark-toggle" class="dark-mode-toggle" aria-label="dark-mode-toggle" style="color: var(--Red); font-size: 20px">
                            <i class="fas fa-sun"></i>
                        </a>
                    </li>
                </ul>
            </div>

            <div id="custom-search-input" class="pull-right" style="width: 250px">
              <form class="navbar-form" role="search" method="get" action="https://www.bing.com/search">
                <div class="input-group col-md-12">
                  <input type="text" class="form-control input-md" placeholder="Search" name="q" id="srch-term">
                  <input type="hidden" name="q1" value="site:sldn.softlayer.com" />
                  <div class="input-group-btn">
                    <button class="btn btn-info" type="submit">
                      <i class="glyphicon glyphicon-search"></i>
                    </button>
                  </div>
                </div>
              </form>
            </div>

        </div>
    </nav>

<script type="text/javascript">
const darkIconClass = 'fas fa-moon'
const lightIconClass = 'fas fa-sun'
var darkCSS = $("#dark-theme");
var darkToggleIcon = $("#dark-toggle i");




function setThemeMode(mode) {
    localStorage.setItem("dark-mode-theme", mode);
    if (mode === "dark") {
        darkToggleIcon.attr('class', darkIconClass)
    } else  {
        darkToggleIcon.attr('class', lightIconClass)
    }
}


$("#dark-toggle").click(function () {
  if (darkToggleIcon.attr("class") == lightIconClass) {
    setThemeMode("dark")
  } else if (darkToggleIcon.attr("class") == darkIconClass) {
    setThemeMode("light")
  }
  location.reload();
});
</script>
<div class="container">
    <div class="row">
    
        <div class="col-md-3">
            <div style="word-wrap: break-word;"> 
                <h4>November 22, 2018<br></h4>
            </div>
        </div>
        <div class="col-md-9">

                <strong>Classes <span class="fa fa-book"/></strong>
                
                    <a class="label label-primary" href="https://sldn.softlayer.com/reference/services/SoftLayer_Product_Order">SoftLayer_Product_Order</a>
                
                    <a class="label label-primary" href="https://sldn.softlayer.com/reference/services/SoftLayer_Container_Product_Order_Network_PerformanceStorage_Iscsi">SoftLayer_Container_Product_Order_Network_PerformanceStorage_Iscsi</a>
                
                    <a class="label label-primary" href="https://sldn.softlayer.com/reference/services/SoftLayer_Container_Product_Order_Network_PerformanceStorage_Nfs">SoftLayer_Container_Product_Order_Network_PerformanceStorage_Nfs</a>
                
                <br>
                <strong>Tags <span class="fa fa-tags"/></strong>
                
                    <a class="label label-danger" href="https://sldn.softlayer.com/tags/order">order</a>
                
                    <a class="label label-danger" href="https://sldn.softlayer.com/tags/storage">storage</a>
                
                    <a class="label label-danger" href="https://sldn.softlayer.com/tags/performance">performance</a>
                          
        </div>
    </div>
    <hr>
    <div class="row">
		<div class="col-md-12">
            <div class="well well-sm  article" style="word-wrap: break-word;">
                <div class="article-title">
				    <h1>Order a performance storage (block/file)</h1>
                    <small>Shows how to order performance storage devices</small>
                </div>
				
                
				
                <h3 id="important-note-there-is-a-new-version-of-storage-devices-staas-v2-so-it-is-recomended-to-review-order-blockfile-storages-with-managersorder_block_file_storage_with_managers"><strong>Important Note:</strong> There is a new version of storage devices (STaaS v2) so it is recomended to review <a href="../order_block_file_storage_with_managers">Order Block/File storages with Managers</a></h3>
<p>Performance Block/File storage devices are under package 222 and they are differentiated by the <code>complexType</code> in the order template, being <code>SoftLayer_Container_Product_Order_Network_PerformanceStorage_Iscsi</code> for Block and <code>SoftLayer_Container_Product_Order_Network_PerformanceStorage_Nfs</code> for File storages.</p>
<p>These storage devices do not support snapshots, there is not any category name called <code>storage_snapshot_space</code> or similar in the package configuration, you can execute the following code to verify this last.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">SoftLayer</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">client</span> <span class="o">=</span> <span class="n">SoftLayer</span><span class="o">.</span><span class="n">Client</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="n">packageService</span> <span class="o">=</span> <span class="n">client</span><span class="p">[</span><span class="s1">&#39;SoftLayer_Product_Package&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">result</span> <span class="o">=</span> <span class="n">packageService</span><span class="o">.</span><span class="n">getConfiguration</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="mi">222</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="s2">&#34;itemCategory&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">pprint</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</span></span></code></pre></div><br />
<p><strong>Tips before ordering</strong></p>
<p>In most of the cases the order verification fails whether the selected price cannot be ordered in the selected location or it does not meet the capacity restriction of the storage space.</p>
<p>Following REST call retrieves all prices under package 240 and shows on which locations are available, if <code>locationGroupId</code> is null means the price is standard and can be used on any location.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl">https://api.softlayer.com/rest/v3.1/SoftLayer_Product_Package/222/getItemPrices?objectMask=mask[id,capacityRestrictionMaximum,capacityRestrictionMinimum,capacityRestrictionType,locationGroupId,item[capacity,description],categories,pricingLocationGroup[locations]]
</span></span></code></pre></div><p>About capacity restrictions, the <code>performance_storage_iops</code> items have capacity restrictions (min/max) which should match with the <code>capacity</code> value of the selected <code>performance_storage_space</code> item, it means if you want an storage space of &ldquo;40 GB Storage Space&rdquo; and &ldquo;600 IOPS&rdquo;:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;id&#34;</span><span class="p">:</span> <span class="mi">40692</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;locationGroupId&#34;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;categories&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&#34;categoryCode&#34;</span><span class="p">:</span> <span class="s2">&#34;performance_storage_space&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&#34;id&#34;</span><span class="p">:</span> <span class="mi">382</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;Storage Space&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&#34;quantityLimit&#34;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&#34;sortOrder&#34;</span><span class="p">:</span> <span class="kc">null</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">],</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;item&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;capacity&#34;</span><span class="p">:</span> <span class="s2">&#34;40&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;description&#34;</span><span class="p">:</span> <span class="s2">&#34;40 GB Storage Space&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span></code></pre></div><p>Then price of <code>performance_storage_iops</code> should be:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;id&#34;</span><span class="p">:</span> <span class="mi">40942</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;locationGroupId&#34;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;capacityRestrictionMaximum&#34;</span><span class="p">:</span> <span class="s2">&#34;40&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;capacityRestrictionMinimum&#34;</span><span class="p">:</span> <span class="s2">&#34;40&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;capacityRestrictionType&#34;</span><span class="p">:</span> <span class="s2">&#34;STORAGE_SPACE&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;categories&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&#34;categoryCode&#34;</span><span class="p">:</span> <span class="s2">&#34;performance_storage_iops&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&#34;id&#34;</span><span class="p">:</span> <span class="mi">384</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;Performance Storage IOPS&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&#34;quantityLimit&#34;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&#34;sortOrder&#34;</span><span class="p">:</span> <span class="kc">null</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">],</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;item&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;capacity&#34;</span><span class="p">:</span> <span class="s2">&#34;600&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;description&#34;</span><span class="p">:</span> <span class="s2">&#34;600 IOPS&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span></code></pre></div><h2 id="block-performance-storage"><strong>Block Performance Storage</strong></h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">SoftLayer</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">orderTemplate</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;complexType&#34;</span><span class="p">:</span> <span class="s2">&#34;SoftLayer_Container_Product_Order_Network_PerformanceStorage_Iscsi&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;location&#34;</span><span class="p">:</span> <span class="s2">&#34;DALLAS05&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;quantity&#34;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;packageId&#34;</span><span class="p">:</span> <span class="mi">222</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># To see the list of prices available for the package</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># use the SoftLayer_Product_Package::getItems method with masks</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># or SoftLayer_Product_Package::getItemPrices</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;prices&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span><span class="s2">&#34;id&#34;</span><span class="p">:</span> <span class="mi">40672</span><span class="p">},</span>      <span class="c1"># BlockStorage(Performance) keyName: performance_storage_iscsi</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span><span class="s2">&#34;id&#34;</span><span class="p">:</span> <span class="mi">40692</span><span class="p">},</span>      <span class="c1"># 40GB Storage Space        keyName: performance_storage_space</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span><span class="s2">&#34;id&#34;</span><span class="p">:</span> <span class="mi">40942</span><span class="p">}</span>       <span class="c1"># 600 IOPS                  keyName: performance_storage_iops</span>
</span></span><span class="line"><span class="cl">    <span class="p">],</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;osFormatType&#34;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&#34;keyName&#34;</span><span class="p">:</span> <span class="s2">&#34;LINUX&#34;</span><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Declares the API client to use the SoftLayer_Product_Order API service</span>
</span></span><span class="line"><span class="cl"><span class="n">client</span> <span class="o">=</span> <span class="n">SoftLayer</span><span class="o">.</span><span class="n">Client</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="n">productOrderService</span> <span class="o">=</span> <span class="n">client</span><span class="p">[</span><span class="s1">&#39;SoftLayer_Product_Order&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">try</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># Use placeOrder method when you ready to order</span>
</span></span><span class="line"><span class="cl">    <span class="n">result</span> <span class="o">=</span> <span class="n">productOrderService</span><span class="o">.</span><span class="n">verifyOrder</span><span class="p">(</span><span class="n">orderTemplate</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">pprint</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="k">except</span> <span class="n">SoftLayer</span><span class="o">.</span><span class="n">SoftLayerAPIError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;Unable to place the order. </span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">&#34;</span> <span class="o">%</span> <span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">faultCode</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">faultString</span><span class="p">))</span>
</span></span></code></pre></div><h2 id="file-performance-storage"><strong>File Performance Storage</strong></h2>
<p>Since the prices are the same, basically it is only to required change the price of <code>performance_storage_iscsi</code> by <code>performance_storage_nfs</code>, and remove the property <code>osFormatType</code></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">SoftLayer</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">orderTemplate</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;complexType&#39;</span><span class="p">:</span> <span class="s1">&#39;SoftLayer_Container_Product_Order_Network_PerformanceStorage_Nfs&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;quantity&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;packageId&#39;</span><span class="p">:</span> <span class="mi">222</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;location&#39;</span><span class="p">:</span> <span class="s1">&#39;DALLAS09&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># To see the list of prices available for the package</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># use the SoftLayer_Product_Package::getItems method with masks</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># or SoftLayer_Product_Package::getItemPrices</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;prices&#39;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="mi">40662</span><span class="p">},</span>  <span class="c1"># File Storage (Performance)    keyName: performance_storage_nfs</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="mi">40692</span><span class="p">},</span>  <span class="c1"># 40GB Storage Space            keyName: performance_storage_space</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="mi">40942</span><span class="p">}</span>   <span class="c1"># 600 IOPS                      keyName: performance_storage_iops</span>
</span></span><span class="line"><span class="cl">    <span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Declares the API client</span>
</span></span><span class="line"><span class="cl"><span class="n">client</span> <span class="o">=</span> <span class="n">SoftLayer</span><span class="o">.</span><span class="n">Client</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">try</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># Use placeOrder method when you ready to order</span>
</span></span><span class="line"><span class="cl">    <span class="n">result</span> <span class="o">=</span> <span class="n">client</span><span class="p">[</span><span class="s1">&#39;SoftLayer_Product_Order&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">verifyOrder</span><span class="p">(</span><span class="n">orderTemplate</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">pprint</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="k">except</span> <span class="n">SoftLayer</span><span class="o">.</span><span class="n">SoftLayerAPIError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;Unable to place the order. </span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">&#34;</span> <span class="o">%</span> <span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">faultCode</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">faultString</span><span class="p">))</span>
</span></span></code></pre></div><h2 id="complex-example"><strong>Complex example</strong></h2>
<p>Following is a more complex example which order a block storage by setting only the parameters of location, size, iops, and os.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">SoftLayer</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">json</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Values &#34;AMS01&#34;, &#34;AMS03&#34;, &#34;CHE01&#34;, &#34;DAL05&#34;, &#34;DAL06&#34; &#34;FRA02&#34;, &#34;HKG02&#34;, &#34;LON02&#34;, etc.</span>
</span></span><span class="line"><span class="cl"><span class="n">location</span> <span class="o">=</span> <span class="s2">&#34;AMS01&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Values &#34;20&#34;, &#34;40&#34;, &#34;80&#34;, &#34;100&#34;, etc.</span>
</span></span><span class="line"><span class="cl"><span class="n">storageSize</span> <span class="o">=</span> <span class="s2">&#34;40&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Values between &#34;100&#34; and &#34;6000&#34; by intervals of 100.</span>
</span></span><span class="line"><span class="cl"><span class="n">iops</span> <span class="o">=</span> <span class="s2">&#34;100&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Values &#34;Hyper-V&#34;, &#34;Linux&#34;, &#34;VMWare&#34;, &#34;Windows 2008+&#34;, &#34;Windows GPT&#34;, &#34;Windows 2003&#34;, &#34;Xen&#34;</span>
</span></span><span class="line"><span class="cl"><span class="n">os</span> <span class="o">=</span> <span class="s2">&#34;Linux&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">PACKAGE_ID</span> <span class="o">=</span> <span class="mi">222</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">client</span> <span class="o">=</span> <span class="n">SoftLayer</span><span class="o">.</span><span class="n">Client</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="n">productOrderService</span> <span class="o">=</span> <span class="n">client</span><span class="p">[</span><span class="s1">&#39;SoftLayer_Product_Order&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="n">packageService</span> <span class="o">=</span> <span class="n">client</span><span class="p">[</span><span class="s1">&#39;SoftLayer_Product_Package&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="n">locationService</span> <span class="o">=</span> <span class="n">client</span><span class="p">[</span><span class="s1">&#39;SoftLayer_Location&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="n">osService</span> <span class="o">=</span> <span class="n">client</span><span class="p">[</span><span class="s1">&#39;SoftLayer_Network_Storage_Iscsi_OS_Type&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">objectFilterDatacenter</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&#34;name&#34;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&#34;operation&#34;</span><span class="p">:</span> <span class="n">location</span><span class="o">.</span><span class="n">lower</span><span class="p">()}}</span>
</span></span><span class="line"><span class="cl"><span class="n">objectFilterStorageNfs</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&#34;items&#34;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&#34;categories&#34;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&#34;categoryCode&#34;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&#34;operation&#34;</span><span class="p">:</span> <span class="s2">&#34;performance_storage_iscsi&#34;</span><span class="p">}}}}</span>
</span></span><span class="line"><span class="cl"><span class="n">objectFilterOsType</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&#34;name&#34;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&#34;operation&#34;</span><span class="p">:</span> <span class="n">os</span><span class="p">}}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">try</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># Getting the datacenter.</span>
</span></span><span class="line"><span class="cl">    <span class="n">datacenter</span> <span class="o">=</span> <span class="n">locationService</span><span class="o">.</span><span class="n">getDatacenters</span><span class="p">(</span><span class="nb">filter</span><span class="o">=</span><span class="n">objectFilterDatacenter</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># Getting the performance storage NFS prices.</span>
</span></span><span class="line"><span class="cl">    <span class="n">itemsStorageNfs</span> <span class="o">=</span> <span class="n">packageService</span><span class="o">.</span><span class="n">getItems</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">PACKAGE_ID</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="n">objectFilterStorageNfs</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># Getting the storage space prices</span>
</span></span><span class="line"><span class="cl">    <span class="n">objectFilter</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;itemPrices&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;item&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="s2">&#34;capacity&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="s2">&#34;operation&#34;</span><span class="p">:</span> <span class="n">storageSize</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;categories&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="s2">&#34;categoryCode&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="s2">&#34;operation&#34;</span><span class="p">:</span> <span class="s2">&#34;performance_storage_space&#34;</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;locationGroupId&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="s2">&#34;operation&#34;</span><span class="p">:</span> <span class="s2">&#34;is null&#34;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="n">pricesStorageSpace</span> <span class="o">=</span> <span class="n">packageService</span><span class="o">.</span><span class="n">getItemPrices</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">PACKAGE_ID</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="n">objectFilter</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># If the prices list is empty that means that the storage space value is invalid.</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">pricesStorageSpace</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;The storage space value: &#39;</span> <span class="o">+</span> <span class="n">storageSize</span> <span class="o">+</span> <span class="s1">&#39; GB, is not valid.&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># Getting the IOPS prices</span>
</span></span><span class="line"><span class="cl">    <span class="n">objectFilter</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;itemPrices&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;item&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="s2">&#34;capacity&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="s2">&#34;operation&#34;</span><span class="p">:</span> <span class="n">iops</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;attributes&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="s2">&#34;value&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="s2">&#34;operation&#34;</span><span class="p">:</span> <span class="n">storageSize</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;categories&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="s2">&#34;categoryCode&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="s2">&#34;operation&#34;</span><span class="p">:</span> <span class="s2">&#34;performance_storage_iops&#34;</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;locationGroupId&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="s2">&#34;operation&#34;</span><span class="p">:</span> <span class="s2">&#34;is null&#34;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="n">pricesIops</span> <span class="o">=</span> <span class="n">packageService</span><span class="o">.</span><span class="n">getItemPrices</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">PACKAGE_ID</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="n">objectFilter</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># If the prices list is empty that means that the IOPS value is invalid for the configured storage space.</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">pricesIops</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;The IOPS value: &#39;</span> <span class="o">+</span> <span class="n">iops</span> <span class="o">+</span> <span class="s1">&#39;, is not valid for the storage space: &#39;</span> <span class="o">+</span> <span class="n">storageSize</span> <span class="o">+</span> <span class="s1">&#39; GB.&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># Getting the OS.</span>
</span></span><span class="line"><span class="cl">    <span class="n">os</span> <span class="o">=</span> <span class="n">osService</span><span class="o">.</span><span class="n">getAllObjects</span><span class="p">(</span><span class="nb">filter</span><span class="o">=</span><span class="n">objectFilterOsType</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># Building the order template.</span>
</span></span><span class="line"><span class="cl">    <span class="n">orderData</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;complexType&#34;</span><span class="p">:</span> <span class="s2">&#34;SoftLayer_Container_Product_Order_Network_PerformanceStorage_Iscsi&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;packageId&#34;</span><span class="p">:</span> <span class="n">PACKAGE_ID</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;location&#34;</span><span class="p">:</span> <span class="n">datacenter</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;id&#39;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;quantity&#34;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;prices&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="s2">&#34;id&#34;</span><span class="p">:</span> <span class="n">itemsStorageNfs</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;prices&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;id&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="s2">&#34;id&#34;</span><span class="p">:</span> <span class="n">pricesStorageSpace</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;id&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="s2">&#34;id&#34;</span><span class="p">:</span> <span class="n">pricesIops</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;id&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">],</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;osFormatType&#34;</span><span class="p">:</span> <span class="n">os</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># verifyOrder() will check your order for errors. Replace this with a call to</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># placeOrder() when you&#39;re ready to order. Both calls return a receipt object</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># that you can use for your records.</span>
</span></span><span class="line"><span class="cl">    <span class="n">response</span> <span class="o">=</span> <span class="n">productOrderService</span><span class="o">.</span><span class="n">verifyOrder</span><span class="p">(</span><span class="n">orderData</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">sort_keys</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">separators</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="s1">&#39;: &#39;</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl"><span class="k">except</span> <span class="n">SoftLayer</span><span class="o">.</span><span class="n">SoftLayerAPIError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;Unable to place the order. faultCode=</span><span class="si">%s</span><span class="s2">, faultString=</span><span class="si">%s</span><span class="s2">&#34;</span> <span class="o">%</span> <span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">faultCode</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">faultString</span><span class="p">))</span>
</span></span></code></pre></div>
            </div>
        </div>

    </div>
    <hr>
    <div class="row">
        <div class="row">
            <div class="col-md-6">
    <div class="well well-sm footer" style="word-wrap: break-word;"> 
        <strong>Feedback? <span class="fas fa-comment"/></strong>
            <p>
                If this article contains any error, or leaves any of your questions unanswered, please help us out by 
                opening up a github issue.<br>
                <a class="" href="https://github.com/softlayer/githubio_source/issues/new?title=Feedback%20for%20python%20-%20Order%20a%20performance%20storage%20%28block%2ffile%29&body=Feedback+regarding%3A%20https%3a%2f%2fsldn.softlayer.com%2fpython%2forder_performance_storage%2f"> Open an issue</a>
                <i class="fab fa-github" alt="github"></i>
                <span> - </span>
                <a class="" href="https://github.com/softlayer/githubio_source/edit/master/content/python/python/order_performance_storage.md.md" style="text-align: right;"> Quick Edit</a>
                <i class="fab fa-github" alt="github"></i>

            </p>
    </div>
</div>

        </div>
    </div>
<footer>
    <div class="row">
        <div class="col-sm-12 footer">
            <p>&copy; SoftLayer 2024<br>
            Built with <a href="https://github.com/spf13/hugo">Hugo</a></p>
        </div>
    </div>
</footer>
</div>

    <script src="https://sldn.softlayer.com/js/jquery.js"></script>
    <script src="https://sldn.softlayer.com/js/bootstrap.js"></script>
</body>
</html>
