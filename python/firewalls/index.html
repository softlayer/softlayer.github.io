<!doctype html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="SoftLayer API Examples, implementations, and release notes.">
    <meta name="author" content="SoftLayer">

    <title>Working with Firewalls - https://sldn.softlayer.com/</title>
    <link rel="canonical" href="https://sldn.softlayer.com/python/firewalls/">
        <link href="https://sldn.softlayer.com/css/main.css" rel="stylesheet">
    <link href="https://sldn.softlayer.com/css/bootstrap.css" rel="stylesheet">
    <link href="https://sldn.softlayer.com/css/custom.css" rel="stylesheet">
    <link href="https://sldn.softlayer.com/css/monokai.css" rel="stylesheet">
    <link href="https://sldn.softlayer.com/css/highlight/solarized_dark.css" rel="stylesheet">
    

    <script src="https://sldn.softlayer.com/js/highlight.pack.js"></script>

    <script>hljs.initHighlightingOnLoad();</script>
    <link rel="shortcut icon" href="https://sldn.softlayer.com/img/favicon.ico" type="image/x-icon" />
	<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Lato" />
            

    <script src="https://sldn.softlayer.com/js/jquery-3.3.1.min.js"></script> 
    <script src="https://sldn.softlayer.com/js/sldn.js"></script>


    <link href="https://sldn.softlayer.com/fontawesome/css/fontawesome.min.css" rel="stylesheet" type="text/css">
    <link href="https://sldn.softlayer.com/fontawesome/css/brands.min.css" rel="stylesheet" type="text/css">
    <link href="https://sldn.softlayer.com/fontawesome/css/solid.min.css" rel="stylesheet" type="text/css">
    
    <script defer src="https://sldn.softlayer.com/fontawesome/js/solid.min.js"></script>
    <script defer src="https://sldn.softlayer.com/fontawesome/js/brands.min.js"></script>
    <script defer src="https://sldn.softlayer.com/fontawesome/js/fontawesome.min.js"></script>

    <script>
        var head = document.getElementsByTagName('head')[0]
        var style = document.createElement('link')
        style.type = 'text/css'
        style.rel = 'stylesheet'
        style.id = "dark-theme"
        if (localStorage.getItem("dark-mode-theme") == "dark") {
            style.href = '/css/dark.css'
        } else {
            style.href = '/css/light.css'
        }
        head.append(style)
    </script>

    <script>
		$(document).ready(function() {
			$('table').addClass("table table-hover table-striped")
            setThemeMode(localStorage.getItem("dark-mode-theme") || "dark");
		})
	</script>
    
<script async src="https://www.googletagmanager.com/gtag/js?id=G-9XPZ9ZBSJE"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-9XPZ9ZBSJE', { 'anonymize_ip': false });
}
</script>

</head>

<body>
    <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
        <div class="nav-container">
            <div class="navbar-header" style="width: 150px">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                    <span class="sr-only">Toggle Navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="https://sldn.softlayer.com/">SoftLayer API</a>
            </div>

            <div class="navbar-header" style="width: calc(100% - 350px)">
                <ul class="nav navbar-nav" style="width: 100%">
                    
                        <li><a href="https://sldn.softlayer.com/article/">Articles</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/reference/softlayerapi">Docs</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/go/">Go</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/java/">Java</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/php/">PHP</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/python/">Python</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/rest/">Rest</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/ruby/">Ruby</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/tools/">Tools</a></li>
                    
                    <li class="nav-item">
                        <a id="dark-toggle" class="dark-mode-toggle" aria-label="dark-mode-toggle" style="color: var(--Red); font-size: 20px">
                            <i class="fas fa-sun"></i>
                        </a>
                    </li>
                </ul>
            </div>

            <div id="custom-search-input" class="pull-right" style="width: 200px">
              <form class="navbar-form" role="search" method="get" action="https://www.bing.com/search">
                <div class="input-group col-md-12">
                  <input type="text" class="form-control input-md" placeholder="Search" name="q" id="srch-term">
                  <input type="hidden" name="q1" value="site:sldn.softlayer.com" />
                  <div class="input-group-btn">
                    <button class="btn btn-info" type="submit">
                      <i class="glyphicon glyphicon-search"></i>
                    </button>
                  </div>
                </div>
              </form>
            </div>

        </div>
    </nav>

<script type="text/javascript">
const darkIconClass = 'fas fa-moon'
const lightIconClass = 'fas fa-sun'
var darkCSS = $("#dark-theme");
var darkToggleIcon = $("#dark-toggle i");




function setThemeMode(mode) {
    localStorage.setItem("dark-mode-theme", mode);
    if (mode === "dark") {
        darkToggleIcon.attr('class', darkIconClass)
    } else  {
        darkToggleIcon.attr('class', lightIconClass)
    }
}


$("#dark-toggle").click(function () {
  if (darkToggleIcon.attr("class") == lightIconClass) {
    setThemeMode("dark")
  } else if (darkToggleIcon.attr("class") == darkIconClass) {
    setThemeMode("light")
  }
  location.reload();
});
</script>
<div class="container">
    <div class="row">
    
        <div class="col-md-3">
            <div style="word-wrap: break-word;"> 
                <h4>January 5, 2022<br></h4>
            </div>
        </div>
        <div class="col-md-9">

                <strong>Classes <span class="fa fa-book"/></strong>
                
                    <a class="label label-primary" href="https://sldn.softlayer.com/reference/services/SoftLayer_Account">SoftLayer_Account</a>
                
                    <a class="label label-primary" href="https://sldn.softlayer.com/reference/services/SoftLayer_Virtual_Guest">SoftLayer_Virtual_Guest</a>
                
                    <a class="label label-primary" href="https://sldn.softlayer.com/reference/services/SoftLayer_Network_Vlan">SoftLayer_Network_Vlan</a>
                
                    <a class="label label-primary" href="https://sldn.softlayer.com/reference/services/SoftLayer_Network_Vlan_Firewall">SoftLayer_Network_Vlan_Firewall</a>
                
                    <a class="label label-primary" href="https://sldn.softlayer.com/reference/services/SoftLayer_Network_Component_Firewall">SoftLayer_Network_Component_Firewall</a>
                
                    <a class="label label-primary" href="https://sldn.softlayer.com/reference/services/SoftLayer_Network_Firewall_Update_Request">SoftLayer_Network_Firewall_Update_Request</a>
                
                    <a class="label label-primary" href="https://sldn.softlayer.com/reference/services/SoftLayer_Network_Subnet_IpAddress">SoftLayer_Network_Subnet_IpAddress</a>
                
                    <a class="label label-primary" href="https://sldn.softlayer.com/reference/services/SoftLayer_Network_Firewall_Update_Request_Rule">SoftLayer_Network_Firewall_Update_Request_Rule</a>
                
                <br>
                <strong>Tags <span class="fa fa-tags"/></strong>
                
                    <a class="label label-danger" href="https://sldn.softlayer.com/tags/firewalls">firewalls</a>
                          
        </div>
    </div>
    <hr>
    <div class="row">
		<div class="col-md-12">
            <div class="well well-sm  article" style="word-wrap: break-word;">
                <div class="article-title">
				    <h1>Working with Firewalls</h1>
                    <small>A few examples on interacting with Firewalls</small>
                </div>
				
                
				
                <h3 id="setup">Setup</h3>
<p>All the functions defined in this article will be part of this <code>FirewallExample</code> class. Which only sets up the SoftLayer Client, and configures the debugger, which allows you to see the exact API calls being made.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">SoftLayer</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">SoftLayer.CLI</span> <span class="kn">import</span> <span class="n">environment</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">SoftLayer.CLI</span> <span class="kn">import</span> <span class="n">formatting</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">json</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">FirewallExample</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">client</span> <span class="o">=</span> <span class="n">SoftLayer</span><span class="o">.</span><span class="n">create_client_from_env</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="n">debugger</span> <span class="o">=</span> <span class="n">SoftLayer</span><span class="o">.</span><span class="n">DebugTransport</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">transport</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">transport</span> <span class="o">=</span> <span class="n">debugger</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">env</span> <span class="o">=</span> <span class="n">environment</span><span class="o">.</span><span class="n">Environment</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">debug</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="n">call</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">transport</span><span class="o">.</span><span class="n">get_last_calls</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">            <span class="n">pprint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">transport</span><span class="o">.</span><span class="n">print_reproduceable</span><span class="p">(</span><span class="n">call</span><span class="p">))</span>
</span></span></code></pre></div><h2 id="get-a-firewall-for-a-vsi">Get a Firewall for a Vsi</h2>
<p>To get the firewall associated to a VSI.</p>
<h3 id="python">Python</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">get_firewall_for_a_vsi</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">primary_ip_address</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">vsi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s1">&#39;SoftLayer_Virtual_Guest&#39;</span><span class="p">,</span> <span class="s1">&#39;findByIpAddress&#39;</span><span class="p">,</span> <span class="n">primary_ip_address</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">firewall</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s1">&#39;SoftLayer_Virtual_Guest&#39;</span><span class="p">,</span> <span class="s1">&#39;getFirewallServiceComponent&#39;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="n">vsi</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">fout</span><span class="p">(</span><span class="n">formatting</span><span class="o">.</span><span class="n">iter_to_table</span><span class="p">(</span><span class="n">firewall</span><span class="p">))</span>
</span></span></code></pre></div><h2 id="backup-and-restore-firewall-rules">Backup and Restore Firewall Rules</h2>
<p>A quick example on how to backup firewall rules to a file and restore those rules so for this section needs the firewall id and obtains in this function <code>get_firewall_for_a_vsi()</code>.</p>
<p>RestoreRules here will clobber any existing rules on the firewall, so be careful with that.</p>
<h3 id="python-1">Python</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">backup_firewall_rules</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">id_firewall</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">rules</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s1">&#39;SoftLayer_Network_Component_Firewall&#39;</span><span class="p">,</span> <span class="s1">&#39;getRules&#39;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="n">id_firewall</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">rules</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;Done saving rules to </span><span class="si">%s</span><span class="s2">&#34;</span> <span class="o">%</span> <span class="n">path</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">restore_firewall_rules</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">id_firewall</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">rules</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="n">rule</span> <span class="ow">in</span> <span class="n">rules</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="c1"># It is always necessary to delete this key to perform the firewall update request</span>
</span></span><span class="line"><span class="cl">            <span class="k">del</span> <span class="n">rule</span><span class="p">[</span><span class="s1">&#39;status&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">rules_template</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;networkComponentFirewallId&#39;</span><span class="p">:</span> <span class="n">id_firewall</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;rules&#39;</span><span class="p">:</span> <span class="n">rules</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s1">&#39;SoftLayer_Network_Firewall_Update_Request&#39;</span><span class="p">,</span> <span class="s1">&#39;createObject&#39;</span><span class="p">,</span> <span class="n">rules_template</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">fout</span><span class="p">(</span><span class="n">formatting</span><span class="o">.</span><span class="n">iter_to_table</span><span class="p">(</span><span class="n">result</span><span class="p">))</span>
</span></span></code></pre></div><h2 id="remove-firewall-rule-from-vsi">Remove Firewall Rule from Vsi</h2>
<p>Remove firewall rule from a VSI. For remove any rule, it&rsquo;s necessary obtain the id of the rule, this it&rsquo;s possible with the follow function <code>get_firewall_rules</code>.</p>
<h3 id="python-2">Python</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">get_firewall_rules</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">id_firewall</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">rules</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s1">&#39;SoftLayer_Network_Component_Firewall&#39;</span><span class="p">,</span> <span class="s1">&#39;getRules&#39;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="n">id_firewall</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">fout</span><span class="p">(</span><span class="n">formatting</span><span class="o">.</span><span class="n">iter_to_table</span><span class="p">(</span><span class="n">rules</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">remove_firewall_rule_from_vsi</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">id_firewall</span><span class="p">,</span> <span class="n">id_rule</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">rules</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s1">&#39;SoftLayer_Network_Component_Firewall&#39;</span><span class="p">,</span> <span class="s1">&#39;getRules&#39;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="n">id_firewall</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="n">rule</span> <span class="ow">in</span> <span class="n">rules</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="c1"># It is always necessary to delete this key to perform the firewall update request</span>
</span></span><span class="line"><span class="cl">            <span class="k">del</span> <span class="n">rule</span><span class="p">[</span><span class="s1">&#39;status&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="n">rule</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">id_rule</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="c1"># This rule will be deleted</span>
</span></span><span class="line"><span class="cl">                <span class="n">rules</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">rule</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">rules_template</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;networkComponentFirewallId&#39;</span><span class="p">:</span> <span class="n">id_firewall</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;rules&#39;</span><span class="p">:</span> <span class="n">rules</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="n">new_rules</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s1">&#39;SoftLayer_Network_Firewall_Update_Request&#39;</span><span class="p">,</span> <span class="s1">&#39;createObject&#39;</span><span class="p">,</span> <span class="n">rules_template</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">fout</span><span class="p">(</span><span class="n">formatting</span><span class="o">.</span><span class="n">iter_to_table</span><span class="p">(</span><span class="n">new_rules</span><span class="p">))</span>
</span></span></code></pre></div><h2 id="process-rules-for-a-firewall-in-a-bypass">Process Rules for a Firewall in a Bypass</h2>
<p>Process rules for a firewall in a VSI.</p>
<h3 id="python-3">Python</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">process_rules_for_a_firewall_in_a_bypass</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">id_firewall</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">rules</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s1">&#39;SoftLayer_Network_Component_Firewall&#39;</span><span class="p">,</span> <span class="s1">&#39;getRules&#39;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="n">id_firewall</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="n">rule</span> <span class="ow">in</span> <span class="n">rules</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="c1"># It is always necessary to delete this key to perform the firewall update request</span>
</span></span><span class="line"><span class="cl">            <span class="k">del</span> <span class="n">rule</span><span class="p">[</span><span class="s1">&#39;status&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">rules_template</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;bypassFlag&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;networkComponentFirewallId&#39;</span><span class="p">:</span> <span class="n">id_firewall</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;rules&#39;</span><span class="p">:</span> <span class="n">rules</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="n">new_rules</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s1">&#39;SoftLayer_Network_Firewall_Update_Request&#39;</span><span class="p">,</span> <span class="s1">&#39;createObject&#39;</span><span class="p">,</span> <span class="n">rules_template</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">fout</span><span class="p">(</span><span class="n">formatting</span><span class="o">.</span><span class="n">iter_to_table</span><span class="p">(</span><span class="n">new_rules</span><span class="p">))</span>
</span></span></code></pre></div><h2 id="bypass-rules-for-a-firewall-in-a-bypass">Bypass Rules for a Firewall in a Bypass</h2>
<p>Bypass rules for a firewall in a VSI.</p>
<h3 id="python-4">Python</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">bypass_rules_for_a_firewall_in_a_bypass</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">id_firewall</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">rules</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s1">&#39;SoftLayer_Network_Component_Firewall&#39;</span><span class="p">,</span> <span class="s1">&#39;getRules&#39;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="n">id_firewall</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="n">rule</span> <span class="ow">in</span> <span class="n">rules</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="c1"># It is always necessary to delete this key to perform the firewall update request</span>
</span></span><span class="line"><span class="cl">            <span class="k">del</span> <span class="n">rule</span><span class="p">[</span><span class="s1">&#39;status&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">rules_template</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;bypassFlag&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;networkComponentFirewallId&#39;</span><span class="p">:</span> <span class="n">id_firewall</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;rules&#39;</span><span class="p">:</span> <span class="n">rules</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="n">new_rules</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s1">&#39;SoftLayer_Network_Firewall_Update_Request&#39;</span><span class="p">,</span> <span class="s1">&#39;createObject&#39;</span><span class="p">,</span> <span class="n">rules_template</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">fout</span><span class="p">(</span><span class="n">formatting</span><span class="o">.</span><span class="n">iter_to_table</span><span class="p">(</span><span class="n">new_rules</span><span class="p">))</span>
</span></span></code></pre></div><h2 id="get-firewall-rules-for-a-vsi">Get Firewall Rules for a Vsi</h2>
<p>Get the associated Firewall&rsquo;s rules for a vsi.</p>
<h3 id="python-5">Python</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">get_rules_for_a_vsi</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">primary_ip_address</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">vsi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s1">&#39;SoftLayer_Virtual_Guest&#39;</span><span class="p">,</span> <span class="s1">&#39;findByIpAddress&#39;</span><span class="p">,</span> <span class="n">primary_ip_address</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">firewall</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s1">&#39;SoftLayer_Virtual_Guest&#39;</span><span class="p">,</span> <span class="s1">&#39;getFirewallServiceComponent&#39;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="n">vsi</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">        <span class="n">rules</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s1">&#39;SoftLayer_Network_Component_Firewall&#39;</span><span class="p">,</span> <span class="s1">&#39;getRules&#39;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="n">firewall</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">fout</span><span class="p">(</span><span class="n">formatting</span><span class="o">.</span><span class="n">iter_to_table</span><span class="p">(</span><span class="n">rules</span><span class="p">))</span>
</span></span></code></pre></div><h2 id="get-firewall-logs">Get Firewall Logs</h2>
<p>Get the firewall logs for an arbitrary IP address.</p>
<h3 id="python-6">Python</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">get_firewall_logs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">primary_ip_address</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">subnetIp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s1">&#39;SoftLayer_Network_Subnet_IpAddress&#39;</span><span class="p">,</span> <span class="s1">&#39;getByIpAddress&#39;</span><span class="p">,</span> <span class="n">primary_ip_address</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">fout</span><span class="p">(</span><span class="n">formatting</span><span class="o">.</span><span class="n">iter_to_table</span><span class="p">(</span><span class="n">subnetIp</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">        <span class="n">logs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s1">&#39;SoftLayer_Network_Subnet_IpAddress&#39;</span><span class="p">,</span> <span class="s1">&#39;getSyslogEventsOneDay&#39;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="n">subnetIp</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">],</span> <span class="n">limit</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">fout</span><span class="p">(</span><span class="n">formatting</span><span class="o">.</span><span class="n">iter_to_table</span><span class="p">(</span><span class="n">logs</span><span class="p">))</span>
</span></span></code></pre></div><h2 id="get-firewall-ip-address">Get Firewall Ip Address</h2>
<p>Get the IP address from a VLan.</p>
<p>The script lists the IP address of VLAN, it makes a single call to the <code>SoftLayer_Network_Vlan::getFirewallProtectableIpAddresses</code> method.</p>
<h3 id="python-7">Python</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">get_firewall_ip_address</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">primary_ip_address</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">vlan</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s1">&#39;SoftLayer_Network_Vlan&#39;</span><span class="p">,</span> <span class="s1">&#39;getVlanForIpAddress&#39;</span><span class="p">,</span> <span class="n">primary_ip_address</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">fout</span><span class="p">(</span><span class="n">formatting</span><span class="o">.</span><span class="n">iter_to_table</span><span class="p">(</span><span class="n">vlan</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">        <span class="n">firewall</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s1">&#39;SoftLayer_Network_Vlan&#39;</span><span class="p">,</span> <span class="s1">&#39;getFirewallProtectableIpAddresses&#39;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="n">vlan</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">],</span> <span class="n">limit</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">fout</span><span class="p">(</span><span class="n">formatting</span><span class="o">.</span><span class="n">iter_to_table</span><span class="p">(</span><span class="n">firewall</span><span class="p">))</span>
</span></span></code></pre></div><h2 id="edit-standard-rules">Edit Standard Rules</h2>
<p>Edit Standard Rule.</p>
<p>A rule set of a firewall is modified by passing a SoftLayer_Network_Firewall_Update_Request template object to SoftLayer_Network_Firewall_Update_Request::createObject. The entire rule set is rewritten with each update request.</p>
<p>This means it is necessary to include all past unchanged rules along with any modifications or additions. This is easily accomplished by pulling in the existing rules as described above then modifying the gathered array.</p>
<h3 id="python-8">Python</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">edit_standard_rules</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">id_server</span><span class="p">,</span> <span class="n">ip_to_allow</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">firewall</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s1">&#39;SoftLayer_Virtual_Guest&#39;</span><span class="p">,</span> <span class="s1">&#39;getFirewallServiceComponent&#39;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="n">id_server</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">rules</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s1">&#39;SoftLayer_Network_Component_Firewall&#39;</span><span class="p">,</span> <span class="s1">&#39;getRules&#39;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="n">firewall</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="n">rule</span> <span class="ow">in</span> <span class="n">rules</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="c1"># It is always necessary to delete this key to perform the firewall update request</span>
</span></span><span class="line"><span class="cl">            <span class="k">del</span> <span class="n">rule</span><span class="p">[</span><span class="s1">&#39;status&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="n">rule</span><span class="p">[</span><span class="s1">&#39;sourceIpAddress&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">ip_to_allow</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="n">rule</span><span class="p">[</span><span class="s1">&#39;action&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;deny&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">rules_template</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;networkComponentFirewallId&#39;</span><span class="p">:</span> <span class="n">id_firewall</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;rules&#39;</span><span class="p">:</span> <span class="n">rules</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="n">new_rules</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s1">&#39;SoftLayer_Network_Firewall_Update_Request&#39;</span><span class="p">,</span> <span class="s1">&#39;createObject&#39;</span><span class="p">,</span> <span class="n">rules_template</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">fout</span><span class="p">(</span><span class="n">formatting</span><span class="o">.</span><span class="n">iter_to_table</span><span class="p">(</span><span class="n">new_rules</span><span class="p">))</span>
</span></span></code></pre></div><h2 id="edit-firewall-rule-from-vsi">Edit Firewall Rule from Vsi</h2>
<p>Edit a firewall rule from a  VSI.
For edit any rule, it&rsquo;s necessary obtain the id of the rule, this it&rsquo;s possible with the follow function <code>get_firewall_rules</code>.</p>
<h3 id="python-9">Python</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">edit_firewall_rule_from_vsi</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">primary_ip_address</span><span class="p">,</span> <span class="n">id_rule</span><span class="p">,</span> <span class="n">new_rule</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">vsi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s1">&#39;SoftLayer_Virtual_Guest&#39;</span><span class="p">,</span> <span class="s1">&#39;findByIpAddress&#39;</span><span class="p">,</span> <span class="n">primary_ip_address</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">firewall</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s1">&#39;SoftLayer_Virtual_Guest&#39;</span><span class="p">,</span> <span class="s1">&#39;getFirewallServiceComponent&#39;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="n">vsi</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">        <span class="n">rules</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s1">&#39;SoftLayer_Network_Component_Firewall&#39;</span><span class="p">,</span> <span class="s1">&#39;getRules&#39;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="n">firewall</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">rules</span><span class="p">)):</span>
</span></span><span class="line"><span class="cl">            <span class="c1"># It is always necessary to delete this key to perform the firewall update request</span>
</span></span><span class="line"><span class="cl">            <span class="k">del</span> <span class="n">rules</span><span class="p">[</span><span class="n">index</span><span class="p">][</span><span class="s1">&#39;status&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="n">rules</span><span class="p">[</span><span class="n">index</span><span class="p">][</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">id_rule</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="n">rules</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_rule</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">rules_template</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;networkComponentFirewallId&#39;</span><span class="p">:</span> <span class="n">id_firewall</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;rules&#39;</span><span class="p">:</span> <span class="n">rules</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="n">new_rules</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s1">&#39;SoftLayer_Network_Firewall_Update_Request&#39;</span><span class="p">,</span> <span class="s1">&#39;createObject&#39;</span><span class="p">,</span> <span class="n">rules_template</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">fout</span><span class="p">(</span><span class="n">formatting</span><span class="o">.</span><span class="n">iter_to_table</span><span class="p">(</span><span class="n">new_rules</span><span class="p">))</span>
</span></span></code></pre></div><h2 id="firewall-report">Firewall Report</h2>
<p>Get firewall report.</p>
<h3 id="python-10">Python</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">firewall_report</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ip_address_id</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">logs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s1">&#39;SoftLayer_Network_Subnet_IpAddress&#39;</span><span class="p">,</span> <span class="s1">&#39;getTopTenSyslogEventsByProtocolsOneDay&#39;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="n">ip_address_id</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">fout</span><span class="p">(</span><span class="n">formatting</span><span class="o">.</span><span class="n">iter_to_table</span><span class="p">(</span><span class="n">logs</span><span class="p">))</span>
</span></span></code></pre></div><h2 id="get-all-firewalls-in-the-account">Get All Firewalls in the Account</h2>
<p>Get the firewalls in the account.</p>
<h3 id="python-11">Python</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">get_all_firewalls_in_the_account</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">objectMask</span> <span class="o">=</span> <span class="s2">&#34;mask[firewallNetworkComponents,networkVlanFirewall,dedicatedFirewallFlag,firewallGuestNetworkComponents,firewallInterfaces,firewallRules,highAvailabilityFirewallFlag]&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="n">vlans</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s1">&#39;SoftLayer_Account&#39;</span><span class="p">,</span> <span class="s1">&#39;getNetworkVlans&#39;</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">objectMask</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">firewalls</span> <span class="o">=</span> <span class="p">[]</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="n">vlan</span> <span class="ow">in</span> <span class="n">vlans</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="n">vlan</span><span class="p">[</span><span class="s1">&#39;dedicatedFirewallFlag&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">or</span> <span class="n">vlan</span><span class="p">[</span><span class="s1">&#39;highAvailabilityFirewallFlag&#39;</span><span class="p">]</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">                    <span class="n">vlan</span><span class="p">[</span><span class="s1">&#39;firewallGuestNetworkComponents&#39;</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">vlan</span><span class="p">[</span><span class="s1">&#39;firewallInterfaces&#39;</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">                <span class="n">vlan</span><span class="p">[</span><span class="s1">&#39;firewallNetworkComponents&#39;</span><span class="p">]):</span>
</span></span><span class="line"><span class="cl">                <span class="n">firewalls</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">vlan</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">fout</span><span class="p">(</span><span class="n">formatting</span><span class="o">.</span><span class="n">iter_to_table</span><span class="p">(</span><span class="n">firewalls</span><span class="p">))</span>
</span></span></code></pre></div><h2 id="get-all-firewalls-in-the-account-1">Get All Firewalls in the Account</h2>
<p>Get the firewalls in the account.</p>
<h3 id="python-12">Python</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">get_all_firewalls_in_the_account</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">objectMask</span> <span class="o">=</span> <span class="s2">&#34;mask[firewallNetworkComponents,networkVlanFirewall,dedicatedFirewallFlag,firewallGuestNetworkComponents,firewallInterfaces,firewallRules,highAvailabilityFirewallFlag]&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="n">vlans</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s1">&#39;SoftLayer_Account&#39;</span><span class="p">,</span> <span class="s1">&#39;getNetworkVlans&#39;</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">objectMask</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">firewalls</span> <span class="o">=</span> <span class="p">[]</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="n">vlan</span> <span class="ow">in</span> <span class="n">vlans</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="n">vlan</span><span class="p">[</span><span class="s1">&#39;dedicatedFirewallFlag&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">or</span> <span class="n">vlan</span><span class="p">[</span><span class="s1">&#39;highAvailabilityFirewallFlag&#39;</span><span class="p">]</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">                    <span class="n">vlan</span><span class="p">[</span><span class="s1">&#39;firewallGuestNetworkComponents&#39;</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">vlan</span><span class="p">[</span><span class="s1">&#39;firewallInterfaces&#39;</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">                <span class="n">vlan</span><span class="p">[</span><span class="s1">&#39;firewallNetworkComponents&#39;</span><span class="p">]):</span>
</span></span><span class="line"><span class="cl">                <span class="n">firewalls</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">vlan</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">fout</span><span class="p">(</span><span class="n">formatting</span><span class="o">.</span><span class="n">iter_to_table</span><span class="p">(</span><span class="n">firewalls</span><span class="p">))</span>
</span></span></code></pre></div><h2 id="add-firewall-rule-to-vsi">Add Firewall Rule to Vsi</h2>
<p>Add firewall rules to the Firewall in a VSI.</p>
<h3 id="python-13">Python</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">add_firewall_rule_to_vsi</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">primary_ip_address</span><span class="p">,</span> <span class="n">rules</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">vsi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s1">&#39;SoftLayer_Virtual_Guest&#39;</span><span class="p">,</span> <span class="s1">&#39;findByIpAddress&#39;</span><span class="p">,</span> <span class="n">primary_ip_address</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">firewall</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s1">&#39;SoftLayer_Virtual_Guest&#39;</span><span class="p">,</span> <span class="s1">&#39;getFirewallServiceComponent&#39;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="n">vsi</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">        <span class="n">old_rules</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s1">&#39;SoftLayer_Network_Component_Firewall&#39;</span><span class="p">,</span> <span class="s1">&#39;getRules&#39;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="n">firewall</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="n">rule</span> <span class="ow">in</span> <span class="n">old_rules</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="c1"># It is always necessary to delete this key to perform the firewall update request</span>
</span></span><span class="line"><span class="cl">            <span class="k">del</span> <span class="n">rule</span><span class="p">[</span><span class="s1">&#39;status&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">new_rules</span> <span class="o">=</span> <span class="n">old_rules</span> <span class="o">+</span> <span class="n">rules</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">rules_template</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;networkComponentFirewallId&#39;</span><span class="p">:</span> <span class="n">id_firewall</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;rules&#39;</span><span class="p">:</span> <span class="n">new_rules</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s1">&#39;SoftLayer_Network_Firewall_Update_Request&#39;</span><span class="p">,</span> <span class="s1">&#39;createObject&#39;</span><span class="p">,</span> <span class="n">rules_template</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">fout</span><span class="p">(</span><span class="n">formatting</span><span class="o">.</span><span class="n">iter_to_table</span><span class="p">(</span><span class="n">result</span><span class="p">))</span>
</span></span></code></pre></div><h2 id="edit-vlan-firewall-rules">Edit Vlan Firewall Rules</h2>
<p>Edit Vlan firewall rule.</p>
<p>A firewall&rsquo;s ruleset is modified by passing a SoftLayer_Network_Firewall_Update_Request template object to <code>SoftLayer_Network_Firewall_Update_Request::createObject</code>. The entire ruleset is rewritten with each update request.</p>
<p>This means it is necessary to include all past unchanged rules along with any modifications or additions. This is easily accomplished by pulling in the existing rules as described above then modifying the gathered array.</p>
<h3 id="python-14">Python</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">edit_vlan_firewall_rules</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vlan_id</span><span class="p">,</span> <span class="n">ip_to_allow</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">objectMask</span> <span class="o">=</span> <span class="s1">&#39;mask[firewallRules,firewallInterfaces[firewallContextAccessControlLists]]&#39;</span>
</span></span><span class="line"><span class="cl">        <span class="n">vlan</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s1">&#39;SoftLayer_Network_Vlan&#39;</span><span class="p">,</span> <span class="s1">&#39;getObject&#39;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="n">vlan_id</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">objectMask</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">rules</span> <span class="o">=</span> <span class="n">vlan</span><span class="p">[</span><span class="s1">&#39;firewallRules&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">fout</span><span class="p">(</span><span class="n">formatting</span><span class="o">.</span><span class="n">iter_to_table</span><span class="p">(</span><span class="n">rules</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">firewallContextAccessControlListId</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># Getting the ID of Access Control List.</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># Each VLAN will have two types of firewallInterface: &#39;inside&#39; and &#39;outside&#39;.</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># firewallContextAccessControlLists are organized by a direction of &#39;in&#39; or &#39;out&#39;.</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># Currently the SoftLayer Platform supports the &#39;outside&#39; firewallInterfaces`.</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="n">firewall</span> <span class="ow">in</span> <span class="n">vlan</span><span class="p">[</span><span class="s1">&#39;firewallInterfaces&#39;</span><span class="p">]:</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="n">firewall</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;inside&#39;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="k">continue</span>
</span></span><span class="line"><span class="cl">            <span class="k">for</span> <span class="n">controlList</span> <span class="ow">in</span> <span class="n">firewall</span><span class="p">[</span><span class="s1">&#39;firewallContextAccessControlLists&#39;</span><span class="p">]:</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="n">controlList</span><span class="p">[</span><span class="s1">&#39;direction&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;out&#39;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                    <span class="k">continue</span>
</span></span><span class="line"><span class="cl">                <span class="n">firewallContextAccessControlListId</span> <span class="o">=</span> <span class="n">controlList</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="n">rule</span> <span class="ow">in</span> <span class="n">rules</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="c1"># It is always necessary to delete this key to perform the firewall update request</span>
</span></span><span class="line"><span class="cl">            <span class="k">del</span> <span class="n">rule</span><span class="p">[</span><span class="s1">&#39;status&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="n">rule</span><span class="p">[</span><span class="s1">&#39;sourceIpAddress&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">ip_to_allow</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="n">rule</span><span class="p">[</span><span class="s1">&#39;action&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;permit&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">rules_template</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;firewallContextAccessControlListId&#39;</span><span class="p">:</span> <span class="n">firewallContextAccessControlListId</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;rules&#39;</span><span class="p">:</span> <span class="n">rules</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s1">&#39;SoftLayer_Network_Firewall_Update_Request&#39;</span><span class="p">,</span> <span class="s1">&#39;createObject&#39;</span><span class="p">,</span> <span class="n">rules_template</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">fout</span><span class="p">(</span><span class="n">formatting</span><span class="o">.</span><span class="n">iter_to_table</span><span class="p">(</span><span class="n">result</span><span class="p">))</span>
</span></span></code></pre></div><h2 id="running-the-example">Running the Example</h2>
<h3 id="python-15">Python</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">firewall</span> <span class="o">=</span> <span class="n">FirewallExample</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="n">primary_ip_address</span> <span class="o">=</span> <span class="s1">&#39;0.0.0.0&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="n">firewall</span><span class="o">.</span><span class="n">get_firewall_for_a_vsi</span><span class="p">(</span><span class="n">primary_ip_address</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">path</span> <span class="o">=</span> <span class="s1">&#39;/yourPath&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="n">id_firewall</span> <span class="o">=</span> <span class="mi">123456</span>
</span></span><span class="line"><span class="cl">    <span class="n">firewall</span><span class="o">.</span><span class="n">backup_firewall_rules</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">id_firewall</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">firewall</span><span class="o">.</span><span class="n">restore_firewall_rules</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">id_firewall</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># For remove any rule, it&#39;s necessary obtain the id of the rule, this it&#39;s possible with the follow function:</span>
</span></span><span class="line"><span class="cl">    <span class="n">firewall</span><span class="o">.</span><span class="n">get_firewall_rules</span><span class="p">(</span><span class="n">id_firewall</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">id_rule</span> <span class="o">=</span> <span class="mi">1234567</span>
</span></span><span class="line"><span class="cl">    <span class="n">firewall</span><span class="o">.</span><span class="n">remove_firewall_rule_from_vsi</span><span class="p">(</span><span class="n">id_firewall</span><span class="p">,</span> <span class="n">id_rule</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">firewall</span><span class="o">.</span><span class="n">process_rules_for_a_firewall_in_a_bypass</span><span class="p">(</span><span class="n">id_firewall</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">firewall</span><span class="o">.</span><span class="n">bypass_rules_for_a_firewall_in_a_bypass</span><span class="p">(</span><span class="n">id_firewall</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">firewall</span><span class="o">.</span><span class="n">get_rules_for_a_vsi</span><span class="p">(</span><span class="n">primary_ip_address</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">firewall</span><span class="o">.</span><span class="n">get_firewall_logs</span><span class="p">(</span><span class="n">primary_ip_address</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">firewall</span><span class="o">.</span><span class="n">get_firewall_ip_address</span><span class="p">(</span><span class="n">primary_ip_address</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">id_server</span> <span class="o">=</span> <span class="mi">123456789</span>
</span></span><span class="line"><span class="cl">    <span class="n">ip_to_allow</span> <span class="o">=</span> <span class="s1">&#39;0.0.0.0&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="n">firewall</span><span class="o">.</span><span class="n">edit_standard_rules</span><span class="p">(</span><span class="n">id_server</span><span class="p">,</span> <span class="n">ip_to_allow</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">new_rule</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;action&#34;</span><span class="p">:</span> <span class="s2">&#34;permit&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;destinationIpAddress&#34;</span><span class="p">:</span> <span class="s2">&#34;any on server&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;destinationPortRangeEnd&#34;</span><span class="p">:</span> <span class="mi">80</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;destinationPortRangeStart&#34;</span><span class="p">:</span> <span class="mi">80</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;orderValue&#34;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;protocol&#34;</span><span class="p">:</span> <span class="s2">&#34;tcp&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;sourceIpAddress&#34;</span><span class="p">:</span> <span class="s2">&#34;0.0.0.0&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;sourceIpSubnetMask&#34;</span><span class="p">:</span> <span class="s2">&#34;0.0.0.0&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="n">firewall</span><span class="o">.</span><span class="n">edit_firewall_rule_from_vsi</span><span class="p">(</span><span class="n">primary_ip_address</span><span class="p">,</span> <span class="n">id_rule</span><span class="p">,</span> <span class="n">new_rule</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">ip_address_id</span> <span class="o">=</span> <span class="mi">123456789</span>
</span></span><span class="line"><span class="cl">    <span class="n">firewall</span><span class="o">.</span><span class="n">firewall_report</span><span class="p">(</span><span class="n">ip_address_id</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">firewall</span><span class="o">.</span><span class="n">get_all_firewalls_in_the_account</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">new_rules</span> <span class="o">=</span> <span class="p">[{</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;action&#34;</span><span class="p">:</span> <span class="s2">&#34;permit&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;destinationIpAddress&#34;</span><span class="p">:</span> <span class="s2">&#34;any on server&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;destinationPortRangeEnd&#34;</span><span class="p">:</span> <span class="mi">22</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;destinationPortRangeStart&#34;</span><span class="p">:</span> <span class="mi">22</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;orderValue&#34;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;protocol&#34;</span><span class="p">:</span> <span class="s2">&#34;tcp&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;sourceIpAddress&#34;</span><span class="p">:</span> <span class="s2">&#34;0.0.0.0&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;sourceIpSubnetMask&#34;</span><span class="p">:</span> <span class="s2">&#34;0.0.0.0&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}]</span>
</span></span><span class="line"><span class="cl">    <span class="n">firewall</span><span class="o">.</span><span class="n">add_firewall_rule_to_vsi</span><span class="p">(</span><span class="n">primary_ip_address</span><span class="p">,</span> <span class="n">new_rules</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="n">vlan_id</span> <span class="o">=</span> <span class="mi">1234567</span>
</span></span><span class="line"><span class="cl">    <span class="n">firewall</span><span class="o">.</span><span class="n">edit_vlan_firewall_rules</span><span class="p">(</span><span class="n">vlan_id</span><span class="p">,</span> <span class="n">ip_to_allow</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">firewall</span><span class="o">.</span><span class="n">debug</span><span class="p">()</span>
</span></span></code></pre></div><p>If you want to know the VSI of your account or require any additional information, you can start with the following documentation, which offers you the required data <code>SoftLayer_Account::getVirtualGuests</code>.</p>

            </div>
        </div>

    </div>
    <hr>
    <div class="row">
        <div class="row">
            <div class="col-md-6">
    <div class="well well-sm footer" style="word-wrap: break-word;"> 
        <strong>Feedback? <span class="fas fa-comment"/></strong>
            <p>
                If this article contains any error, or leaves any of your questions unanswered, please help us out by 
                opening up a github issue.<br>
                <a class="" href="https://github.com/softlayer/githubio_source/issues/new?title=Feedback%20for%20python%20-%20Working%20with%20Firewalls&body=Feedback+regarding%3A%20https%3a%2f%2fsldn.softlayer.com%2fpython%2ffirewalls%2f"> Open an issue</a>
                <i class="fab fa-github" alt="github"></i>
                <span> - </span>
                <a class="" href="https://github.com/softlayer/githubio_source/edit/master/content/python/python/firewalls.md" style="text-align: right;"> Quick Edit</a>
                <i class="fab fa-github" alt="github"></i>

            </p>
    </div>
</div>

        </div>
    </div>
<footer>
    <div class="row">
        <div class="col-sm-12 footer">
            <p>&copy; SoftLayer 2024<br>
            Built with <a href="https://github.com/spf13/hugo">Hugo</a></p>
        </div>
    </div>
</footer>
</div>

    <script src="https://sldn.softlayer.com/js/jquery.js"></script>
    <script src="https://sldn.softlayer.com/js/bootstrap.js"></script>
</body>
</html>
