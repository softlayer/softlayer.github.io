<!doctype html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="SoftLayer API Examples, implementations, and release notes.">
    <meta name="author" content="SoftLayer Evangelism Team">

    <title>Find active VMs by creator - http://localhost:1313/</title>
    <link rel="canonical" href="http://localhost:1313/python/find_my_vms/">
    
    <link href="http://localhost:1313/css/bootstrap.css" rel="stylesheet">
    <link href="http://localhost:1313/css/font-awesome.css" rel="stylesheet">
    <link href="http://localhost:1313/css/custom.css" rel="stylesheet">
    <link href="http://localhost:1313/css/highlight/monokai_sublime.css" rel="stylesheet">
    <script src="http://localhost:1313/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <link rel="shortcut icon" href="http://localhost:1313/img/favicon.ico" type="image/x-icon" />


    
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-68025308-1', 'auto');
      ga('send', 'pageview');
    </script>
</head>

<body>
    <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                    <span class="sr-only">Toggle Navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="http://localhost:1313/">SoftLayer API Examples</a>
            </div>
            <div class="collapse navbar-collapse navbar-ex1-collapse">
                <ul class="nav navbar-nav">
                    
                        <li><a href="http://localhost:1313/perl/">perl</a></li>
                    
                        <li><a href="http://localhost:1313/php/">php</a></li>
                    
                        <li><a href="http://localhost:1313/python/">python</a></li>
                    
                        <li><a href="http://localhost:1313/rest/">rest</a></li>
                    
                        <li><a href="http://localhost:1313/ruby/">ruby</a></li>
                    
                        <li><a href="http://localhost:1313/tools/">tools</a></li>
                    

                    
                </ul>
                <div id="custom-search-input" class="pull-right">
                  <form class="navbar-form" role="search" method="get" action="http://www.bing.com/">
                    <div class="input-group col-md-12">
                      <input type="text" class="form-control input-md" placeholder="Search" name="q" id="srch-term">
                      <input type="hidden" name="q1" value="site:softlayer.github.io" />
                      <div class="input-group-btn">
                        <button class="btn btn-info" type="submit">
                          <i class="glyphicon glyphicon-search"></i>
                        </button>
                      </div>
                    </div>
                  </form>
                </div>
            </div>
        </div>
    </nav>

<div class="container">
    <div class="row">
        <div class="col-md-9">
            <div class="well well-sm">
                <h3>Find active VMs by creator<br> <small>Retrieves the list of virtual instances (VSIs) by the person who created them. If no parameter is provided the code uses the ID you are logged into the SL CLI with.</small></h3>
                <hr>
                
                <pre><code class="language-python">'''
Code example of how to list virtual instances from a SoftLayer account
You can call the script from the command and provide the user ID you
want to check. The script expects that you have the SoftLayer CLI
installed and have it configured with the credentials you'd like
to use with SoftLayer.

You can run the script with the user ID you'd like to check under
the account you have configured:
find_my_active_vms userid

The output of the script is in a csv format with tabs as the
column separator.
'''
from __future__ import print_function
import sys
import SoftLayer


def list_my_vms(creator_id=None):
    &quot;&quot;&quot;
    Get the list of active VMs based on the creator ID

    Keyword arguments:
    creator_id -- the SoftLayer ID of the VM's creator (default: None)
    &quot;&quot;&quot;

    # create a client to the SoftLayer_Account API service.
    client = SoftLayer.Client()

    # number of results that we expect at a time
    chunk = 200
    mask = &quot;id,fullyQualifiedDomainName,primaryIpAddress,createDate,billingItem[orderItem[description, order[userRecord[username], id]]]&quot;

    # get the data from the SoftLayer APIs
    vms = client.iter_call(&quot;Account&quot;, &quot;getVirtualGuests&quot;, chunk=chunk, mask=mask)
    if creator_id is None:
        # if the creator wasn't provided use the
        # user provided to the API call as the creator
        creator_id = client.auth.username

    # add table header
    print('VM ID', '\t', 'Host', '\t', 'Public IP', '\t', 'Create Date')
    for vsi in vms:
        # navigate to the creator property under the VMs billing item
        if 'billingItem' in vsi.keys():
            billing_item = vsi['billingItem']
            if 'orderItem' in billing_item.keys():
                vm_creator_userid = billing_item['orderItem']['order']['userRecord']['username']
                if creator_id == vm_creator_userid:
                    print(str(vsi['id']), '\t',
                          vsi['fullyQualifiedDomainName'], '\t',
                          vsi.get('primaryIpAddress', 'N/A'), '\t', vsi['createDate'])

if __name__ == '__main__':
    if len(sys.argv) == 1:
        list_my_vms()
    else:
        list_my_vms(sys.argv[1])

</code></pre>

            </div>
        </div>

        
        <div class="col-md-3">
            <div class="well well-sm" style="word-wrap: break-word;"> 
                <h4>June 23, 2015<br>
                </h4>
                <hr>
                <strong>Classes</strong>
                <ul class="list-unstyled">
                
                    <li><a href="http://localhost:1313/classes/softlayer_account">SoftLayer_Account</a></li>
                
                    <li><a href="http://localhost:1313/classes/softlayer_virtualguest">SoftLayer_VirtualGuest</a></li>
                
                </ul>
                <hr>
                <strong>Tags <span class="fa fa-tags"/></strong><br>
                <a class="label label-default" href="http://localhost:1313/tags/vsis">vsis</a>
                 <a class="label label-default" href="http://localhost:1313/tags/creator">creator</a>
                 
                <hr>
                <strong>Feedback? <span class="fa fa-comment"/></strong>
                    <p>
                        We would love to hear it<br>
                        <a class="" href="https://github.com/softlayer/api_examples/issues/new?title=Feedback%20for%20python%20-%20Find%20active%20VMs%20by%20creator&body=Feedback+regarding%3A%20http%3a%2f%2flocalhost%3a1313%2fpython%2ffind_my_vms%2f"><span class="fa fa-github-square"/> Open an issue</a>
                    </p>
                    
                
            </div>
            <div class="panel panel-default">
    <div class="panel-heading" style="padding: 2px 15px;">
        <h4>More Documentation</h4>
    </div>
    <div class="panel-body">
        <a href="http://sldn.softlayer.com/reference/softlayerapi"><i class="fa fa-link"></i> SoftLayer API Reference<br></a>
        <a href="https://github.com/softlayer/softlayer-java"><i class="fa fa-github"></i> softlayer-java<br></a>
        <a href="https://github.com/softlayer/softlayer-api-perl-client"><i class="fa fa-github"></i> softlayer-perl<br></a>
        <a href="https://github.com/softlayer/softlayer-api-php-client"><i class="fa fa-github"></i> softlayer-php<br></a>
        <a href="https://github.com/softlayer/softlayer-python"><i class="fa fa-github"></i> softlayer-python<br></a>
        <a href="https://github.com/softlayer/softlayer-ruby"><i class="fa fa-github"></i> softlayer-ruby<br></a>
    </div>
</div>

<div class="panel panel-default">
    <div class="panel-heading text-center" style="padding: 2px 15px;">
      <a href="http://www.facebook.com/Softlayer"><i class="fa fa-facebook-square" alt="facebook"></i> </a>
      <a href="http://www.twitter.com/SoftLayer"><i class="fa fa-twitter" alt="twitter"></i> </a>
      <a href="http://www.linkedin.com/company/softlayer-technologies-inc." alt="linked-in"><i class="fa fa-linkedin-square"></i> </a>
      <a href="https://github.com/softlayer"><i class="fa fa-github" alt="github"></i> </a>
      <a href="irc://irc.freenode.net/softlayer"><i class="fa fa-comment" alt="irc"></i> </a>
    </div>
</div>

        </div>
    </div>
        <footer>
            <div class="row">
                <hr>
                <div class="col-sm-12">
                    <p>&copy; SoftLayer 2015<br>
                    Built with <a href="https://github.com/spf13/hugo">Hugo</a></p>
                </div>
            </div>
        </footer>
</div>

    <script src="http://localhost:1313/js/jquery.js"></script>
    <script src="http://localhost:1313/js/bootstrap.js"></script>
</body>
</html>

