<!doctype html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="SoftLayer API Examples, implementations, and release notes.">
    <meta name="author" content="SoftLayer">

    <title>The SoftLayer Python Library - https://sldn.softlayer.com/</title>
    <link rel="canonical" href="https://sldn.softlayer.com/article/python/">
        <link href="https://sldn.softlayer.com/css/main.css" rel="stylesheet">
    <link href="https://sldn.softlayer.com/css/bootstrap.css" rel="stylesheet">
    <link href="https://sldn.softlayer.com/css/custom.css" rel="stylesheet">
    <link href="https://sldn.softlayer.com/css/monokai.css" rel="stylesheet">
    <link href="https://sldn.softlayer.com/css/highlight/solarized_dark.css" rel="stylesheet">
    

    <script src="https://sldn.softlayer.com/js/highlight.pack.js"></script>

    <script>hljs.initHighlightingOnLoad();</script>
    <link rel="shortcut icon" href="https://sldn.softlayer.com/img/favicon.ico" type="image/x-icon" />
	<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Lato" />
            

    <script src="https://sldn.softlayer.com/js/jquery-3.3.1.min.js"></script> 
    <script src="https://sldn.softlayer.com/js/sldn.js"></script>


    <link href="https://sldn.softlayer.com/fontawesome/css/fontawesome.min.css" rel="stylesheet" type="text/css">
    <link href="https://sldn.softlayer.com/fontawesome/css/brands.min.css" rel="stylesheet" type="text/css">
    <link href="https://sldn.softlayer.com/fontawesome/css/solid.min.css" rel="stylesheet" type="text/css">
    
    <script defer src="https://sldn.softlayer.com/fontawesome/js/solid.min.js"></script>
    <script defer src="https://sldn.softlayer.com/fontawesome/js/brands.min.js"></script>
    <script defer src="https://sldn.softlayer.com/fontawesome/js/fontawesome.min.js"></script>

    <script>
        var head = document.getElementsByTagName('head')[0]
        var style = document.createElement('link')
        style.type = 'text/css'
        style.rel = 'stylesheet'
        style.id = "dark-theme"
        if (localStorage.getItem("dark-mode-theme") == "dark") {
            style.href = '/css/dark.css'
        } else {
            style.href = '/css/light.css'
        }
        head.append(style)
    </script>

    <script>
		$(document).ready(function() {
			$('table').addClass("table table-hover table-striped")
            setThemeMode(localStorage.getItem("dark-mode-theme") || "dark");
		})
	</script>
    
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-9XPZ9ZBSJE"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-9XPZ9ZBSJE');
        }
      </script>
</head>

<body>
    <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
        <div class="nav-container">
            <div class="navbar-header" style="width: 150px">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                    <span class="sr-only">Toggle Navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="https://sldn.softlayer.com/">SoftLayer API</a>
            </div>

            <div class="navbar-header" style="width: calc(100% - 350px)">
                <ul class="nav navbar-nav" style="width: 100%">
                    
                        <li><a href="https://sldn.softlayer.com/article/">Articles</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/reference/softlayerapi">Docs</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/go/">Go</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/java/">Java</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/php/">PHP</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/python/">Python</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/rest/">Rest</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/ruby/">Ruby</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/tools/">Tools</a></li>
                    
                    <li class="nav-item">
                        <a id="dark-toggle" class="dark-mode-toggle" aria-label="dark-mode-toggle" style="color: var(--Red); font-size: 20px">
                            <i class="fas fa-sun"></i>
                        </a>
                    </li>
                </ul>
            </div>

            <div id="custom-search-input" class="pull-right" style="width: 200px">
              <form class="navbar-form" role="search" method="get" action="https://www.bing.com/search">
                <div class="input-group col-md-12">
                  <input type="text" class="form-control input-md" placeholder="Search" name="q" id="srch-term">
                  <input type="hidden" name="q1" value="site:sldn.softlayer.com" />
                  <div class="input-group-btn">
                    <button class="btn btn-info" type="submit">
                      <i class="glyphicon glyphicon-search"></i>
                    </button>
                  </div>
                </div>
              </form>
            </div>

        </div>
    </nav>

<script type="text/javascript">
const darkIconClass = 'fas fa-moon'
const lightIconClass = 'fas fa-sun'
var darkCSS = $("#dark-theme");
var darkToggleIcon = $("#dark-toggle i");




function setThemeMode(mode) {
    localStorage.setItem("dark-mode-theme", mode);
    if (mode === "dark") {
        darkToggleIcon.attr('class', darkIconClass)
    } else  {
        darkToggleIcon.attr('class', lightIconClass)
    }
}


$("#dark-toggle").click(function () {
  if (darkToggleIcon.attr("class") == lightIconClass) {
    setThemeMode("dark")
  } else if (darkToggleIcon.attr("class") == darkIconClass) {
    setThemeMode("light")
  }
  location.reload();
});
</script>
<div class="container">
    <div class="row main-top">
    
        <div class="col-md-3">
            <div style="word-wrap: break-word;"> 
                <h4>August 10, 2021<br></h4>
            </div>
        </div>
        <div class="col-md-9">
                <strong>Tags <span class="fa fa-tags"/></strong>
                
                    <a class="label label-danger" href="https://sldn.softlayer.com/tags/tools">tools</a>
                
                    <a class="label label-danger" href="https://sldn.softlayer.com/tags/slcli">slcli</a>
                
                    <a class="label label-danger" href="https://sldn.softlayer.com/tags/article">article</a>
                
                    <a class="label label-danger" href="https://sldn.softlayer.com/tags/python">python</a>
                          
        </div>
    </div>
    <hr>
    <div class="row">
        <div class="col-md-12">
            <div class="well well-sm article" style="word-wrap: break-word;">
                <div class="article-title">
                    <h1>The SoftLayer Python Library</h1>
                    <small>Covers using the softlayer-python project to interact with the SoftLayer API, along with how to use the `slcli`, a command line tool, which is bundled with the softlayer-python library</small>
                </div>
                
                
                
                <h2 id="the-basics">The Basics</h2>
<ul>
<li><a href="https://github.com/softlayer/softlayer-python">softlayer-python</a> project homepage. For source code and submitting issues.</li>
<li><a href="https://softlayer-python.readthedocs.io/en/latest/">Documentation</a> Covers both the SLCLI and softlayer-python library.</li>
<li><a href="https://pypi.org/project/SoftLayer/">PyPi project</a> For latest information about the softlayer-python package, which is kept updated on PyPi.</li>
</ul>
<h4 id="font-colorredpython-27-supportfont"><font color=red>Python 2.7 Support</font></h4>
<p>As of version 5.8.0 SoftLayer-Python will no longer support python2.7, which is <a href="https://www.python.org/dev/peps/pep-0373/">End Of Life as of 2020</a> . If you cannot install python 3.6+ for some reason, you will need to use a version of softlayer-python &lt;= 5.7.2</p>
<hr>
<h2 id="authentication">Authentication</h2>
<p>When making API calls in python, you will first create an instance of the <a href="https://github.com/softlayer/softlayer-python/blob/master/SoftLayer/API.py#L155">SoftLayer Client class</a>. This client object is responsible for all the communication with the SoftLayer API server.</p>
<p>The first step for setting up a client is getting authentication information, and there are several ways to do this.</p>
<p>To get started, we will assume you are setting up your code something like this:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">SoftLayer</span>
</span></span><span class="line"><span class="cl"><span class="c1"># This is nice for printing out results from the API as raw JSON</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span> <span class="k">as</span> <span class="n">pp</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">client</span> <span class="o">=</span> <span class="n">SoftLayer</span><span class="o">.</span><span class="n">create_client_from_env</span><span class="p">()</span>
</span></span></code></pre></div><h4 id="softlayer-config" class="anchor-link"><a href="#softlayer-config">The ~/.softlayer config</a></h4>
<p>By default,  <a href="https://github.com/softlayer/softlayer-python/blob/master/SoftLayer/API.py#L50"><code>SoftLayer.create_client_from_env()</code></a> will read in the configuration from a file in your home directory called <code>~/.softlayer</code> ( and <code>~/AppData/Roaming/softlayer</code> on Windows)</p>
<p>This file can be setup manually with the <code>slcli config setup</code> command, or if you already know what the config should be, this file can be set up by copying over a known good configuration.</p>
<p>Listed below is an example config file, with comments and optional settings.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ cat ~/.softlayer
</span></span><span class="line"><span class="cl"><span class="o">[</span>softlayer<span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="nv">username</span> <span class="o">=</span> SLUserName
</span></span><span class="line"><span class="cl"><span class="nv">api_key</span> <span class="o">=</span> 64CharacterLongApiKeyGoesHere
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># For IBMCloud ApiKeys</span>
</span></span><span class="line"><span class="cl"><span class="c1"># https://sldn.softlayer.com/article/authenticating-softlayer-api/#cloud-api</span>
</span></span><span class="line"><span class="cl"><span class="c1"># username = apikey</span>
</span></span><span class="line"><span class="cl"><span class="c1"># api_key = 32CharacterLongKey</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Both rest and xmlrpc will work with this client</span>
</span></span><span class="line"><span class="cl"><span class="c1"># however the format of the request, and output of any logging/debugging </span>
</span></span><span class="line"><span class="cl"><span class="c1"># information will change based on this.</span>
</span></span><span class="line"><span class="cl"><span class="nv">endpoint_url</span> <span class="o">=</span> https://api.softlayer.com/rest/v3.1
</span></span><span class="line"><span class="cl"><span class="c1">#endpoint_url = https://api.softlayer.com/xmlrpc/v3.1</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Set to a number to stop waiting after that many seconds</span>
</span></span><span class="line"><span class="cl"><span class="nv">timeout</span> <span class="o">=</span> <span class="m">0</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># If you need to proxy requests through something</span>
</span></span><span class="line"><span class="cl"><span class="c1"># proxy = &#39;http://somehost&#39;</span>
</span></span></code></pre></div><h4 id="softlayer-environment" class="anchor-link"><a href="#softlayer-environment">Environment Variables</a></h4>
<p>You can also use the following environment variables to control authentication.</p>
<ul>
<li><code>https_proxy</code>: For anyone needing to proxy requests through a middle server</li>
<li><code>SL_USERNAME</code>: <code>username</code> in the config</li>
<li><code>SL_API_KEY</code>: <code>api_key</code> in the config</li>
</ul>
<h4 id="setting-during-client-creation">Setting during client creation</h4>
<p>You can of course set these variables when you are creating the client itself as well.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">client</span> <span class="o">=</span> <span class="n">SoftLayer</span><span class="o">.</span><span class="n">create_client_from_env</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="n">username</span><span class="o">=</span><span class="s1">&#39;SL_USERNAME&#39;</span><span class="p">,</span> <span class="n">api_key</span><span class="o">=</span><span class="s2">&#34;64CharacterLongAPiKey&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span></code></pre></div><p>See <a href="https://softlayer-python.readthedocs.io/en/latest/api/client/#SoftLayer.create_client_from_env">SoftLayer.create_client_from_env()</a> for a full list of parameters.</p>
<p>The only ones that are not checked for in the config are</p>
<ul>
<li><code>config_file</code>: which will just tell the client to read from a non-default location</li>
<li><code>user_agent</code>: Make API calls with a non-standard user_agent. Can be somewhat useful if you want your API calls to have some style in our API logs.</li>
<li><code>transport </code>: Useful if you want to use a debugging transport, or maybe some special modified transport.</li>
<li><code>verify</code>: which will prevent SSL verification checks. Don&rsquo;t turn this off unless you mean to.</li>
</ul>
<hr>
<h2 id="making-api-calls" class="anchor-link"><a href="#making-api-calls">Making API Calls</a></h2>
<p>Now that the client is setup, we are able to make API calls and get data back.</p>
<h4 id="client-call" class="anchor-link"><a href="#client-call">client.call</a></h4>
<p><code>client.call()</code> is generally what you should use to interact with the API. The <a href="https://softlayer-python.readthedocs.io/en/latest/api/client/#SoftLayer.BaseClient.call">client.call() documentation</a> has a full listing of all the supported parameters, but the basic syntax is as follows:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">result</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s1">&#39;SoftLayer_Account&#39;</span><span class="p">,</span> <span class="s1">&#39;getObject&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">pp</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</span></span></code></pre></div><p><a href="https://softlayer-python.readthedocs.io/en/latest/api/client/#making-api-calls">Making API Calls</a> has some more examples of how to use this method if needed.</p>
<h4 id="client-itercall" class="anchor-link"><a href="#client-itercall">client.iter_call</a></h4>
<p><a href="https://softlayer-python.readthedocs.io/en/latest/api/client/#SoftLayer.BaseClient.iter_call">client.iter_call()</a> is useful if you want to iterate over a large return set from the API. It takes the same arguments as <code>client.call()</code>, however this method will return a <a href="https://wiki.python.org/moin/Generators">Python Generator</a> and only make API calls to get more data when you read the end of the current data set.</p>
<p>For example, the following code will first get all virtual guests on the account, THEN lookup information on each of them in turn.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">virtualGuests</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s1">&#39;SoftLayer_Account&#39;</span><span class="p">,</span> <span class="s1">&#39;getVirtualGuests&#39;</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="s2">&#34;mask[id]&#34;</span><span class="p">,</span> <span class="nb">iter</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="k">for</span> <span class="n">guest</span> <span class="ow">in</span> <span class="n">virtualGuest</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">guestInfo</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s1">&#39;SoftLayer_Virtual_Guest&#39;</span><span class="p">,</span> <span class="s1">&#39;getObject&#39;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="n">guest</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">    <span class="n">pp</span><span class="p">(</span><span class="n">guestInfo</span><span class="p">)</span>
</span></span></code></pre></div><p>However the following code will get virtual guests in batches of 10, get the info on each, then get the next batch of 10. This will continue until the client gets less than 10 results back</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">virtualGuests</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">iter_call</span><span class="p">(</span><span class="s1">&#39;SoftLayer_Account&#39;</span><span class="p">,</span> <span class="s1">&#39;getVirtualGuests&#39;</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="s2">&#34;mask[id]&#34;</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="k">for</span> <span class="n">guest</span> <span class="ow">in</span> <span class="n">virtualGuest</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">guestInfo</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s1">&#39;SoftLayer_Virtual_Guest&#39;</span><span class="p">,</span> <span class="s1">&#39;getObject&#39;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="n">guest</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">    <span class="n">pp</span><span class="p">(</span><span class="n">guestInfo</span><span class="p">)</span>
</span></span></code></pre></div><p>This is mostly useful when getting all the results back from the API might take a very long time, and you want to do something in between API calls.</p>
<h4 id="servicecall">Service.call()</h4>
<p>This is an older form of making API calls and you may see it in some examples occasionally. It is supported, but if you are writing new code you should use <code>client.call()</code></p>
<p>The basic format for this type is like this:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">client</span><span class="p">[</span><span class="s1">&#39;SoftLayer_Account&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">getObject</span><span class="p">()</span>
</span></span></code></pre></div><p>The parameters you pass into that method are the same as <code>client.call()</code>, it is basically just formatted different.</p>
<h4 id="method-parametersmethod-parameters-method-parameters-anchor-link"><a href="#method-parameters">Method Parameters</a> (#method-parameters .anchor-link)</h4>
<p>If a specific method takes input parameters, for example <a href="https://sldn.softlayer.com/reference/services/SoftLayer_Dns_Domain/createARecord/">SoftLayer_Dns_Domain::createARecord()</a> takes 3 parameters (host, data, ttl). You specify these parameters as function parameters to <code>client.call()</code>.</p>
<blockquote>
<p><font color=red>NOTE: </font> Parameters are specified in the order they appear in the documentation. They are NOT specified by name.</p>
</blockquote>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">domain_id</span> <span class="o">=</span> <span class="mi">123456</span>
</span></span><span class="line"><span class="cl"><span class="k">try</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">new_record</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s1">&#39;SoftLayer_Dns_Domain&#39;</span><span class="p">,</span> <span class="s1">&#39;createARecord&#39;</span><span class="p">,</span> <span class="s1">&#39;newHost&#39;</span><span class="p">,</span> <span class="s1">&#39;1.2.3.4&#39;</span><span class="p">,</span> <span class="s1">&#39;6000&#39;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="n">domain_id</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">pp</span><span class="p">(</span><span class="n">new_record</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="k">except</span> <span class="n">SoftLayer</span><span class="o">.</span><span class="n">SoftLayerAPIError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;Unable to create domain</span><span class="se">\n</span><span class="s2">Error: </span><span class="si">{}</span><span class="s2">&#34;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span></span></code></pre></div><h4 id="object-masks" class="anchor-link"><a href="#object-masks">Object Masks</a></h4>
<p><a href="https://sldn.softlayer.com/article/object-masks/">Object Masks</a> are a complex concept of the API, but setting them is straightforward.</p>
<p>The basics is that it should be a string, starting with <code>mask[</code> and ending with <code>]</code>, and between should be the list of properties you want to get back from the API. If you want to select propertyX of a property1, propertyX needs to be enclosed in <code>[]</code> and the end of property1, like this:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">mask</span> <span class="o">=</span> <span class="s2">&#34;mask[id, hostname, backendRouters[hostname]]&#34;</span>
</span></span><span class="line"><span class="cl"><span class="n">guests</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s1">&#39;SoftLayer_Account&#39;</span><span class="p">,</span> <span class="s1">&#39;getVirtualGuests&#39;</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="k">for</span> <span class="n">guest</span> <span class="ow">in</span> <span class="n">guests</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">pp</span><span class="p">(</span><span class="n">guest</span><span class="p">)</span>
</span></span></code></pre></div><h4 id="object-filters" class="anchor-link"><a href="#object-filters">Object Filters</a></h4>
<p><a href="https://sldn.softlayer.com/article/object-filters/">Object Filters</a> are another critical API concept. In this case you would specify them as a Python nested dictionary.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">_filter</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&#34;virtualGuests&#34;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&#34;hostname&#34;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&#34;operation&#34;</span><span class="p">:</span> <span class="s2">&#34;testHost&#34;</span><span class="p">}}}</span>
</span></span><span class="line"><span class="cl"><span class="n">guests</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s1">&#39;SoftLayer_Account&#39;</span><span class="p">,</span> <span class="s1">&#39;getVirtualGuests&#39;</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="n">_filter</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="k">for</span> <span class="n">guest</span> <span class="ow">in</span> <span class="n">guests</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">pp</span><span class="p">(</span><span class="n">guest</span><span class="p">)</span>
</span></span></code></pre></div><h4 id="result-limits" class="anchor-link"><a href="#result-limits">Result Limits and Pagination</a></h4>
<p>You can automatically paginate API requests by using the <code>iter=True</code> parameter of <code>client.call()</code>, or by using <code>client.iter_call()</code> directly.  If you want to control pagination yourself you can use the <code>offset</code> and <code>limit</code> paramters.</p>
<blockquote>
<p>API results are not guaranteed to be in order from one API call to another, so if you do pagination, make sure to use an OrderBy Object Filter on some unique property</p>
</blockquote>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">SoftLayer</span> <span class="kn">import</span> <span class="n">utils</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">_filter</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&#34;virtualGuests&#34;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&#34;id&#34;</span><span class="p">:</span> <span class="n">utils</span><span class="o">.</span><span class="n">query_filter_orderby</span><span class="p">()}</span>
</span></span><span class="line"><span class="cl"><span class="n">guests</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s1">&#39;SoftLayer_Account&#39;</span><span class="p">,</span> <span class="s1">&#39;getVirtualGuests&#39;</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="n">_filter</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="k">for</span> <span class="n">guest</span> <span class="ow">in</span> <span class="n">guests</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">pp</span><span class="p">(</span><span class="n">guest</span><span class="p">)</span>
</span></span></code></pre></div><h4 id="error-handling" class="anchor-link"><a href="#error-handling">Error Handling</a></h4>
<p><a href="https://github.com/softlayer/softlayer-python/blob/master/SoftLayer/exceptions.py">SoftLayer.Exceptions</a> has a few defined Exceptions for handling API related errors.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">try</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">account</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s1">&#39;SoftLayer_Account&#39;</span><span class="p">,</span> <span class="s1">&#39;getObject&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="k">except</span> <span class="n">SoftLayer</span><span class="o">.</span><span class="n">SoftLayerAPIError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;Unable to retrieve account information faultCode=</span><span class="si">{}</span><span class="s2">, faultString=</span><span class="si">{}</span><span class="s2">&#34;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">faultCode</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">faultString</span><span class="p">)</span>
</span></span></code></pre></div><hr>
<h2 id="advanced-usage" class="anchor-link"><a href="#advanced-usage">Advanced Usage</a></h2>
<h4 id="retry-decorator">Retry Decorator</h4>
<p>The <a href="https://github.com/softlayer/softlayer-python/blob/master/SoftLayer/decoration.py#L21">Retry Decorator</a> is a <a href="https://www.python.org/dev/peps/pep-0318/">Python Decorator</a> that will automatically retry an API call based on a few types of API issues.</p>
<p>The <a href="https://github.com/softlayer/softlayer-python/blob/master/SoftLayer/managers/vs.py">virtual guest manager</a> has a few good examples of this in practice</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">logging</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">SoftLayer.decoration</span> <span class="kn">import</span> <span class="n">retry</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">LOGGER</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nd">@retry</span><span class="p">(</span><span class="n">logger</span><span class="o">=</span><span class="n">LOGGER</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">listGuests</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">client</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s1">&#39;Account&#39;</span><span class="p">,</span> <span class="s1">&#39;getVirtualGuests&#39;</span><span class="p">)</span>
</span></span></code></pre></div><p>If during this API call we get one of the following exceptions, the code will automatically retry after waiting a little bit.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl">    <span class="n">exceptions</span><span class="o">.</span><span class="n">ServerError</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">exceptions</span><span class="o">.</span><span class="n">ApplicationError</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">exceptions</span><span class="o">.</span><span class="n">RemoteSystemError</span><span class="p">,</span>
</span></span></code></pre></div><h4 id="debugging">Debugging</h4>
<p>The Client object keeps track of all API calls made, and has a handy feature to be able to print them out in a raw format that doesn&rsquo;t rely on the SoftLayer library.</p>
<p>If you are using the XMLRPC endpoint, this will result it a bit of python code that will directly use the requests library to send in the API call and show the payload it is sending.</p>
<p>The REST endpoint though will print out a nice CURL command that is nice and copy-pasteable.</p>
<p><a href="https://softlayer-python.readthedocs.io/en/latest/api/client/#debugging">Debugging Documentation</a> has the steps needed to set up the debugger and print out the API calls.</p>
<hr>
<h2 id="managers" class="anchor-link"><a href="#managers">Managers</a></h2>
<p>The <a href="https://softlayer-python.readthedocs.io/en/latest/api/client/#managers">Managers</a> are a collection of helper classes to make dealing with some of the more complex portions of the API a lot easier.</p>
<p>While it is not required to use them, they can serve as a good example to build off from. Most of the managers were designed for use with the CLI, but of note is the <a href="https://softlayer-python.readthedocs.io/en/latest/api/managers/ordering/">Ordering Manager</a> which can help take a lot of the complexity out of creating orders.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">SoftLayer.managers</span> <span class="kn">import</span> <span class="n">ordering</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">manager</span> <span class="o">=</span> <span class="n">ordering</span><span class="o">.</span><span class="n">OrderingManager</span><span class="p">(</span><span class="n">client</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1"># This just excludes all non-classic infrastructure packages</span>
</span></span><span class="line"><span class="cl"><span class="n">_filter</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;keyName&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;operation&#39;</span><span class="p">:</span> <span class="s1">&#39;!= BLUEMIX_SERVICE&#39;</span><span class="p">}}}</span>
</span></span><span class="line"><span class="cl"><span class="n">packages</span> <span class="o">=</span> <span class="n">manager</span><span class="o">.</span><span class="n">list_packages</span><span class="p">(</span><span class="nb">filter</span> <span class="o">=</span> <span class="n">_filter</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="s2">&#34;Id, KeyName&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="k">for</span> <span class="n">package</span> <span class="ow">in</span> <span class="n">packages</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;</span><span class="si">{}</span><span class="s2">, </span><span class="si">{}</span><span class="s2">&#34;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">package</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">),</span><span class="n">package</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;keyName&#39;</span><span class="p">))</span>
</span></span></code></pre></div><hr>
<h2 id="utilities" class="anchor-link"><a href="#utilities">Utilities</a></h2>
<p>The <a href="https://github.com/softlayer/softlayer-python/blob/master/SoftLayer/utils.py">SoftLayer.utils</a> section has a variety of functions that can make your life easier as well. Noteably the <code>query_filter</code> type functions can help format Object Filters properly and take a lot of the guess working out of the more complex filters.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">SoftLayer</span> <span class="kn">import</span> <span class="n">utils</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">_filter</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&#34;virtualGuests&#34;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&#34;hostname&#34;</span><span class="p">:</span> <span class="n">utils</span><span class="o">.</span><span class="n">query_filter_orderby</span><span class="p">()}</span>
</span></span><span class="line"><span class="cl"><span class="n">guestsByHostname</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s1">&#39;SoftLayer_Account&#39;</span><span class="p">,</span> <span class="s1">&#39;getVirtualGuests&#39;</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="n">_filter</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="k">for</span> <span class="n">guest</span> <span class="ow">in</span> <span class="n">guestsByHostname</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">pp</span><span class="p">(</span><span class="n">guest</span><span class="p">)</span>
</span></span></code></pre></div><hr>
<h2 id="slcli" class="anchor-link"><a href="#slcli">SLCLI</a></h2>
<p>The <a href="https://softlayer-python.readthedocs.io/en/latest/cli_directory/">slcli</a> command is included as part of the softlayer-python package. It contains a lot of prebuilt functionality that you can also find in the web portal, although some formats and outputs will be different of course.</p>
<p>It is a sister program of the <a href="https://cloud.ibm.com/docs/cli?topic=cli-sl-all-api"><code>ibmcloud sl</code></a> command, but a different code base. The two strive to have the same functionality, but some differences do exist, so be aware of which one you are using.</p>
<hr>
<h2 id="further-reading">Further Reading</h2>
<ul>
<li><a href="https://sldn.softlayer.com/python/">SLDN Python Library</a></li>
<li><a href="https://github.com/softlayer/softlayer-python">SoftLayer-Python Project Homepage</a></li>
<li><a href="https://cloud.ibm.com/docs/cli?topic=cli-getting-started">IBMCloud CLI</a></li>
<li><a href="https://softlayer-python.readthedocs.io/en/latest/cli_directory/">SLCLI Command Directory</a></li>
<li><a href="https://github.com/softlayer/softlayer-python/blob/master/CHANGELOG.md">SLCLI Change Log</a></li>
<li><a href="https://github.com/softlayer/softlayer-python/releases">softlayer-python Versions</a></li>
</ul>

            </div>
        </div>

    </div>
    <hr>
    <div class="row">
        <div class="col-md-6">
    <div class="well well-sm footer" style="word-wrap: break-word;"> 
        <strong>Feedback? <span class="fas fa-comment"/></strong>
            <p>
                If this article contains any error, or leaves any of your questions unanswered, please help us out by 
                opening up a github issue.<br>
                <a class="" href="https://github.com/softlayer/githubio_source/issues/new?title=Feedback%20for%20article%20-%20The%20SoftLayer%20Python%20Library&body=Feedback+regarding%3A%20https%3a%2f%2fsldn.softlayer.com%2farticle%2fpython%2f"> Open an issue</a>
                <i class="fab fa-github" alt="github"></i>
                <span> - </span>
                <a class="" href="https://github.com/softlayer/githubio_source/edit/master/content/article/python.md" style="text-align: right;"> Quick Edit</a>
                <i class="fab fa-github" alt="github"></i>

            </p>
    </div>
</div>

    </div>
<footer>
    <div class="row">
        <div class="col-sm-12 footer">
            <p>&copy; SoftLayer 2025<br>
            Built with <a href="https://github.com/spf13/hugo">Hugo</a></p>
        </div>
    </div>
</footer>
</div>

    <script src="https://sldn.softlayer.com/js/jquery.js"></script>
    <script src="https://sldn.softlayer.com/js/bootstrap.js"></script>
</body>
</html>

