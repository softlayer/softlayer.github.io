<!doctype html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="SoftLayer API Examples, implementations, and release notes.">
    <meta name="author" content="SoftLayer">

    <title>Python - https://sldn.softlayer.com/</title>
    <link rel="canonical" href="https://sldn.softlayer.com/article/python/">
        <link href="https://sldn.softlayer.com/css/main.css" rel="stylesheet">
    <link href="https://sldn.softlayer.com/css/bootstrap.css" rel="stylesheet">
    <link href="https://sldn.softlayer.com/css/custom.css" rel="stylesheet">
    <link href="https://sldn.softlayer.com/css/monokai.css" rel="stylesheet">
    <link href="https://sldn.softlayer.com/css/highlight/solarized_dark.css" rel="stylesheet">

    <script src="https://sldn.softlayer.com/js/highlight.pack.js"></script>

    <script>hljs.initHighlightingOnLoad();</script>
    <link rel="shortcut icon" href="https://sldn.softlayer.com/img/favicon.ico" type="image/x-icon" />
	<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Lato" />
            

    <script src="https://sldn.softlayer.com/js/jquery-3.3.1.min.js"></script> 
    <script src="https://sldn.softlayer.com/js/sldn.js"></script>


    <link href="https://sldn.softlayer.com/fontawesome/css/fontawesome.min.css" rel="stylesheet" type="text/css">
    <link href="https://sldn.softlayer.com/fontawesome/css/brands.min.css" rel="stylesheet" type="text/css">
    <link href="https://sldn.softlayer.com/fontawesome/css/solid.min.css" rel="stylesheet" type="text/css">
    
    <script defer src="https://sldn.softlayer.com/fontawesome/js/solid.min.js"></script>
    <script defer src="https://sldn.softlayer.com/fontawesome/js/brands.min.js"></script>
    <script defer src="https://sldn.softlayer.com/fontawesome/js/fontawesome.min.js"></script>

    <script>
		$(document).ready(function() {
			$('table').addClass("table table-hover table-striped")
		})
	</script>
    
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-88235803-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
</head>

<body>
    <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                    <span class="sr-only">Toggle Navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="https://sldn.softlayer.com/">SoftLayer API</a>
            </div>
            <div class="collapse navbar-collapse navbar-ex1-collapse">
                <ul class="nav navbar-nav">
                    
                        <li><a href="https://sldn.softlayer.com/article/">Articles</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/reference/softlayerapi">Documentation</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/go/">Go</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/java/">Java</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/perl/">Perl</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/php/">PHP</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/python/">Python</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/rest/">Rest</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/ruby/">Ruby</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/tools/">Tools</a></li>
                    

                    
                </ul>
                <div id="custom-search-input" class="pull-right">
                  <form class="navbar-form" role="search" method="get" action="https://www.bing.com/search">
                    <div class="input-group col-md-12">
                      <input type="text" class="form-control input-md" placeholder="Search" name="q" id="srch-term">
                      <input type="hidden" name="q1" value="site:sldn.softlayer.com" />
                      <div class="input-group-btn">
                        <button class="btn btn-info" type="submit">
                          <i class="glyphicon glyphicon-search"></i>
                        </button>
                      </div>
                    </div>
                  </form>
                </div>
            </div>
        </div>
    </nav>

<div class="container">
    <div class="row">
    
        <div class="col-md-3">
            <div style="word-wrap: break-word;"> 
                <h4>June 20, 2011<br></h4>
            </div>
        </div>
        <div class="col-md-9">
                <strong>Tags <span class="fa fa-tags"/></strong>
                
                    <a class="label label-danger" href="https://sldn.softlayer.com/tags/tools">tools</a>
                
                    <a class="label label-danger" href="https://sldn.softlayer.com/tags/sldn">sldn</a>
                
                    <a class="label label-danger" href="https://sldn.softlayer.com/tags/article">article</a>
                
                    <a class="label label-danger" href="https://sldn.softlayer.com/tags/python">python</a>
                          
        </div>
    </div>
    <hr>
    <div class="row">
        <div class="col-md-12">
            <div class="well well-sm article" style="word-wrap: break-word;">
                <div class="article-title">
                    <h1>Python</h1>
                    <small>Using the SoftLayer API with python</small>
                </div>
                
                
                
                <script type="text/javascript">toc_collapse=0;</script><div class="toc" id="toc1">
<div class="toc-title">Table of contents<span class="toc-toggle-message">&nbsp;</span></div>
<div class="toc-list">
<ol>
<li class="toc-level-1"><a href="#Python">Python</a></li>
<li class="toc-level-1"><a href="#Making_API_Calls">Making API Calls</a></li>
<li class="toc-level-1"><a href="#Using_Object_Masks">Using Object Masks</a></li>
<li class="toc-level-1"><a href="#Using_Result_Limits">Using Result Limits</a></li>
<li class="toc-level-1"><a href="#Error_Handling">Error Handling</a></li>
<li class="toc-level-1"><a href="#Managers">Managers</a></li>
<li class="toc-level-1"><a href="#More_Resources">More Resources</a></li>
</ol>
</div>
</div>
<h2 id="Python">Python</h2>
<p>SoftLayer, an IBM company, provides a <a href="http://www.python.org/">Python-based</a> API package that takes the heavy lifting out of making manual XML-RPC API calls. Our Python-based API requires  a <a href="http://www.python.org/download/">minimum of Python 2.6</a> To install the Python package into your Python installationâ€™s site-packages directory, run the following command:</p>
<p><bash><br />
pip install softlayer<br />
</bash></p>
<p>Refer to our <a href="https://softlayer-api-python-client.readthedocs.org/en/latest/install/">Python bindings documentation</a> for more install options.</p>
<h2 id="Making_API_Calls">Making API Calls</h2>
<p>Once the API client is installed, the first thing to do is import the SoftLayer package in your script. Use the following line to do that:</p>
<div class="geshifilter">
<pre class="python geshifilter-python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">import</span> SoftLayer</pre></div>
<p>Next, we need to create a client object. The code snippet below provides an example of setting up an API client:</p>
<div class="geshifilter">
<pre class="python geshifilter-python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">import</span> SoftLayer
client <span style="color: #66cc66;">=</span> SoftLayer.<span style="color: black;">Client</span><span style="color: black;">&#40;</span>username<span style="color: #66cc66;">=</span><span style="color: #483d8b;">'YOUR_USERNAME'</span><span style="color: #66cc66;">,</span> api_key<span style="color: #66cc66;">=</span><span style="color: #483d8b;">'YOUR_API_KEY'</span><span style="color: black;">&#41;</span></pre></div>
<p>Once your API client object is ready, we can make calls with it. Here's how to get the account details for the current account. The call takes no parameters and doesn't require an id so it's the natural starting point.</p>
<div class="geshifilter">
<pre class="python geshifilter-python" style="font-family:monospace;">client<span style="color: black;">&#91;</span><span style="color: #483d8b;">'Account'</span><span style="color: black;">&#93;</span>.<span style="color: black;">getObject</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span></pre></div>
<p>Here's how you'd create a new CloudLayer Computing Instance, which requires the use of the Virtual Guest record. The virtual guest record is a complex type, which is passed in as a Python dictionary.</p>
<div class="geshifilter">
<pre class="python geshifilter-python" style="font-family:monospace;">&nbsp;
client<span style="color: black;">&#91;</span><span style="color: #483d8b;">'Virtual_Guest'</span><span style="color: black;">&#93;</span>.<span style="color: black;">createObject</span><span style="color: black;">&#40;</span><span style="color: black;">&#123;</span>
    <span style="color: #483d8b;">'hostname'</span>: <span style="color: #483d8b;">'myhostname'</span><span style="color: #66cc66;">,</span>
    <span style="color: #483d8b;">'domain'</span>: <span style="color: #483d8b;">'example.org'</span><span style="color: #66cc66;">,</span>
    <span style="color: #483d8b;">'startCpus'</span>: <span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span>
    <span style="color: #483d8b;">'maxMemory'</span>: <span style="color: #ff4500;">1024</span><span style="color: #66cc66;">,</span>
    <span style="color: #483d8b;">'hourlyBillingFlag'</span>: <span style="color: #483d8b;">'true'</span><span style="color: #66cc66;">,</span>
    <span style="color: #483d8b;">'operatingSystemReferenceCode'</span>: <span style="color: #483d8b;">'UBUNTU_LATEST'</span><span style="color: #66cc66;">,</span>
    <span style="color: #483d8b;">'localDiskFlag'</span>: <span style="color: #483d8b;">'false'</span><span style="color: #66cc66;">,</span>
    <span style="color: #483d8b;">'datacenter'</span>: {<span style="color: #483d8b;">'name'</span>: <span style="color: #483d8b;">'dal09'</span>}
<span style="color: black;">&#125;</span><span style="color: black;">&#41;</span></pre></div>
<p>Here's how you'd create a new domain zone on our DNS service.</p>
<div class="geshifilter">
<pre class="python geshifilter-python" style="font-family:monospace;">&nbsp;
new_domain <span style="color: #66cc66;">=</span> client<span style="color: black;">&#91;</span><span style="color: #483d8b;">'Dns_Domain'</span><span style="color: black;">&#93;</span>.<span style="color: black;">createObject</span><span style="color: black;">&#40;</span><span style="color: black;">&#123;</span><span style="color: black;">&#123;</span>
    <span style="color: #483d8b;">'name'</span> : <span style="color: #483d8b;">'example.org'</span><span style="color: #66cc66;">,</span>
    <span style="color: #483d8b;">'resourceRecords'</span> <span style="color: #66cc66;">=></span> <span style="color: black;">&#91;</span>
        <span style="color: black;">&#123;</span>
            <span style="color: #483d8b;">'host'</span> : <span style="color: #483d8b;">'@'</span><span style="color: #66cc66;">,</span>
            <span style="color: #483d8b;">'data'</span> : <span style="color: #483d8b;">'127.0.0.1'</span><span style="color: #66cc66;">,</span>
            <span style="color: #483d8b;">'type'</span> : <span style="color: #483d8b;">'a'</span><span style="color: #66cc66;">,</span>
        <span style="color: black;">&#125;</span>
    <span style="color: black;">&#93;</span>
<span style="color: black;">&#125;</span><span style="color: black;">&#41;</span></pre></div>
<p>Now that we have a zone created for our domain, the following example shows how you add an A record in that zone after the fact. Note how parameters are passed in as positional arguments and the required domain id is passed using the id keyword argument. This example uses the domain id that was created in the last call.</p>
<div class="geshifilter">
<pre class="python geshifilter-python" style="font-family:monospace;">new_record <span style="color: #66cc66;">=</span> client<span style="color: black;">&#91;</span><span style="color: #483d8b;">'Dns_Domain'</span><span style="color: black;">&#93;</span>.<span style="color: black;">createARecord</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'myhost'</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">'127.0.0.1'</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">86400</span><span style="color: #66cc66;">,</span> <span style="color: #008000;">id</span><span style="color: #66cc66;">=</span>new_domain<span style="color: black;">&#91;</span><span style="color: #483d8b;">'id'</span><span style="color: black;">&#93;</span><span style="color: black;">&#41;</span>
&nbsp;
<span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">"New A record id: %"</span><span style="color: #66cc66;">,</span> new_record<span style="color: black;">&#91;</span><span style="color: #483d8b;">'id'</span><span style="color: black;">&#93;</span><span style="color: black;">&#41;</span></pre></div>
<h2 id="Using_Object_Masks">Using Object Masks</h2>
<p>Object masks allow you to control what attributes are returned in each call. It can be used to dig much deeper into an object to get specific</p>
<div class="geshifilter">
<pre class="python geshifilter-python" style="font-family:monospace;"><span style="color: #808080; font-style: italic;"># Because of the object mask that we're using we will retrieve the following</span>
<span style="color: #808080; font-style: italic;"># for each server:</span>
<span style="color: #808080; font-style: italic;"># * operating system passwords</span>
<span style="color: #808080; font-style: italic;"># * all network components</span>
<span style="color: #808080; font-style: italic;"># * the datacenter the server is located in</span>
<span style="color: #808080; font-style: italic;"># * the number of processors</span>
object_mask <span style="color: #66cc66;">=</span> <span style="color: #483d8b;">'operatingSystem.passwords, networkComponents, datacenter, processorCount'</span>
hardware <span style="color: #66cc66;">=</span> client<span style="color: black;">&#91;</span><span style="color: #483d8b;">'Account'</span><span style="color: black;">&#93;</span>.<span style="color: black;">getHardware</span><span style="color: black;">&#40;</span>mask<span style="color: #66cc66;">=</span>object_mask<span style="color: black;">&#41;</span></pre></div>
<h2 id="Using_Result_Limits">Using Result Limits</h2>
<p>The SoftLayer API allows limits to the number of returned results and offsets to better control the amount of data returned on certain calls. Below is an example showing pagination.</p>
<div class="geshifilter">
<pre class="python geshifilter-python" style="font-family:monospace;">client<span style="color: black;">&#91;</span><span style="color: #483d8b;">'Account'</span><span style="color: black;">&#93;</span>.<span style="color: black;">getVirtualGuests</span><span style="color: black;">&#40;</span>limit<span style="color: #66cc66;">=</span><span style="color: #ff4500;">10</span><span style="color: #66cc66;">,</span> offset<span style="color: #66cc66;">=</span><span style="color: #ff4500;">0</span><span style="color: black;">&#41;</span>  <span style="color: #808080; font-style: italic;"># Page 1</span>
client<span style="color: black;">&#91;</span><span style="color: #483d8b;">'Account'</span><span style="color: black;">&#93;</span>.<span style="color: black;">getVirtualGuests</span><span style="color: black;">&#40;</span>limit<span style="color: #66cc66;">=</span><span style="color: #ff4500;">10</span><span style="color: #66cc66;">,</span> offset<span style="color: #66cc66;">=</span><span style="color: #ff4500;">10</span><span style="color: black;">&#41;</span>  <span style="color: #808080; font-style: italic;"># Page 2</span></pre></div>
<h2 id="Error_Handling">Error Handling</h2>
<p>Errors that happen when making SoftLayer API calls appear as exceptions. The following script provides an example of how an API error can be handled. In this case we simply print out the details of the error and exit:</p>
<div class="geshifilter">
<pre class="python geshifilter-python" style="font-family:monospace;">client <span style="color: #66cc66;">=</span> SoftLayer.<span style="color: black;">Client</span><span style="color: black;">&#40;</span>username<span style="color: #66cc66;">=</span><span style="color: #483d8b;">'invalid'</span><span style="color: #66cc66;">,</span> api_key<span style="color: #66cc66;">=</span><span style="color: #483d8b;">'invalid'</span><span style="color: black;">&#41;</span>
&nbsp;
<span style="color: #ff7700;font-weight:bold;">try</span>:
    account <span style="color: #66cc66;">=</span> client<span style="color: black;">&#91;</span><span style="color: #483d8b;">'Account'</span><span style="color: black;">&#93;</span>.<span style="color: black;">getObject</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>
<span style="color: #ff7700;font-weight:bold;">except</span> SoftLayer.<span style="color: black;">SoftLayerAPIError</span> <span style="color: #ff7700;font-weight:bold;">as</span> e:
    <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">"Unable to retrieve account information faultCode=%s, faultString=%s"</span>
          % <span style="color: black;">&#40;</span>e.<span style="color: black;">faultCode</span><span style="color: #66cc66;">,</span> e.<span style="color: black;">faultString</span><span style="color: black;">&#41;</span><span style="color: black;">&#41;</span>
    exit<span style="color: black;">&#40;</span><span style="color: #ff4500;">1</span><span style="color: black;">&#41;</span>
<span style="color: #808080; font-style: italic;"># This should output:</span>
<span style="color: #808080; font-style: italic;"># Unable to retrieve account information faultCode=SoftLayer_Exception, faultString=Invalid API token.</span></pre></div>
<h2 id="Managers">Managers</h2>
<p>Everything above this section has addressed how to use the base API client to interact with the XML-RPC API that's documented here on SLDN. The Python bindings also have managers that abstract away some functionality from direct API calls. For reference of all available managers, refer to our <a href="https://softlayer-api-python-client.readthedocs.org/en/latest/api/client/#managers">API Python Client documentation</a>.</p>
<p>Creating a new CloudLayer Computing Instance, as we did above, would look something like this using our Python API Client managers (unsure if Python API Client managers is right, but feel free to replace that with what is, if you need to):</p>
<div class="geshifilter">
<pre class="python geshifilter-python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">import</span> SoftLayer
client <span style="color: #66cc66;">=</span> SoftLayer.<span style="color: black;">Client</span><span style="color: black;">&#40;</span>username<span style="color: #66cc66;">=</span><span style="color: #483d8b;">'YOUR_USERNAME'</span><span style="color: #66cc66;">,</span> api_key<span style="color: #66cc66;">=</span><span style="color: #483d8b;">'YOUR_API_KEY'</span><span style="color: black;">&#41;</span>
cci_manager <span style="color: #66cc66;">=</span> SoftLayer.<span style="color: black;">CCIManager</span><span style="color: black;">&#40;</span>client<span style="color: black;">&#41;</span>
cci_manager.<span style="color: black;">create_instance</span><span style="color: black;">&#40;</span>
    hostname<span style="color: #66cc66;">=</span><span style="color: #483d8b;">'myhostname'</span><span style="color: #66cc66;">,</span>
    domain<span style="color: #66cc66;">=</span><span style="color: #483d8b;">'example.org'</span><span style="color: #66cc66;">,</span>
    cpus<span style="color: #66cc66;">=</span><span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span>
    memory<span style="color: #66cc66;">=</span><span style="color: #ff4500;">1024</span><span style="color: #66cc66;">,</span>
    hourly<span style="color: #66cc66;">=</span><span style="color: #008000;">True</span><span style="color: #66cc66;">,</span>
    os_code<span style="color: #66cc66;">=</span><span style="color: #483d8b;">'UBUNTU_LATEST'</span><span style="color: #66cc66;">,</span>
    local_disk<span style="color: #66cc66;">=</span><span style="color: #008000;">False</span><span style="color: black;">&#41;</span></pre></div>
<p>Below is an example of listing hardware servers with more than 8 gigabytes of memory in the dal05 datacenter.</p>
<div class="geshifilter">
<pre class="python geshifilter-python" style="font-family:monospace;">hardware_manager <span style="color: #66cc66;">=</span> SoftLayer.<span style="color: black;">HardwareManager</span><span style="color: black;">&#40;</span>client<span style="color: black;">&#41;</span>
hardware <span style="color: #66cc66;">=</span> hardware_manager.<span style="color: black;">list_hardware</span><span style="color: black;">&#40;</span>datacenter<span style="color: #66cc66;">=</span><span style="color: #483d8b;">'dal05'</span><span style="color: #66cc66;">,</span> memory<span style="color: #66cc66;">=</span><span style="color: #483d8b;">'> 8'</span><span style="color: black;">&#41;</span></pre></div>
<p>The managers are a good way of being introduced to a smaller subset of the API and provide a reference for doing common tasks.</p>
<h2 id="More_Resources">More Resources</h2>
<p>The Python bindings are publicly developed <a href="https://github.com/softlayer/softlayer-api-python-client">on GitHub</a>. New features are developed and bugs are reported through <a href="https://github.com/softlayer/softlayer-api-python-client/issues">GitHub's Integrated Issue Tracking</a>. The full documentation for SoftLayer API Python client is available <a href="https://softlayer-api-python-client.readthedocs.org">here</a>. The bindings also have a command-line interface that hasn't been mentioned here. You can find more information on that in its <a href="https://softlayer-api-python-client.readthedocs.org">full documentation site</a>.</p>
            </div>
        </div>

    </div>
    <hr>
    <div class="row">
        <div class="col-md-6">
    <div class="well well-sm" style="word-wrap: break-word;"> 
        <strong>Feedback? <span class="fas fa-comment"/></strong>
            <p>
                If this article contains any error, or leaves any of your questions unanswered, please help us out by 
                opening up a github issue.<br>
                <a class="" href="https://github.com/softlayer/githubio_source/issues/new?title=Feedback%20for%20article%20-%20Python&body=Feedback+regarding%3A%20https%3a%2f%2fsldn.softlayer.com%2farticle%2fpython%2f"> Open an issue</a>
                <i class="fab fa-github" alt="github"></i>
            </p>
    </div>
</div>
    </div>
        <footer>
            <div class="row">
                <hr>
                <div class="col-sm-12">
                    <p>&copy; SoftLayer 2020<br>
                    Built with <a href="https://github.com/spf13/hugo">Hugo</a></p>
                </div>
            </div>
        </footer>
</div>

    <script src="https://sldn.softlayer.com/js/jquery.js"></script>
    <script src="https://sldn.softlayer.com/js/bootstrap.js"></script>
</body>
</html>

