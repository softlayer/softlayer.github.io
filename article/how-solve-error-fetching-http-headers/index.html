<!doctype html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="SoftLayer API Examples, implementations, and release notes.">
    <meta name="author" content="SoftLayer">

    <title>How to Solve: Error fetching http headers - https://sldn.softlayer.com/</title>
    <link rel="canonical" href="https://sldn.softlayer.com/article/how-solve-error-fetching-http-headers/">
        <link href="https://sldn.softlayer.com/css/main.css" rel="stylesheet">
    <link href="https://sldn.softlayer.com/css/bootstrap.css" rel="stylesheet">
    <link href="https://sldn.softlayer.com/css/custom.css" rel="stylesheet">
    <link href="https://sldn.softlayer.com/css/monokai.css" rel="stylesheet">
    <link href="https://sldn.softlayer.com/css/highlight/solarized_dark.css" rel="stylesheet">

    <script src="https://sldn.softlayer.com/js/highlight.pack.js"></script>

    <script>hljs.initHighlightingOnLoad();</script>
    <link rel="shortcut icon" href="https://sldn.softlayer.com/img/favicon.ico" type="image/x-icon" />
	<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Lato" />
            

    <script src="https://sldn.softlayer.com/js/jquery-3.3.1.min.js"></script> 
    <script src="https://sldn.softlayer.com/js/sldn.js"></script>


    <link href="https://sldn.softlayer.com/fontawesome/css/fontawesome.min.css" rel="stylesheet" type="text/css">
    <link href="https://sldn.softlayer.com/fontawesome/css/brands.min.css" rel="stylesheet" type="text/css">
    <link href="https://sldn.softlayer.com/fontawesome/css/solid.min.css" rel="stylesheet" type="text/css">
    
    <script defer src="https://sldn.softlayer.com/fontawesome/js/solid.min.js"></script>
    <script defer src="https://sldn.softlayer.com/fontawesome/js/brands.min.js"></script>
    <script defer src="https://sldn.softlayer.com/fontawesome/js/fontawesome.min.js"></script>

    <script>
		$(document).ready(function() {
			$('table').addClass("table table-hover table-striped")
		})
	</script>
    
<script async src="https://www.googletagmanager.com/gtag/js?id=G-9XPZ9ZBSJE"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-9XPZ9ZBSJE', { 'anonymize_ip': false });
}
</script>

</head>

<body>
    <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                    <span class="sr-only">Toggle Navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="https://sldn.softlayer.com/">SoftLayer API</a>
            </div>
            <div class="collapse navbar-collapse navbar-ex1-collapse">
                <ul class="nav navbar-nav">
                    
                        <li><a href="https://sldn.softlayer.com/article/">Articles</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/reference/softlayerapi">Documentation</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/go/">Go</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/java/">Java</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/perl/">Perl</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/php/">PHP</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/python/">Python</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/rest/">Rest</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/ruby/">Ruby</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/tools/">Tools</a></li>
                    

                    
                </ul>
                <div id="custom-search-input" class="pull-right">
                  <form class="navbar-form" role="search" method="get" action="https://www.bing.com/search">
                    <div class="input-group col-md-12">
                      <input type="text" class="form-control input-md" placeholder="Search" name="q" id="srch-term">
                      <input type="hidden" name="q1" value="site:sldn.softlayer.com" />
                      <div class="input-group-btn">
                        <button class="btn btn-info" type="submit">
                          <i class="glyphicon glyphicon-search"></i>
                        </button>
                      </div>
                    </div>
                  </form>
                </div>
            </div>
        </div>
    </nav>

<div class="container">
    <div class="row">
    
        <div class="col-md-3">
            <div style="word-wrap: break-word;"> 
                <h4>March 19, 2013<br></h4>
            </div>
        </div>
        <div class="col-md-9">
                <strong>Tags <span class="fa fa-tags"/></strong>
                
                    <a class="label label-danger" href="https://sldn.softlayer.com/tags/blog">blog</a>
                
                    <a class="label label-danger" href="https://sldn.softlayer.com/tags/article">article</a>
                          
        </div>
    </div>
    <hr>
    <div class="row">
        <div class="col-md-12">
            <div class="well well-sm article" style="word-wrap: break-word;">
                <div class="article-title">
                    <h1>How to Solve: Error fetching http headers</h1>
                    <small>Error Fetching http headers is a common error to encounter when working with the SLAPI. Here is how to fix it.</small>
                </div>
                
                
                
                <p><code>&quot;Error Fetching http headers&quot;</code> is a common error to encounter when working with the SLAPI. Fortunately, it is not terribly difficult to avoid. This error most commonly met when working with a large sets of data and can be a bit cryptic, as it seems to imply some sort of connection issue. In truth, it is a client side error provided when a timeout occurs while waiting for a response from the API.</p>
<p>When this error is encountered, there are three common solutions to head off the error by remedying either the timeout directly or how the API returns the results.</p>
<h1 id="the-problem">The Problem</h1>
<p>Lets say you want to get information about your account, so you make a API call to <a href="https://sldn.softlayer.com/reference/services/SoftLayer_Account/getObject/">SoftLayer_Account::getObject</a>, which works perfectly fine. Then you add an object mask to that API call to pull in various relational properties, like invoices, tickets, hardware etc. Which all works fine because your account is new and doesn&rsquo;t have many of those things on it. Time goes by, and slowly that API call starts taking a bit longer as each month you get increasingly more complex invoices, more tickets, hardware etc. Each time you make this API call, our database has to pull all of this information together before returning it to you, and eventually you&rsquo;ll get hit with this error, and wonder what went wrong.</p>
<h1 id="the-solutions">The Solutions</h1>
<p>There isn&rsquo;t really a hard limit on how many objects you can request in an API call, as it really just depends on how long it takes our database to get them all collected for you. However there are a few things you can try.</p>
<h3 id="socket-timeout">Socket Timeout</h3>
<p>This varies depending on what client you are using to communicate with the SLAPI, but increasing your timeout limit to several minutes may help. Re-trying the request itself might also work. This is the easiest solution, but also the least likely to work long term.</p>
<h3 id="object-masksarticleobject-masks"><a href="https://sldn.softlayer.com/article/object-masks/">Object masks</a></h3>
<p>In our problem example, lets say we are using the following object mask <code>mask[invoices, tickets, hardware]</code>, which will get our invoices, tickets, and hardware as you might expect. Since we have a great number of all of those, the API call returns <code>&quot;Error Fetching http headers&quot;</code>, so we can use our object mask to limit what we get back.</p>
<p>We can do this by adding in some <code>Local</code> properties to limit the amount of data returned. <code>mask[invoices[id], tickets[id], hardware[id]]</code> for example, will only return the <code>id</code> of each invoice, ticket, and hardware. When you select <code>Local</code> properties in an object mask, all other unspecified properties are UNselected in turn.</p>
<h3 id="breaking-up-the-api-call">Breaking up the API call</h3>
<p>ALternatively, you can usually break up the API call into multiple parts. <code>SoftLayer_Account::getObject(objectMask=mask[invoices, tickets, hardware])</code> could be broken up into</p>
<ul>
<li><code>SoftLayer_Account::getInvoices()</code></li>
<li><code>SoftLayer_Account::getTickets()</code></li>
<li><code>SoftLayer_Account::getHardware()</code></li>
</ul>
<p>Generally speaking, most relational properties on a service will have a corresponding <code>get</code> method. So <code>tickets</code> becomes <code>getTickets</code>.</p>
<h3 id="result-limitsarticleusing-result-limits-softlayer-api"><a href="https://sldn.softlayer.com/article/using-result-limits-softlayer-api/">Result limits</a></h3>
<p>The use of result limits allows for <a href="https://en.wikipedia.org/wiki/Pagination">pagination</a> of the returned objects. By setting the number of objects to return and an offset to start from, batch processing of results is possible, which results in a quicker processing time overall.</p>
<p>The trick with result limits though is that the method you call has to return a list. <a href="https://sldn.softlayer.com/reference/services/SoftLayer_Account/getObject/">SoftLayer_Account::getObject</a> for example only returns a single object, so you can not use a result limit there. However, methods like <a href="https://sldn.softlayer.com/reference/services/SoftLayer_Account/getHardware/">SoftLayer_Account::getHardware</a> return a list, and you can use a result limit to step through the data and avoid the error.</p>
<p>-Phil</p>

            </div>
        </div>

    </div>
    <hr>
    <div class="row">
        <div class="col-md-6">
    <div class="well well-sm" style="word-wrap: break-word;"> 
        <strong>Feedback? <span class="fas fa-comment"/></strong>
            <p>
                If this article contains any error, or leaves any of your questions unanswered, please help us out by 
                opening up a github issue.<br>
                <a class="" href="https://github.com/softlayer/githubio_source/issues/new?title=Feedback%20for%20article%20-%20How%20to%20Solve%3a%20Error%20fetching%20http%20headers&body=Feedback+regarding%3A%20https%3a%2f%2fsldn.softlayer.com%2farticle%2fhow-solve-error-fetching-http-headers%2f"> Open an issue</a>
                <i class="fab fa-github" alt="github"></i>
            </p>
    </div>
</div>
    </div>
<footer>
    <div class="row">
        <div class="col-sm-12">
            <p>&copy; SoftLayer 2022<br>
            Built with <a href="https://github.com/spf13/hugo">Hugo</a></p>
        </div>
    </div>
</footer>
</div>

    <script src="https://sldn.softlayer.com/js/jquery.js"></script>
    <script src="https://sldn.softlayer.com/js/bootstrap.js"></script>
</body>
</html>

