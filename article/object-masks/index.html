<!doctype html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="SoftLayer API Examples, implementations, and release notes.">
    <meta name="author" content="SoftLayer">

    <title>Object-Masks - https://sldn.softlayer.com/</title>
    <link rel="canonical" href="https://sldn.softlayer.com/article/object-masks/">
        <link href="https://sldn.softlayer.com/css/main.css" rel="stylesheet">
    <link href="https://sldn.softlayer.com/css/bootstrap.css" rel="stylesheet">
    <link href="https://sldn.softlayer.com/css/custom.css" rel="stylesheet">
    <link href="https://sldn.softlayer.com/css/monokai.css" rel="stylesheet">
    <link href="https://sldn.softlayer.com/css/highlight/solarized_dark.css" rel="stylesheet">

    <script src="https://sldn.softlayer.com/js/highlight.pack.js"></script>

    <script>hljs.initHighlightingOnLoad();</script>
    <link rel="shortcut icon" href="https://sldn.softlayer.com/img/favicon.ico" type="image/x-icon" />
	<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Lato" />
            

    <script src="https://sldn.softlayer.com/js/jquery-3.3.1.min.js"></script> 
    <script src="https://sldn.softlayer.com/js/sldn.js"></script>


    <link href="https://sldn.softlayer.com/fontawesome/css/fontawesome.min.css" rel="stylesheet" type="text/css">
    <link href="https://sldn.softlayer.com/fontawesome/css/brands.min.css" rel="stylesheet" type="text/css">
    <link href="https://sldn.softlayer.com/fontawesome/css/solid.min.css" rel="stylesheet" type="text/css">
    
    <script defer src="https://sldn.softlayer.com/fontawesome/js/solid.min.js"></script>
    <script defer src="https://sldn.softlayer.com/fontawesome/js/brands.min.js"></script>
    <script defer src="https://sldn.softlayer.com/fontawesome/js/fontawesome.min.js"></script>

    <script>
		$(document).ready(function() {
			$('table').addClass("table table-hover table-striped")
		})
	</script>
    
<script async src="https://www.googletagmanager.com/gtag/js?id=G-9XPZ9ZBSJE"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-9XPZ9ZBSJE', { 'anonymize_ip': false });
}
</script>

</head>

<body>
    <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                    <span class="sr-only">Toggle Navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="https://sldn.softlayer.com/">SoftLayer API</a>
            </div>
            <div class="collapse navbar-collapse navbar-ex1-collapse">
                <ul class="nav navbar-nav">
                    
                        <li><a href="https://sldn.softlayer.com/article/">Articles</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/reference/softlayerapi">Documentation</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/go/">Go</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/java/">Java</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/perl/">Perl</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/php/">PHP</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/python/">Python</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/rest/">Rest</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/ruby/">Ruby</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/tools/">Tools</a></li>
                    

                    
                </ul>
                <div id="custom-search-input" class="pull-right">
                  <form class="navbar-form" role="search" method="get" action="https://www.bing.com/search">
                    <div class="input-group col-md-12">
                      <input type="text" class="form-control input-md" placeholder="Search" name="q" id="srch-term">
                      <input type="hidden" name="q1" value="site:sldn.softlayer.com" />
                      <div class="input-group-btn">
                        <button class="btn btn-info" type="submit">
                          <i class="glyphicon glyphicon-search"></i>
                        </button>
                      </div>
                    </div>
                  </form>
                </div>
            </div>
        </div>
    </nav>

<div class="container">
    <div class="row">
    
        <div class="col-md-3">
            <div style="word-wrap: break-word;"> 
                <h4>December 3, 2012<br></h4>
            </div>
        </div>
        <div class="col-md-9">
                <strong>Tags <span class="fa fa-tags"/></strong>
                
                    <a class="label label-danger" href="https://sldn.softlayer.com/tags/article">article</a>
                
                    <a class="label label-danger" href="https://sldn.softlayer.com/tags/sldn">sldn</a>
                
                    <a class="label label-danger" href="https://sldn.softlayer.com/tags/objectmask">objectmask</a>
                          
        </div>
    </div>
    <hr>
    <div class="row">
        <div class="col-md-12">
            <div class="well well-sm article" style="word-wrap: break-word;">
                <div class="article-title">
                    <h1>Object-Masks</h1>
                    <small>How Object Masks work. Used to specify which relational properties you would like included in your query.</small>
                </div>
                
                
                
                <h2 id="overview">Overview</h2>
<iframe width="100%" height="630" src="https://www.youtube.com/embed/opuvAMp75co" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<p><a href="https://sldn.softlayer.com/ApiVideo02-ObjectMasks.md.html">slides</a></p>
<p>In order to obtain relational data from an object in the API you must declare an object mask in your API call. With standard object masks, relational data is pulled using a SOAP header, an XML-RPC struct or a GET parameter in REST.</p>
<p>Extended object masks make use of a <a href="http://en.wikipedia.org/wiki/Domain-specific_language" target="_blank">Domain-specific language</a> to reduce the effort required to express what data should be returned from the API. In order to support this new method of object mask, a new input method has been added to each protocol.</p>
<h2 id="structure">Structure</h2>
<h3 id="root-node">Root Node</h3>
<p>Extended object masks start from a &ldquo;root node&rdquo; which is the datatype of the object being returned from your API call.</p>
<p>For example, when calling <a href="https://sldn.softlayer.com/reference/services/SoftLayer_Hardware/getObject">SoftLayer_Hardware::getObject</a> the root node will represent a <a href="https://sldn.softlayer.com/reference/datatypes/SoftLayer_Hardware/">SoftLayer_Hardware Object</a> because that is what is returned by SoftLayer_Hardware::getObject, as seen by the <code>Return Values</code> section in the documentation. If my mask is <code>mask[id]</code> that means I want <a href="https://sldn.softlayer.com/reference/datatypes/SoftLayer_Hardware/#id">SoftLayer_Hardware-&gt;id</a>.</p>
<p>So if we were to send <code>mask[]</code> as our object mask for SoftLayer_Hardware::getObject, the entire SoftLayer_Hardware object would be returned as if no mask was included.</p>
<h3 id="property">Property</h3>
<p>A property can be the name of any local or relational property of the returned object type and is appended to the mask with a period: <code>.</code> .</p>
<p><code>mask.networkComponents</code> when used in calling SoftLayer_Hardware::getObject will return the SoftLayer_Hardware object, in addition to an array &ldquo;networkComponents&rdquo; containing the SoftLayer_Network_Components associated with that hardware.</p>
<p>It is possible to chain together multiple properties in order to drill down and receive even relational properties of relational properties.  For example, if we wanted to receive a list of network components related to a specific hardware device, a list of VLANs related to those network components and even the primary subnet of each of those VLANs we could use an object mask:</p>
<p><code>mask.networkComponents.networkVlans.primarySubnet</code>
Multiple properties may be defined by listing in the object mask separated by a comma.</p>
<p><code>mask.networkComponents,mask.primaryIpAddress,mask.billingItem</code></p>
<h3 id="property-set">Property Set</h3>
<p>Property Sets are a way to submit object masks in a nested structure format. A property set is used to declare a list of properties to obtain from an object and is helpful for reducing the verbosity of an object mask.</p>
<p>A property set is a nested, comma-separated list of properties enclosed in brackets <code>[]</code> which follows a property name. Each relational property in an object mask can have brackets appended to it, to go into other objects and relations.
For example <code>mask[networkComponents[ipAddresses[ipAddress]]]</code> can be used to get the ipAddress of every networkComponent on a Hardware_server.</p>
<p>The following masks can be considered equivalent:</p>
<p><code>mask.id,mask.fullyQualifiedDomainName,mask.networkComponents.networkHardware,mask.networkComponents.uplinkComponent]</code></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">mask [
</span></span><span class="line"><span class="cl">    id, fullyQualifiedDomainName,
</span></span><span class="line"><span class="cl">    networkComponents[networkHardware, uplinkComponent]
</span></span><span class="line"><span class="cl">]
</span></span></code></pre></div><h3 id="payload-reduction">Payload reduction</h3>
<p>Any local properties defined in a mask will result in the API returning only the specified local properties of the object. This feature allows for reduction of the API return data size and can help avoid the need for pagination or additional complication.</p>
<p>For example, when invoking <a href="https://sldn.softlayer.com/reference/services/SoftLayer_Hardware/getObject">SoftLayer_Hardware::getObject</a> the following mask may be used to retrieve only the <code>id</code>, <code>fullyQualifiedDomainName</code>, and <code>primaryIpAddress</code> from the <a href="https://sldn.softlayer.com/reference/datatypes/SoftLayer_Hardware/">SoftLayer_Hardware</a> record. In addition, it will return only the  <code>longName</code> from the <code>datacenter</code>, and the  <code>id</code>, <code>name</code>, and <code>port</code> of each  <code>networkComponent</code>.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">mask[
</span></span><span class="line"><span class="cl">    id,fullyQualifiedDomainName,primaryIpAddress,
</span></span><span class="line"><span class="cl">    datacenter[longName],
</span></span><span class="line"><span class="cl">    networkComponents[id,name,port]
</span></span><span class="line"><span class="cl">]
</span></span></code></pre></div><h3 id="type">Type</h3>
<p>By default the type of returned objects will be inferred and is not required. However it is possible to declare a type for a specific property.</p>
<p>A type is defined by placing a parenthesis set after the property name with the type name enclosed. A type will need to be defined when the default property type does not have a particular property that you need.</p>
<p>For example, the <code>controlPanel</code> property is not defined on SoftLayer_Hardware and as such you will get an error if requesting it via <code>mask[controlPanel]</code>&lt; on a call to  <a href="https://sldn.softlayer.com/reference/services/SoftLayer_Account/getHardware/">SoftLayer_Account::getHardware</a>. In order to request the value you must declare the <code>root property</code> to be of a particular type. An example is below.</p>
<p><code>mask(SoftLayer_Hardware_Server)[controlPanel]</code></p>
<p>If necessary, a property may be defined multiple times on the same level with different types.
The mask below is an example for invoking SoftLayer_Search::search with two expected data types to be returned:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">mask[
</span></span><span class="line"><span class="cl">    resource(SoftLayer_Hardware)
</span></span><span class="line"><span class="cl">    [
</span></span><span class="line"><span class="cl">        id,
</span></span><span class="line"><span class="cl">        fullyQualifiedDomainName,
</span></span><span class="line"><span class="cl">        datacenter[longName],
</span></span><span class="line"><span class="cl">        networkComponents[primaryIpAddress]
</span></span><span class="line"><span class="cl">    ],
</span></span><span class="line"><span class="cl">    resource(SoftLayer_Virtual_Guest)
</span></span><span class="line"><span class="cl">    [
</span></span><span class="line"><span class="cl">        id,
</span></span><span class="line"><span class="cl">        fullyQualifiedDomainName,
</span></span><span class="line"><span class="cl">        datacenter[longName],
</span></span><span class="line"><span class="cl">        networkComponents[primaryIpAddress]
</span></span><span class="line"><span class="cl">    ]
</span></span><span class="line"><span class="cl">]
</span></span></code></pre></div><h2 id="filtered-masks">Filtered Masks</h2>
<p>A filtered mask is like a normal object mask, except it allows you to use an objectFilter to restrict the results of non-root relationships.</p>
<p>As an example, lets try to get the Motherboard component for all of our servers. You might try to make an API call to <code>SoftLayer_Account::getHardware()</code> with an objectMask of</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">mask[id,hostname,
</span></span><span class="line"><span class="cl">    components[id,serialNumber,
</span></span><span class="line"><span class="cl">        hardwareComponentModel[description,
</span></span><span class="line"><span class="cl">            hardwareGenericComponentModel[id,
</span></span><span class="line"><span class="cl">                hardwareComponentType[keyName]
</span></span><span class="line"><span class="cl">            ]
</span></span><span class="line"><span class="cl">        ]
</span></span><span class="line"><span class="cl">    ]
</span></span><span class="line"><span class="cl">]
</span></span></code></pre></div><p>and an objectFilter of</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">{&#34;hardware&#34;:
</span></span><span class="line"><span class="cl">    {&#34;components&#34;:
</span></span><span class="line"><span class="cl">        {&#34;hardwareComponentModel&#34;:
</span></span><span class="line"><span class="cl">            {&#34;hardwareGenericComponentModel&#34;:
</span></span><span class="line"><span class="cl">                {&#34;hardwareComponentType&#34;:
</span></span><span class="line"><span class="cl">                    {&#34;keyName&#34;:{&#34;operation&#34;:&#34;MOTHERBOARD&#34;}}
</span></span><span class="line"><span class="cl">                }
</span></span><span class="line"><span class="cl">            }
</span></span><span class="line"><span class="cl">        }
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">}
</span></span></code></pre></div><p>The problem is this will return all Hardware_Server objects that have a motherboard component, which is not quite what we want.</p>
<p>To get all Hardware_Server objects and only their motherboard component, we just need to use <code>filteredMask[]</code> instead of <code>mask[]</code></p>
<p>for an API call that would look something like this:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">curl -u $SL_USER:$SL_APIKEY  &#39;https://api.softlayer.com/rest/v3.1/SoftLayer_Account/getHardware.json?objectMask=filteredMask[id,hostname,components[id,serialNumber,hardwareComponentModel[description,hardwareGenericComponentModel[id,hardwareComponentType[keyName]]]]]&amp;objectFilter={&#34;hardware&#34;:{&#34;components&#34;:{&#34;hardwareComponentModel&#34;:{&#34;hardwareGenericComponentModel&#34;:{&#34;hardwareComponentType&#34;:{&#34;keyName&#34;:{&#34;operation&#34;:&#34;MOTHERBOARD&#34;}}}}}}}&#39;
</span></span></code></pre></div><h2 id="api-interaction">API interaction</h2>
<h3 id="soap">SOAP</h3>
<p>To send the object mask to the SOAP API you will need to provide a <code>SoftLayer_ObjectMask</code> header with the string object mask for the value in the <code>mask</code> property of the header.</p>
<h3 id="xml-rpc">XML-RPC</h3>
<p>The same SoftLayer_ObjectMask header may be provided in the XML-RPC headers section of the request.</p>
<h3 id="rest">REST</h3>
<p>The REST interface will accept the object mask via the <code>objectMask</code> URL parameter.</p>

            </div>
        </div>

    </div>
    <hr>
    <div class="row">
        <div class="col-md-6">
    <div class="well well-sm" style="word-wrap: break-word;"> 
        <strong>Feedback? <span class="fas fa-comment"/></strong>
            <p>
                If this article contains any error, or leaves any of your questions unanswered, please help us out by 
                opening up a github issue.<br>
                <a class="" href="https://github.com/softlayer/githubio_source/issues/new?title=Feedback%20for%20article%20-%20Object-Masks&body=Feedback+regarding%3A%20https%3a%2f%2fsldn.softlayer.com%2farticle%2fobject-masks%2f"> Open an issue</a>
                <i class="fab fa-github" alt="github"></i>
            </p>
    </div>
</div>
    </div>
<footer>
    <div class="row">
        <div class="col-sm-12">
            <p>&copy; SoftLayer 2022<br>
            Built with <a href="https://github.com/spf13/hugo">Hugo</a></p>
        </div>
    </div>
</footer>
</div>

    <script src="https://sldn.softlayer.com/js/jquery.js"></script>
    <script src="https://sldn.softlayer.com/js/bootstrap.js"></script>
</body>
</html>

