<!doctype html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="SoftLayer API Examples, implementations, and release notes.">
    <meta name="author" content="SoftLayer">

    <title>Events and Notifications - https://sldn.softlayer.com/</title>
    <link rel="canonical" href="https://sldn.softlayer.com/article/Events/">
        <link href="https://sldn.softlayer.com/css/main.css" rel="stylesheet">
    <link href="https://sldn.softlayer.com/css/bootstrap.css" rel="stylesheet">
    <link href="https://sldn.softlayer.com/css/custom.css" rel="stylesheet">
    <link href="https://sldn.softlayer.com/css/monokai.css" rel="stylesheet">
    <link href="https://sldn.softlayer.com/css/highlight/solarized_dark.css" rel="stylesheet">
    

    <script src="https://sldn.softlayer.com/js/highlight.pack.js"></script>

    <script>hljs.initHighlightingOnLoad();</script>
    <link rel="shortcut icon" href="https://sldn.softlayer.com/img/favicon.ico" type="image/x-icon" />
	<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Lato" />
            

    <script src="https://sldn.softlayer.com/js/jquery-3.3.1.min.js"></script> 
    <script src="https://sldn.softlayer.com/js/sldn.js"></script>


    <link href="https://sldn.softlayer.com/fontawesome/css/fontawesome.min.css" rel="stylesheet" type="text/css">
    <link href="https://sldn.softlayer.com/fontawesome/css/brands.min.css" rel="stylesheet" type="text/css">
    <link href="https://sldn.softlayer.com/fontawesome/css/solid.min.css" rel="stylesheet" type="text/css">
    
    <script defer src="https://sldn.softlayer.com/fontawesome/js/solid.min.js"></script>
    <script defer src="https://sldn.softlayer.com/fontawesome/js/brands.min.js"></script>
    <script defer src="https://sldn.softlayer.com/fontawesome/js/fontawesome.min.js"></script>

    <script>
        var head = document.getElementsByTagName('head')[0]
        var style = document.createElement('link')
        style.type = 'text/css'
        style.rel = 'stylesheet'
        style.id = "dark-theme"
        if (localStorage.getItem("dark-mode-theme") == "dark") {
            style.href = '/css/dark.css'
        } else {
            style.href = '/css/light.css'
        }
        head.append(style)
    </script>

    <script>
		$(document).ready(function() {
			$('table').addClass("table table-hover table-striped")
            setThemeMode(localStorage.getItem("dark-mode-theme") || "dark");
		})
	</script>
    
<script async src="https://www.googletagmanager.com/gtag/js?id=G-9XPZ9ZBSJE"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-9XPZ9ZBSJE', { 'anonymize_ip': false });
}
</script>

</head>

<body>
    <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
        <div class="nav-container">
            <div class="navbar-header" style="width: 150px">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                    <span class="sr-only">Toggle Navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="https://sldn.softlayer.com/">SoftLayer API</a>
            </div>

            <div class="navbar-header" style="width: calc(100% - 350px)">
                <ul class="nav navbar-nav" style="width: 100%">
                    
                        <li><a href="https://sldn.softlayer.com/article/">Articles</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/reference/softlayerapi">Docs</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/go/">Go</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/java/">Java</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/php/">PHP</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/python/">Python</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/rest/">Rest</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/ruby/">Ruby</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/tools/">Tools</a></li>
                    
                    <li class="nav-item">
                        <a id="dark-toggle" class="dark-mode-toggle" aria-label="dark-mode-toggle" style="color: var(--Red); font-size: 20px">
                            <i class="fas fa-sun"></i>
                        </a>
                    </li>
                </ul>
            </div>

            <div id="custom-search-input" class="pull-right" style="width: 200px">
              <form class="navbar-form" role="search" method="get" action="https://www.bing.com/search">
                <div class="input-group col-md-12">
                  <input type="text" class="form-control input-md" placeholder="Search" name="q" id="srch-term">
                  <input type="hidden" name="q1" value="site:sldn.softlayer.com" />
                  <div class="input-group-btn">
                    <button class="btn btn-info" type="submit">
                      <i class="glyphicon glyphicon-search"></i>
                    </button>
                  </div>
                </div>
              </form>
            </div>

        </div>
    </nav>

<script type="text/javascript">
const darkIconClass = 'fas fa-moon'
const lightIconClass = 'fas fa-sun'
var darkCSS = $("#dark-theme");
var darkToggleIcon = $("#dark-toggle i");




function setThemeMode(mode) {
    localStorage.setItem("dark-mode-theme", mode);
    if (mode === "dark") {
        darkToggleIcon.attr('class', darkIconClass)
    } else  {
        darkToggleIcon.attr('class', lightIconClass)
    }
}


$("#dark-toggle").click(function () {
  if (darkToggleIcon.attr("class") == lightIconClass) {
    setThemeMode("dark")
  } else if (darkToggleIcon.attr("class") == darkIconClass) {
    setThemeMode("light")
  }
  location.reload();
});
</script>
<div class="container">
    <div class="row main-top">
    
        <div class="col-md-3">
            <div style="word-wrap: break-word;"> 
                <h4>October 14, 2022<br></h4>
            </div>
        </div>
        <div class="col-md-9">
                <strong>Tags <span class="fa fa-tags"/></strong>
                
                    <a class="label label-danger" href="https://sldn.softlayer.com/tags/article">article</a>
                
                    <a class="label label-danger" href="https://sldn.softlayer.com/tags/sldn">sldn</a>
                
                    <a class="label label-danger" href="https://sldn.softlayer.com/tags/Event">Event</a>
                
                    <a class="label label-danger" href="https://sldn.softlayer.com/tags/notification">notification</a>
                          
        </div>
    </div>
    <hr>
    <div class="row">
        <div class="col-md-12">
            <div class="well well-sm article" style="word-wrap: break-word;">
                <div class="article-title">
                    <h1>Events and Notifications</h1>
                    <small>How to manage Event Notifications through the API. Covers both monitoring and maintenance events, and how configure which email addresses get notified about these events.</small>
                </div>
                
                
                
                <h1 id="the-basics">The Basics</h1>
<p>There are two types of Events that the SoftLayer API deals with.</p>
<ol>
<li>Maintenance Events</li>
</ol>
<p>These are the Classic Infrastructure <a href="https://cloud.ibm.com/classic/event/planned">Planned</a>, <a href="https://cloud.ibm.com/classic/event/unplanned">Unplanned</a> and <a href="https://cloud.ibm.com/classic/event/announcement">Announcement</a> events in the portal. These events <em>DO NOT</em> include other cloud.ibm.com services and notifications. <em>ONLY</em> classic infrastructure.</p>
<ol start="2">
<li>Monitoring Events</li>
</ol>
<p>These are the Hardware and Virtual monitoring events that will let you know if a server has gone down/up.</p>
<p>From the API perspective, these are two separate things, but we will talk about them both in this article since both events can trigger an email alert that we will want to configure.</p>
<h1 id="MaintenanceEvents" class="anchor-link"><a href="#MaintenanceEvents">Maintenance Events</a></h1>
<p>We interact with these events through the <a href="https://sldn.softlayer.com/reference/services/SoftLayer_Notification_Occurrence_Event/">Notification_Occurrence_Event Service</a>. The <a href="https://sldn.softlayer.com/reference/services/SoftLayer_Notification_Occurrence_Event/getAllObjects/">getAllObjects</a> method is the best place to start. By default this method will return all Events ever created on your account, so we will need to use an <a href="https://sldn.softlayer.com/article/object-filters">objectFilter</a> to limit the results to only events we care about.</p>
<h2 id="api-example">API Example</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">curl -u <span class="nv">$SL_USER</span>:<span class="nv">$SL_APIKEY</span>  <span class="s1">&#39;https://api.softlayer.com/rest/v3.1/SoftLayer_Notification_Occurrence_Event/getAllObjects.json?objectMask=mask[id, subject, startDate, endDate, modifyDate, statusCode, acknowledgedFlag, impactedResourceCount, updateCount, systemTicketId, notificationOccurrenceEventType[keyName]]&amp;objectFilter={&#34;notificationOccurrenceEventType&#34;: {&#34;keyName&#34;: {&#34;operation&#34;: &#34;PLANNED&#34;}}, &#34;endDate&#34;: {&#34;operation&#34;: &#34;&gt; sysdate - 2&#34;}, &#34;startDate&#34;: {&#34;operation&#34;: &#34;orderBy&#34;, &#34;options&#34;: [{&#34;name&#34;: &#34;sort&#34;, &#34;value&#34;: [&#34;DESC&#34;]}]}}&amp;resultLimit=0,100&#39;</span>
</span></span></code></pre></div><p>This will get use all the events on our account, and selects the following <a href="https://sldn.softlayer.com/reference/datatypes/SoftLayer_Notification_Occurrence_Event/">SoftLayer_Notification_Occurrence_Event Properties</a></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">objectMask</span> <span class="o">=</span> <span class="n">mask</span><span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="nb">id</span><span class="p">,</span> <span class="n">subject</span><span class="p">,</span> <span class="n">startDate</span><span class="p">,</span> <span class="n">endDate</span><span class="p">,</span> <span class="n">modifyDate</span><span class="p">,</span> <span class="n">statusCode</span><span class="p">,</span> <span class="n">acknowledgedFlag</span><span class="p">,</span> <span class="n">impactedResourceCount</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">updateCount</span><span class="p">,</span> <span class="n">systemTicketId</span><span class="p">,</span> <span class="n">notificationOccurrenceEventType</span><span class="p">[</span><span class="n">keyName</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">]</span>
</span></span></code></pre></div><p>Then this API example will filter the events so only events that are &ldquo;PLANNED&rdquo;, have an endDate within 2 days, and ordered by startDate.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">objectFilter</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;notificationOccurrenceEventType&#34;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&#34;keyName&#34;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&#34;operation&#34;</span><span class="p">:</span> <span class="s2">&#34;PLANNED&#34;</span><span class="p">}},</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;endDate&#34;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&#34;operation&#34;</span><span class="p">:</span> <span class="s2">&#34;&gt; sysdate - 2&#34;</span><span class="p">},</span> 
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;startDate&#34;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&#34;operation&#34;</span><span class="p">:</span> <span class="s2">&#34;orderBy&#34;</span><span class="p">,</span> <span class="s2">&#34;options&#34;</span><span class="p">:</span> <span class="p">[{</span><span class="s2">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;sort&#34;</span><span class="p">,</span> <span class="s2">&#34;value&#34;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&#34;DESC&#34;</span><span class="p">]}]}}</span>
</span></span></code></pre></div><p>With a slight change to the objectFilter, we can get UNPLANNED_INCIDENT events. Notice we changed the event type, and instead of <code>endDate</code> we use <code>modifyDate</code> for these because UNPLANNED_INCIDENTS don&rsquo;t really have an endDate property filled out. I&rsquo;m not sure why.</p>
<p>We also used an absolute date (<code>10-04-2022</code>) as an example on how to use that format. For these Events its important to use the MM-DD-YYYY format for dates instead of the usualy MM/DD/YY format used in other parts of the API.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">objectFilter</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;notificationOccurrenceEventType&#34;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&#34;keyName&#34;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&#34;operation&#34;</span><span class="p">:</span> <span class="s2">&#34;UNPLANNED_INCIDENT&#34;</span><span class="p">}},</span> 
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;modifyDate&#34;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&#34;operation&#34;</span><span class="p">:</span> <span class="s2">&#34;greaterThanDate&#34;</span><span class="p">,</span> <span class="s2">&#34;options&#34;</span><span class="p">:</span> <span class="p">[{</span><span class="s2">&#34;name&#34;</span><span class="p">:</span><span class="s2">&#34;date&#34;</span><span class="p">,</span> <span class="s2">&#34;value&#34;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&#34;10-04-2022&#34;</span><span class="p">]}]},</span> 
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;startDate&#34;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&#34;operation&#34;</span><span class="p">:</span> <span class="s2">&#34;orderBy&#34;</span><span class="p">,</span> <span class="s2">&#34;options&#34;</span><span class="p">:</span> <span class="p">[{</span><span class="s2">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;sort&#34;</span><span class="p">,</span> <span class="s2">&#34;value&#34;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&#34;DESC&#34;</span><span class="p">]}]}}</span>
</span></span></code></pre></div><h2 id="cli-example">CLI Example</h2>
<p>The <a href="https://softlayer-python.readthedocs.io/en/latest/cli/account/#account-events">slcli</a> and <a href="https://cloud.ibm.com/docs/cli?topic=cli-getting-started">ibmcloud sl</a> tools both have an events command that makes getting this information easy.</p>
<p><img src="https://sldn.softlayer.com/img/articles/slcli-account-events.png" alt="Account Events"></p>
<h2 id="acknowledge-events">Acknowledge Events</h2>
<p>If you get tired of seeing &ldquo;You have unread notifications&rdquo; in the classic side of the portal, you can automatically &ldquo;read/Acknowledge&rdquo; these with the API.
<img src="https://sldn.softlayer.com/img/articles/account-notifications.png" alt="Account Notifications"></p>
<p>This <code>slcli</code> command will get all the unacknowledged events on your account. There may be a lot more than show up in the portal from stale events, but we might as well ack those as well.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">slcli -vvv call-api SoftLayer_Notification_Occurrence_Event getAllObjects --mask<span class="o">=</span><span class="s2">&#34;mask[id, subject, startDate, endDate, acknowledgedFlag]&#34;</span> --json-filter<span class="o">=</span><span class="s1">&#39;{&#34;acknowledgedFlag&#34;:{&#34;operation&#34;:&#34;0&#34;},&#34;startDate&#34;: {&#34;operation&#34;: &#34;orderBy&#34;, &#34;options&#34;: [{&#34;name&#34;: &#34;sort&#34;, &#34;value&#34;: [&#34;DESC&#34;]}]}}&#39;</span> --limit<span class="o">=</span><span class="m">50</span>
</span></span></code></pre></div><p>Once we have the Event Id, we just need to call <a href="https://sldn.softlayer.com/reference/services/SoftLayer_Notification_Occurrence_Event/acknowledgeNotification/">SoftLayer_Notification_Occurrence_Event::acknowledgeNotification()</a></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$  slcli -v call-api SoftLayer_Notification_Occurrence_Event acknowledgeNotification --id<span class="o">=</span><span class="m">353435</span>
</span></span><span class="line"><span class="cl">Calling: SoftLayer_Notification_Occurrence_Event::acknowledgeNotification<span class="o">(</span><span class="nv">id</span><span class="o">=</span>353435, <span class="nv">mask</span><span class="o">=</span><span class="s1">&#39;&#39;</span>, <span class="nv">filter</span><span class="o">=</span><span class="s1">&#39;{}&#39;</span>, <span class="nv">args</span><span class="o">=()</span>, <span class="nv">limit</span><span class="o">=</span>None, <span class="nv">offset</span><span class="o">=</span>None<span class="o">))</span>
</span></span><span class="line"><span class="cl">True
</span></span></code></pre></div><p>You can also use the <code>slcli</code> to do this with the following command:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">slcli -v account events --ack-all
</span></span></code></pre></div><p>Also, when viewing events in the portal, the ID you are shown is NOT the SoftLayer_Notification_Occurrence_Event, but the Ticket id.
<img src="https://sldn.softlayer.com/img/articles/account-notifications-details.png" alt="systemTicketId"></p>
<p>In the screenshot, we see the <code>ID</code> is <code>149521921</code>, so if we want to find that Event, we can use the following API call.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># SLCLI Example</span>
</span></span><span class="line"><span class="cl">slcli -vvv call-api SoftLayer_Notification_Occurrence_Event getAllObjects --mask<span class="o">=</span><span class="s2">&#34;mask[id, subject, startDate, endDate, acknowledgedFlag, systemTicketId]&#34;</span> --json-filter<span class="o">=</span><span class="s1">&#39;{&#34;systemTicketId&#34;:{&#34;operation&#34;:&#34;149521921&#34;}}&#39;</span>
</span></span><span class="line"><span class="cl"><span class="c1"># Curl Example</span>
</span></span><span class="line"><span class="cl">curl -u <span class="nv">$SL_USER</span>:<span class="nv">$SL_APIKEY</span> -X GET -H <span class="s2">&#34;Accept: */*&#34;</span> -H <span class="s2">&#34;Accept-Encoding: gzip, deflate, compress&#34;</span>
</span></span><span class="line"><span class="cl"><span class="s1">&#39;https://api.softlayer.com/rest/v3.1/SoftLayer_Notification_Occurrence_Event/getAllObjects.json?objectMask=mask%5Bid%2C+subject%2C+startDate%2C+endDate%2C+acknowledgedFlag%2C+systemTicketId%5D&amp;objectFilter=%7B%22systemTicketId%22%3A+%7B%2
</span></span></span><span class="line"><span class="cl"><span class="s1">2operation%22%3A+%22149521921%22%7D%7D&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>
</span></span><span class="line"><span class="cl">  <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;acknowledgedFlag&#34;</span>: true,
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;endDate&#34;</span>: <span class="s2">&#34;2022-10-24T00:00:00-06:00&#34;</span>,
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;id&#34;</span>: 354139,
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;startDate&#34;</span>: <span class="s2">&#34;2022-10-23T12:00:00-06:00&#34;</span>,
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;subject&#34;</span>: <span class="s2">&#34;Performance/Endurance File and Block Storage Services (PAR01) 23-Oct-2022 18:00 UTC&#34;</span>,
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;systemTicketId&#34;</span>: <span class="m">149521921</span>
</span></span><span class="line"><span class="cl">  <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">]</span>
</span></span></code></pre></div><h2 id="subscribing-and-un-subscribing-to-events">Subscribing and Un-Subscribing to Events</h2>
<p>In the portal, the <a href="https://cloud.ibm.com/user/notifications">Notifications</a> page lets you set which things you want to be emailed for, but some of this can be configured in the Softlayer/Classic API as well.</p>
<h3 id="seeing-your-subscriptions">Seeing your subscriptions</h3>
<p><a href="https://sldn.softlayer.com/reference/services/SoftLayer_Email_Subscription/getAllObjects/">SoftLayer_Email_Subscription::getAllObjects</a> will show what notifications you are subscribed to.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># SLCLI</span>
</span></span><span class="line"><span class="cl">$ slcli -v user notifications
</span></span><span class="line"><span class="cl">Calling: SoftLayer_Email_Subscription::getAllObjects<span class="o">(</span><span class="nv">id</span><span class="o">=</span>None, <span class="nv">mask</span><span class="o">=</span><span class="s1">&#39;mask[enabled]&#39;</span>, <span class="nv">filter</span><span class="o">=</span><span class="s1">&#39;None&#39;</span>, <span class="nv">args</span><span class="o">=()</span>, <span class="nv">limit</span><span class="o">=</span>None, <span class="nv">offset</span><span class="o">=</span>None<span class="o">))</span>
</span></span><span class="line"><span class="cl">┌────┬─────────────────────────────┬────────────────────────────────────────────────────────────────────────────────────────────────────────┬─────────┐
</span></span><span class="line"><span class="cl">│ Id │ Name                        │ Description                                                                                            │ Enabled │
</span></span><span class="line"><span class="cl">├────┼─────────────────────────────┼────────────────────────────────────────────────────────────────────────────────────────────────────────┼─────────┤
</span></span><span class="line"><span class="cl">│ <span class="m">1</span>  │ Order Being Reviewed        │ Email about your order.                                                                                │ True    │
</span></span><span class="line"><span class="cl">│ <span class="m">8</span>  │ High Impact                 │ Maintenances that will or are likely to cause service outages and disruptions                          │ False   │
</span></span><span class="line"><span class="cl">│ <span class="m">15</span> │ Major Impact                │ Important Events such as legal notices, service decommissions or security patches.                     │ False   │
</span></span><span class="line"><span class="cl">│ <span class="m">11</span> │ Severity <span class="m">1</span>                  │ Incidents that cause severe to catastrophic service disruptions affecting multiple customers.          │ False   │
</span></span><span class="line"><span class="cl">│ <span class="m">5</span>  │ Provision Complete - VSI    │ Email when VSI provisioning is complete.                                                               │ False   │
</span></span><span class="line"><span class="cl">│ <span class="m">16</span> │ Minor Impact                │ Important announcements worth being informed including product enhancements.                           │ False   │
</span></span><span class="line"><span class="cl">│ <span class="m">12</span> │ Severity <span class="m">2</span>                  │  Incidents that cause measurable service degradation yet not an actual outage.                         │ False   │
</span></span><span class="line"><span class="cl">│ <span class="m">2</span>  │ Order Approved              │ Email when your order is approved.                                                                     │ False   │
</span></span><span class="line"><span class="cl">│ <span class="m">9</span>  │ Medium Impact               │ Maintenances that will or are likely to cause measurable service degradation yet not an actual outage. │ False   │
</span></span><span class="line"><span class="cl">│ <span class="m">6</span>  │ Provision Complete - Server │ Email when server provisioning details is complete.                                                    │ False   │
</span></span><span class="line"><span class="cl">│ <span class="m">13</span> │ Severity <span class="m">3</span>                  │ Incidents with no evident service disruption due to redundancy.                                        │ False   │
</span></span><span class="line"><span class="cl">│ <span class="m">7</span>  │ Reload Complete             │ Email sent when operating system reload is complete.                                                   │ False   │
</span></span><span class="line"><span class="cl">│ <span class="m">3</span>  │ Order Approved - VSI        │ Email when your VSI order is approved.                                                                 │ False   │
</span></span><span class="line"><span class="cl">│ <span class="m">10</span> │ Low Impact                  │ Maintenances with no service disruption during or after the maintenance.                               │ False   │
</span></span><span class="line"><span class="cl">│ <span class="m">4</span>  │ Order Approved - Server     │ Email when your server order is approved.                                                              │ False   │
</span></span><span class="line"><span class="cl">│ <span class="m">14</span> │ Severity <span class="m">4</span>                  │ A notable incident that does not impact services or operations in any way.                             │ False   │
</span></span><span class="line"><span class="cl">└────┴─────────────────────────────┴────────────────────────────────────────────────────────────────────────────────────────────────────────┴─────────┘
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Curl</span>
</span></span><span class="line"><span class="cl">curl -u <span class="nv">$SL_USER</span>:<span class="nv">$SL_APIKEY</span> -X GET -H <span class="s2">&#34;Accept: */*&#34;</span> -H <span class="s2">&#34;Accept-Encoding: gzip, deflate, compress&#34;</span>  <span class="s1">&#39;https://api.softlayer.com/rest/v3.1/SoftLayer_Email_Subscription/getAllObjects.json?objectMask=mask%5Benabled%5D&#39;</span>
</span></span></code></pre></div><h3 id="enabledisabled-a-subscription">Enable/Disabled a Subscription</h3>
<p>This can easily be done with the Email_Subscription id you want to interact with, and the <a href="https://sldn.softlayer.com/reference/services/SoftLayer_Email_Subscription/enable">SoftLayer_Email_Subscription::enable</a> and <a href="https://sldn.softlayer.com/reference/services/SoftLayer_Email_Subscription/disable">SoftLayer_Email_Subscription::disable</a> API methods.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># SLCLI</span>
</span></span><span class="line"><span class="cl">slcli -vvv user edit-notifications --enable <span class="s1">&#39;High Impact&#39;</span>
</span></span><span class="line"><span class="cl"><span class="c1"># CURL</span>
</span></span><span class="line"><span class="cl">curl -u <span class="nv">$SL_USER</span>:<span class="nv">$SL_APIKEY</span> -X GET -H <span class="s2">&#34;Accept: */*&#34;</span> -H <span class="s2">&#34;Accept-Encoding: gzip, deflate, compress&#34;</span>  <span class="s1">&#39;https://api.softlayer.com/rest/v3.1/SoftLayer_Email_Subscription/8/enable.json&#39;</span>
</span></span></code></pre></div><h1 id="MonitoringEvents" class="anchor-link"><a href="#MonitoringEvents">Monitoring Events</a></h1>
<p>The other type of Event that can generate an email is Monitoring Events. <em>NOTE</em> This is NOT <a href="https://cloud.ibm.com/catalog/services/ibm-cloud-monitoring">IBM Cloud Monitoring</a>, but the free Ping monitoring provided for classic infrastructure hardware and virtual servers that can be found on the <a href="https://cloud.ibm.com/gen1/infrastructure/monitoring">Classic Infrastructure Monitoring</a> page.</p>
<h2 id="view-a-servers-monitors">View A Servers Monitors</h2>
<p><a href="https://softlayer-python.readthedocs.io/en/latest/cli/hardware/#hardware-monitoring">slcli hw monitoring</a> and <a href="https://softlayer-python.readthedocs.io/en/latest/cli/vs/#virtual-monitoring">slcli vs monitoring</a> will let you see the basic monitoring status of a server like you would be able to see from the cloud.ibm.com portal.</p>
<p><img src="https://sldn.softlayer.com/img/articles/slcli-hw-monitoring.png" alt="slcli monitoring"></p>
<p>This information is found in the API from the <a href="https://sldn.softlayer.com/reference/datatypes/SoftLayer_Hardware_Server/#networkMonitors">networkMonitors</a> relationship for both Hardware and Virtual servers.
The status code information can be found on the <a href="https://sldn.softlayer.com/reference/datatypes/SoftLayer_Network_Monitor_Version1_Query_Result/">SoftLayer_Network_Monitor_Version1_Query_Result</a> documentation page.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">slcli --format<span class="o">=</span>json call-api SoftLayer_Hardware_Server getObject --id<span class="o">=</span><span class="m">1721429</span> --mask<span class="o">=</span><span class="s2">&#34;mask[id,hostname,networkMonitors[queryType,lastResult]]&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">{</span>
</span></span><span class="line"><span class="cl">  <span class="s2">&#34;hostname&#34;</span>: <span class="s2">&#34;fotestbaremetal&#34;</span>,
</span></span><span class="line"><span class="cl">  <span class="s2">&#34;id&#34;</span>: 1721429,
</span></span><span class="line"><span class="cl">  <span class="s2">&#34;networkMonitors&#34;</span>: <span class="o">[</span>
</span></span><span class="line"><span class="cl">    <span class="o">{</span>
</span></span><span class="line"><span class="cl">      <span class="s2">&#34;hardwareId&#34;</span>: 1721429,
</span></span><span class="line"><span class="cl">      <span class="s2">&#34;id&#34;</span>: 19610779,
</span></span><span class="line"><span class="cl">      <span class="s2">&#34;ipAddress&#34;</span>: <span class="s2">&#34;111.11.191.243&#34;</span>,
</span></span><span class="line"><span class="cl">      <span class="s2">&#34;lastResult&#34;</span>: <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;finishTime&#34;</span>: <span class="s2">&#34;2022-10-17T13:47:07-06:00&#34;</span>,
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;responseStatus&#34;</span>: 2,
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;responseTime&#34;</span>: 485.36,
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;queryHost&#34;</span>: null
</span></span><span class="line"><span class="cl">      <span class="o">}</span>,
</span></span><span class="line"><span class="cl">      <span class="s2">&#34;queryType&#34;</span>: <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;description&#34;</span>: <span class="s2">&#34;Test ping to address&#34;</span>,
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;id&#34;</span>: 1,
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;monitorLevel&#34;</span>: 0,
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;name&#34;</span>: <span class="s2">&#34;SERVICE PING&#34;</span>
</span></span><span class="line"><span class="cl">      <span class="o">}</span>,
</span></span><span class="line"><span class="cl">      <span class="s2">&#34;queryTypeId&#34;</span>: 1,
</span></span><span class="line"><span class="cl">      <span class="s2">&#34;responseActionId&#34;</span>: 2,
</span></span><span class="line"><span class="cl">      <span class="s2">&#34;status&#34;</span>: <span class="s2">&#34;ON&#34;</span>,
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">  <span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></div><h2 id="view-a-servers-subscribers">View A Server&rsquo;s Subscribers</h2>
<p>To see who will get an email about a monitoring change you need to look up the mapping entry from the User to the Virtual or Hardware entry.
The <a href="https://sldn.softlayer.com/reference/datatypes/SoftLayer_User_Customer_Notification_Hardware/">SoftLayer_User_Customer_Notification_Hardware</a> and <a href="https://sldn.softlayer.com/reference/datatypes/SoftLayer_User_Customer_Notification_Virtual_Guest/">SoftLayer_User_Customer_Notification_Virtual_Guest</a> services handle this.</p>
<p>To find who is getting notified for a Hardware_Server, use <a href="https://sldn.softlayer.com/reference/services/SoftLayer_User_Customer_Notification_Hardware/findByHardwareId/">SoftLayer_User_Customer_Notification_Hardware::findByHardwareId</a>, for Virtual_Guests it is <a href="https://sldn.softlayer.com/reference/services/SoftLayer_User_Customer_Notification_Virtual_Guest/findByGuestId/">SoftLayer_User_Customer_Notification_Virtual_Guest::findByGuestId</a></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1">#SLCLI</span>
</span></span><span class="line"><span class="cl">slcli hw notifications  <span class="m">1721429</span>
</span></span><span class="line"><span class="cl"><span class="c1"># Curl</span>
</span></span><span class="line"><span class="cl">curl -u <span class="nv">$SL_USER</span>:<span class="nv">$SL_APIKEY</span> -X POST  -d <span class="s1">&#39;{&#34;parameters&#34;: [&#34;1721429&#34;]}&#39;</span>
</span></span><span class="line"><span class="cl"><span class="s1">&#39;https://api.softlayer.com/rest/v3.1/SoftLayer_User_Customer_Notification_Hardware/findByHardwareId.json?objectMask=mask%5Bid%2Cuser%5Busername%2Cemail%5D%2Char
</span></span></span><span class="line"><span class="cl"><span class="s1">dware%5Bid%2Chostname%5D%5D&#39;</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>
</span></span><span class="line"><span class="cl">  <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;hardware&#34;</span>: <span class="o">{</span>
</span></span><span class="line"><span class="cl">      <span class="s2">&#34;hostname&#34;</span>: <span class="s2">&#34;fotestbaremetal&#34;</span>,
</span></span><span class="line"><span class="cl">      <span class="s2">&#34;id&#34;</span>: <span class="m">1721429</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>,
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;id&#34;</span>: 1302088,
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;user&#34;</span>: <span class="o">{</span>
</span></span><span class="line"><span class="cl">      <span class="s2">&#34;email&#34;</span>: <span class="s2">&#34;test@us.ibm.com&#34;</span>,
</span></span><span class="line"><span class="cl">      <span class="s2">&#34;username&#34;</span>: <span class="s2">&#34;SL1234&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">  <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">]</span>
</span></span></code></pre></div><h2 id="add-a-subscriber">Add A Subscriber</h2>
<p>To enable an email to get notifications of a monitoring failure, they first have to have a SoftLayer user Id on the account.
To get a list of user ids you can use <code>slcli user list</code></p>
<p>To create a mapping entry use <a href="https://sldn.softlayer.com/reference/services/SoftLayer_User_Customer_Notification_Hardware/createObject/">SoftLayer_User_Customer_Notification_Hardware::createObject</a>, or the <a href="https://sldn.softlayer.com/reference/services/SoftLayer_User_Customer_Notification_Virtual_Guest/createObject/">SoftLayer_User_Customer_Notification_Virtual_Guest::createObject</a> method for a Virtual_Guest.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># SLCLI</span>
</span></span><span class="line"><span class="cl">slcli hw add-notification  <span class="m">1721429</span> --users <span class="m">9734824</span>
</span></span><span class="line"><span class="cl"><span class="c1"># Curl</span>
</span></span><span class="line"><span class="cl">curl -u <span class="nv">$SL_USER</span>:<span class="nv">$SL_APIKEY</span> -X POST -d <span class="s1">&#39;{&#34;parameters&#34;: [{&#34;hardwareId&#34;: &#34;1721429&#34;, &#34;userId&#34;: &#34;9734824&#34;}]}&#39;</span> <span class="s1">&#39;https://api.softlayer.com/rest/v3.1/SoftLayer_User_Customer_Notification_Hardware/createObject.json&#39;</span>
</span></span></code></pre></div><h2 id="remove-a-subscriber">Remove A Subscriber</h2>
<p><a href="https://sldn.softlayer.com/reference/services/SoftLayer_User_Customer_Notification_Hardware/deleteObjects/">SoftLayer_User_Customer_Notification_Hardware::deleteObjects</a> and <a href="https://sldn.softlayer.com/reference/services/SoftLayer_User_Customer_Notification_Virtual_Guest/deleteObjects/">SoftLayer_User_Customer_Notification_Virtual_Guest::deleteObjects</a> will remove a notification mapping, thus removing that user from getting email alerts for that server.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># SLCLI</span>
</span></span><span class="line"><span class="cl">slcli -vvv   call-api  SoftLayer_User_Customer_Notification_Hardware deleteObjects  <span class="s1">&#39;[{&#34;id&#34;:1302088}]&#39;</span>
</span></span><span class="line"><span class="cl"><span class="c1">#Curl</span>
</span></span><span class="line"><span class="cl">curl -u <span class="nv">$SL_USER</span>:<span class="nv">$SL_APIKEY</span> -X POST  -d <span class="s1">&#39;{&#34;parameters&#34;: [[{&#34;id&#34;: 1302088}]]}&#39;</span>
</span></span><span class="line"><span class="cl"><span class="err">&#39;</span>https://api.softlayer.com/rest/v3.1/SoftLayer_User_Customer_Notification_Hardware/deleteObjects.json
</span></span></code></pre></div>
            </div>
        </div>

    </div>
    <hr>
    <div class="row">
        <div class="col-md-6">
    <div class="well well-sm footer" style="word-wrap: break-word;"> 
        <strong>Feedback? <span class="fas fa-comment"/></strong>
            <p>
                If this article contains any error, or leaves any of your questions unanswered, please help us out by 
                opening up a github issue.<br>
                <a class="" href="https://github.com/softlayer/githubio_source/issues/new?title=Feedback%20for%20article%20-%20Events%20and%20Notifications&body=Feedback+regarding%3A%20https%3a%2f%2fsldn.softlayer.com%2farticle%2fEvents%2f"> Open an issue</a>
                <i class="fab fa-github" alt="github"></i>
                <span> - </span>
                <a class="" href="https://github.com/softlayer/githubio_source/edit/master/content/article/article/Events.md.md" style="text-align: right;"> Quick Edit</a>
                <i class="fab fa-github" alt="github"></i>

            </p>
    </div>
</div>

    </div>
<footer>
    <div class="row">
        <div class="col-sm-12 footer">
            <p>&copy; SoftLayer 2024<br>
            Built with <a href="https://github.com/spf13/hugo">Hugo</a></p>
        </div>
    </div>
</footer>
</div>

    <script src="https://sldn.softlayer.com/js/jquery.js"></script>
    <script src="https://sldn.softlayer.com/js/bootstrap.js"></script>
</body>
</html>

