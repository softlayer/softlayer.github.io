<!doctype html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="SoftLayer API Examples, implementations, and release notes.">
    <meta name="author" content="SoftLayer">

    <title>The SoftLayer Golang Library - https://sldn.softlayer.com/</title>
    <link rel="canonical" href="https://sldn.softlayer.com/article/golang/">
        <link href="https://sldn.softlayer.com/css/main.css" rel="stylesheet">
    <link href="https://sldn.softlayer.com/css/bootstrap.css" rel="stylesheet">
    <link href="https://sldn.softlayer.com/css/custom.css" rel="stylesheet">
    <link href="https://sldn.softlayer.com/css/monokai.css" rel="stylesheet">
    <link href="https://sldn.softlayer.com/css/highlight/solarized_dark.css" rel="stylesheet">

    <script src="https://sldn.softlayer.com/js/highlight.pack.js"></script>

    <script>hljs.initHighlightingOnLoad();</script>
    <link rel="shortcut icon" href="https://sldn.softlayer.com/img/favicon.ico" type="image/x-icon" />
	<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Lato" />
            

    <script src="https://sldn.softlayer.com/js/jquery-3.3.1.min.js"></script> 
    <script src="https://sldn.softlayer.com/js/sldn.js"></script>


    <link href="https://sldn.softlayer.com/fontawesome/css/fontawesome.min.css" rel="stylesheet" type="text/css">
    <link href="https://sldn.softlayer.com/fontawesome/css/brands.min.css" rel="stylesheet" type="text/css">
    <link href="https://sldn.softlayer.com/fontawesome/css/solid.min.css" rel="stylesheet" type="text/css">
    
    <script defer src="https://sldn.softlayer.com/fontawesome/js/solid.min.js"></script>
    <script defer src="https://sldn.softlayer.com/fontawesome/js/brands.min.js"></script>
    <script defer src="https://sldn.softlayer.com/fontawesome/js/fontawesome.min.js"></script>

    <script>
		$(document).ready(function() {
			$('table').addClass("table table-hover table-striped")
		})
	</script>
   
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-9XPZ9ZBSJE"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-9XPZ9ZBSJE');
</script>
</head>

<body>
    <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                    <span class="sr-only">Toggle Navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="https://sldn.softlayer.com/">SoftLayer API</a>
            </div>
            <div class="collapse navbar-collapse navbar-ex1-collapse">
                <ul class="nav navbar-nav">
                    
                        <li><a href="https://sldn.softlayer.com/article/">Articles</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/reference/softlayerapi">Documentation</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/go/">Go</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/java/">Java</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/perl/">Perl</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/php/">PHP</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/python/">Python</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/rest/">Rest</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/ruby/">Ruby</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/tools/">Tools</a></li>
                    

                    
                </ul>
                <div id="custom-search-input" class="pull-right">
                  <form class="navbar-form" role="search" method="get" action="https://www.bing.com/search">
                    <div class="input-group col-md-12">
                      <input type="text" class="form-control input-md" placeholder="Search" name="q" id="srch-term">
                      <input type="hidden" name="q1" value="site:sldn.softlayer.com" />
                      <div class="input-group-btn">
                        <button class="btn btn-info" type="submit">
                          <i class="glyphicon glyphicon-search"></i>
                        </button>
                      </div>
                    </div>
                  </form>
                </div>
            </div>
        </div>
    </nav>

<div class="container">
    <div class="row">
    
        <div class="col-md-3">
            <div style="word-wrap: break-word;"> 
                <h4>August 16, 2021<br></h4>
            </div>
        </div>
        <div class="col-md-9">
                <strong>Tags <span class="fa fa-tags"/></strong>
                
                    <a class="label label-danger" href="https://sldn.softlayer.com/tags/tools">tools</a>
                
                    <a class="label label-danger" href="https://sldn.softlayer.com/tags/slcli">slcli</a>
                
                    <a class="label label-danger" href="https://sldn.softlayer.com/tags/article">article</a>
                
                    <a class="label label-danger" href="https://sldn.softlayer.com/tags/go">go</a>
                          
        </div>
    </div>
    <hr>
    <div class="row">
        <div class="col-md-12">
            <div class="well well-sm article" style="word-wrap: break-word;">
                <div class="article-title">
                    <h1>The SoftLayer Golang Library</h1>
                    <small>Covers how to use the Golang library to make API calls, along with some basics of the IBMCLOUD cli tool, which is written in golang.</small>
                </div>
                
                
                
                <h2 id="the-basics">The Basics</h2>
<ul>
<li><a href="https://github.com/softlayer/softlayer-go">softlayer-go</a> project homepage. Contains the source code for the library, and a place to submit feature requests and bug reports</li>
<li><a href="https://sldn.softlayer.com/go/">Golang Example Library</a> A collection of examples on how to use softlayer-go to work with the SL API.</li>
<li><a href="https://github.com/softlayer/softlayer-cli">IBMCLOUD SL</a> contains the source code for the <code>ibmcloud sl</code> command, any issues with that plugin should be reported to the github page.</li>
</ul>
<hr>
<h2 id="authentication">Authentication</h2>
<p>The first thing we need to do before making API calls, is setup our authentication.</p>
<p>Every program that uses the softlayer-go library will first create a Session object to interact with and make API calls through. This Session object will be defined as follows for these examples</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nx">main</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="s">&#34;github.com/softlayer/softlayer-go/datatypes&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s">&#34;github.com/softlayer/softlayer-go/filter&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s">&#34;github.com/softlayer/softlayer-go/services&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s">&#34;github.com/softlayer/softlayer-go/session&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s">&#34;github.com/softlayer/softlayer-go/sl&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">SLSession</span> <span class="p">=</span> <span class="nx">session</span><span class="p">.</span><span class="nf">New</span><span class="p">()</span>
</span></span></code></pre></div><blockquote>
<p>NOTE: not all of those imports will be used in all examples, but it is a good starting point and highlights what is commonly used.</p>
</blockquote>
<p>When a new <a href="https://github.com/softlayer/softlayer-go#sessions">Session</a> is established, it gets the authentication information from the following sources.</p>
<h4 id="softlayer-config" class="anchor-link"><a href="#softlayer-config">The ~/.softlayer config</a></h4>
<p>Like with the <a href="https://github.com/softlayer/softlayer-python">softlayer-python</a> project, softlayer-go reads from the <code>~/.softlayer</code> configuration file to find any authentication information.</p>
<p>The basic format is like this:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">[softlayer]
</span></span><span class="line"><span class="cl">username = &lt;your username&gt;
</span></span><span class="line"><span class="cl">api_key = &lt;your api key&gt;
</span></span><span class="line"><span class="cl">endpoint_url = &lt;optional&gt;
</span></span><span class="line"><span class="cl">timeout = &lt;optional&gt;
</span></span></code></pre></div><h4 id="softlayer-environment" class="anchor-link"><a href="#softlayer-environment">Environment Variables</a></h4>
<p>softlayer-go reads from the following Environmental Variables, taking precedent over the configuration file.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">SL_USERNAME or SOFTLAYER_USERNAME
</span></span><span class="line"><span class="cl">SL_API_KEY or SOFTLAYER_API_KEY
</span></span><span class="line"><span class="cl">SL_ENDPOINT_URL or SOFTLAYER_ENDPOINT_URL
</span></span><span class="line"><span class="cl">SL_TIMEOUT or SOFTLAYER_TIMEOUT
</span></span></code></pre></div><hr>
<h2 id="making-api-calls" class="anchor-link"><a href="#making-api-calls">Making API Calls</a></h2>
<p>Now that we have an authenticated Session created, we are almost ready to make API calls.</p>
<h4 id="sl-services" class="anchor-link"><a href="#sl-services">SoftLayer Service Classes</a></h4>
<p>The softlayer-go library groups each SL API service by that service&rsquo;s group. For example the <a href="https://github.com/softlayer/softlayer-go/blob/master/services/hardware.go">softlayer-go/services/hardware</a> file contains the <a href="https://sldn.softlayer.com/reference/services/SoftLayer_Hardware/">SoftLayer_Hardware</a>, <a href="https://sldn.softlayer.com/reference/services/SoftLayer_Hardware_Server/">SoftLayer_Hardware_Server</a> and <a href="https://sldn.softlayer.com/reference/services/SoftLayer_Hardware_Component_Model/">SoftLayer_Hardware_Component_Model</a> classes, among others. If you are looking at the SLDN documentation, the last tag on the service&rsquo;s SLDN page will tell you which group that service belongs to, and thus which class definition file it exists in.</p>
<p>These service and datatype files are kept updated on a monthly basis if you are using the latest version of the softlayer-go library. While generally these class definitions are only added to, rarely they do change and when that happens you need to either get the newest copy of this library, or update the library services and datatypes manually by running <code>make generate</code> in the softlayer-go project main directory.</p>
<p>Once you know what service and method you want to call, you need to create a new instance of that service and assign it to a variable like this.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="nx">virtualService</span> <span class="o">:=</span> <span class="nx">services</span><span class="p">.</span><span class="nf">GetVirtualGuestService</span><span class="p">(</span><span class="nx">SLSession</span><span class="p">)</span>
</span></span></code></pre></div><h4 id="call-properties" class="anchor-link"><a href="#call-properties">Call properties</a></h4>
<p>There are a few other bits of information we might need to send into the API when making our call, and we provide these with a method chain when invoking our API call.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">apiResult = virtualService.Mask(&#34;mask[id,hostname]&#34;).Id(123456).GetObject()
</span></span></code></pre></div><p>That will call <a href="https://sldn.softlayer.com/reference/services/SoftLayer_Virtual_Guest/getObject/">SoftLayer_Virtual_Guest.getObject()</a> with the Id of 123456 and a mask of <code>mask[id,hostname]</code>. You can also specify <a href="https://github.com/softlayer/softlayer-go#object-masks-filters-result-limits">ObjectFilters, Result Limit and Offset</a></p>
<p>Properties of a call include things like</p>
<ul>
<li><a href="article/object-masks/">Object Masks</a></li>
<li><a href="https://sldn.softlayer.com/article/object-filters/">Object Filters</a></li>
<li><a href="https://sldn.softlayer.com/article/using-result-limits-softlayer-api/">Result Limit and Offset</a></li>
<li><a href="https://sldn.softlayer.com/article/using-initialization-parameters-softlayer-api/">Init Parameters</a></li>
</ul>
<p>In the golang library, these are defined in the <a href="https://github.com/softlayer/softlayer-go/blob/master/sl/options.go">sl.Options</a> type.</p>
<h4 id="call-param" class="anchor-link"><a href="#call-param">Call Parameters</a></h4>
<p>When passing parameters into an API call (which are listed explicitly in the documentation, and are different from properties) you do so by adding them to the method&rsquo;s call.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="nx">objectTemplate</span> <span class="o">:=</span> <span class="nx">datatypes</span><span class="p">.</span><span class="nx">Hardware_Server</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">Notes</span><span class="p">:</span> <span class="nx">sl</span><span class="p">.</span><span class="nf">String</span><span class="p">(</span><span class="s">&#34;Just some notes&#34;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="nx">hardwareService</span> <span class="o">:=</span> <span class="nx">services</span><span class="p">.</span><span class="nf">GetHardwareServerService</span><span class="p">(</span><span class="nx">SLSession</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nx">result</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">hardwareService</span><span class="p">.</span><span class="nf">Id</span><span class="p">(</span><span class="mi">123456</span><span class="p">).</span><span class="nf">EditObject</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">objectTemplate</span><span class="p">)</span>
</span></span></code></pre></div><p>From the documentation for <a href="https://sldn.softlayer.com/reference/services/SoftLayer_Hardware_Server/editObject/">SoftLayer_Hardware_Server::editObject</a> we can see that this method takes in 1 parameter, which is of type Hardware_server. If a method takes in more than 1 parameter, these will be specified in order, but NOT by name as listed in the documentation. The name in the documentation is just to give you an idea what that parameter is for, there is no way to send in parameters by name.</p>
<h4 id="error-checking" class="anchor-link"><a href="#error-checking">Error Checking</a></h4>
<p>Every API call will return an error object as well as a result object. The <a href="https://github.com/softlayer/softlayer-go#handling-errors">softlayer-go readme</a> has some good examples on this, but the basics would look like this.</p>
<blockquote>
<p>Note that <a href="https://github.com/softlayer/softlayer-go/blob/master/sl/errors.go">sl.Error</a> implements the standard error interface, so it can be handled like any other error, if the above granularity is not needed:</p>
</blockquote>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="nx">_</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">service</span><span class="p">.</span><span class="nf">GetObject</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Error during processing: &#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><hr>
<h2 id="debugging" class="anchor-link"><a href="#debugging">Debugging</a></h2>
<p>Some times it can be useful to see what exact API call the library is making, and to do that simply enable debugging in the Session and the API calls will be logged and printed to STDOUT by default.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="nx">SLSession</span><span class="p">.</span><span class="nx">debug</span> <span class="p">=</span> <span class="nx">True</span>
</span></span><span class="line"><span class="cl"><span class="c1">// If you want to redirect the logs to somewhere else.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">session</span><span class="p">.</span><span class="nx">Logger</span> <span class="p">=</span> <span class="nx">log</span><span class="p">.</span><span class="nf">New</span><span class="p">(</span><span class="nx">os</span><span class="p">.</span><span class="nx">Stderr</span><span class="p">,</span> <span class="s">&#34;[CUSTOMIZED] &#34;</span><span class="p">,</span> <span class="nx">log</span><span class="p">.</span><span class="nx">LstdFlags</span><span class="p">)</span>
</span></span></code></pre></div><p>With debugging enabled, any request sent to the SL API and any response returned will be logged. If you ever need to report any API issues to IBM this output is critical in getting the issue properly resolved.</p>
<hr>
<h2 id="ibmcloud-sl" class="anchor-link"><a href="#ibmcloud-sl">Ibmcloud SL</a></h2>
<p>The <a href="https://www.ibm.com/cloud/cli">IBMCLOUD CLI</a> is a tool written in golang, and has a <code>sl</code> subcommand that uses the softlayer-go library to make all of its API calls. If you ever have any issues with this subcommand, make sure to open an issue on our <a href="https://github.com/softlayer/softlayer-cli">softlayer-cli github</a> page to let us know about it.</p>

            </div>
        </div>

    </div>
    <hr>
    <div class="row">
        <div class="col-md-6">
    <div class="well well-sm" style="word-wrap: break-word;"> 
        <strong>Feedback? <span class="fas fa-comment"/></strong>
            <p>
                If this article contains any error, or leaves any of your questions unanswered, please help us out by 
                opening up a github issue.<br>
                <a class="" href="https://github.com/softlayer/githubio_source/issues/new?title=Feedback%20for%20article%20-%20The%20SoftLayer%20Golang%20Library&body=Feedback+regarding%3A%20https%3a%2f%2fsldn.softlayer.com%2farticle%2fgolang%2f"> Open an issue</a>
                <i class="fab fa-github" alt="github"></i>
            </p>
    </div>
</div>
    </div>
<footer>
    <div class="row">
        <div class="col-sm-12">
            <p>&copy; SoftLayer 2022<br>
            Built with <a href="https://github.com/spf13/hugo">Hugo</a></p>
        </div>
    </div>
</footer>
</div>

    <script src="https://sldn.softlayer.com/js/jquery.js"></script>
    <script src="https://sldn.softlayer.com/js/bootstrap.js"></script>
</body>
</html>

