<!doctype html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="SoftLayer API Examples, implementations, and release notes.">
    <meta name="author" content="SoftLayer">

    <title>Order a Virtual and Bare Metal Server by frondend/backend vlan or router - https://sldn.softlayer.com/</title>
    <link rel="canonical" href="https://sldn.softlayer.com/go/order_server_by_vlan_router.go/">
        <link href="https://sldn.softlayer.com/css/main.css" rel="stylesheet">
    <link href="https://sldn.softlayer.com/css/bootstrap.css" rel="stylesheet">
    <link href="https://sldn.softlayer.com/css/custom.css" rel="stylesheet">
    <link href="https://sldn.softlayer.com/css/monokai.css" rel="stylesheet">
    <link href="https://sldn.softlayer.com/css/highlight/solarized_dark.css" rel="stylesheet">
    

    <script src="https://sldn.softlayer.com/js/highlight.pack.js"></script>

    <script>hljs.initHighlightingOnLoad();</script>
    <link rel="shortcut icon" href="https://sldn.softlayer.com/img/favicon.ico" type="image/x-icon" />
	<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Lato" />
            

    <script src="https://sldn.softlayer.com/js/jquery-3.3.1.min.js"></script> 
    <script src="https://sldn.softlayer.com/js/sldn.js"></script>


    <link href="https://sldn.softlayer.com/fontawesome/css/fontawesome.min.css" rel="stylesheet" type="text/css">
    <link href="https://sldn.softlayer.com/fontawesome/css/brands.min.css" rel="stylesheet" type="text/css">
    <link href="https://sldn.softlayer.com/fontawesome/css/solid.min.css" rel="stylesheet" type="text/css">
    
    <script defer src="https://sldn.softlayer.com/fontawesome/js/solid.min.js"></script>
    <script defer src="https://sldn.softlayer.com/fontawesome/js/brands.min.js"></script>
    <script defer src="https://sldn.softlayer.com/fontawesome/js/fontawesome.min.js"></script>

    <script>
        var head = document.getElementsByTagName('head')[0]
        var style = document.createElement('link')
        style.type = 'text/css'
        style.rel = 'stylesheet'
        style.id = "dark-theme"
        if (localStorage.getItem("dark-mode-theme") == "dark") {
            style.href = '/css/dark.css'
        } else {
            style.href = '/css/light.css'
        }
        head.append(style)
    </script>

    <script>
		$(document).ready(function() {
			$('table').addClass("table table-hover table-striped")
            setThemeMode(localStorage.getItem("dark-mode-theme") || "dark");
		})
	</script>
    
<script async src="https://www.googletagmanager.com/gtag/js?id=G-9XPZ9ZBSJE"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-9XPZ9ZBSJE', { 'anonymize_ip': false });
}
</script>

</head>

<body>
    <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
        <div class="nav-container">
            <div class="navbar-header" style="width: 150px">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                    <span class="sr-only">Toggle Navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="https://sldn.softlayer.com/">SoftLayer API</a>
            </div>

            <div class="navbar-header" style="width: calc(100% - 350px)">
                <ul class="nav navbar-nav" style="width: 100%">
                    
                        <li><a href="https://sldn.softlayer.com/article/">Articles</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/reference/softlayerapi">Docs</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/go/">Go</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/java/">Java</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/php/">PHP</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/python/">Python</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/rest/">Rest</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/ruby/">Ruby</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/tools/">Tools</a></li>
                    
                    <li class="nav-item">
                        <a id="dark-toggle" class="dark-mode-toggle" aria-label="dark-mode-toggle" style="color: var(--Red); font-size: 20px">
                            <i class="fas fa-sun"></i>
                        </a>
                    </li>
                </ul>
            </div>

            <div id="custom-search-input" class="pull-right" style="width: 200px">
              <form class="navbar-form" role="search" method="get" action="https://www.bing.com/search">
                <div class="input-group col-md-12">
                  <input type="text" class="form-control input-md" placeholder="Search" name="q" id="srch-term">
                  <input type="hidden" name="q1" value="site:sldn.softlayer.com" />
                  <div class="input-group-btn">
                    <button class="btn btn-info" type="submit">
                      <i class="glyphicon glyphicon-search"></i>
                    </button>
                  </div>
                </div>
              </form>
            </div>

        </div>
    </nav>

<script type="text/javascript">
const darkIconClass = 'fas fa-moon'
const lightIconClass = 'fas fa-sun'
var darkCSS = $("#dark-theme");
var darkToggleIcon = $("#dark-toggle i");




function setThemeMode(mode) {
    localStorage.setItem("dark-mode-theme", mode);
    if (mode === "dark") {
        darkToggleIcon.attr('class', darkIconClass)
    } else  {
        darkToggleIcon.attr('class', lightIconClass)
    }
}


$("#dark-toggle").click(function () {
  if (darkToggleIcon.attr("class") == lightIconClass) {
    setThemeMode("dark")
  } else if (darkToggleIcon.attr("class") == darkIconClass) {
    setThemeMode("light")
  }
  location.reload();
});
</script>
<div class="container">
    <div class="row">
    
        <div class="col-md-3">
            <div style="word-wrap: break-word;"> 
                <h4>June 30, 2021<br></h4>
            </div>
        </div>
        <div class="col-md-9">

                <strong>Classes <span class="fa fa-book"/></strong>
                
                    <a class="label label-primary" href="https://sldn.softlayer.com/reference/services/SoftLayer_Product_Order">SoftLayer_Product_Order</a>
                
                    <a class="label label-primary" href="https://sldn.softlayer.com/reference/services/SoftLayer_Product_Package">SoftLayer_Product_Package</a>
                
                    <a class="label label-primary" href="https://sldn.softlayer.com/reference/services/SoftLayer_Account">SoftLayer_Account</a>
                
                <br>
                <strong>Tags <span class="fa fa-tags"/></strong>
                
                    <a class="label label-danger" href="https://sldn.softlayer.com/tags/order">order</a>
                
                    <a class="label label-danger" href="https://sldn.softlayer.com/tags/vlan">vlan</a>
                
                    <a class="label label-danger" href="https://sldn.softlayer.com/tags/pricing">pricing</a>
                
                    <a class="label label-danger" href="https://sldn.softlayer.com/tags/create">create</a>
                
                    <a class="label label-danger" href="https://sldn.softlayer.com/tags/filter">filter</a>
                
                    <a class="label label-danger" href="https://sldn.softlayer.com/tags/hardware">hardware</a>
                
                    <a class="label label-danger" href="https://sldn.softlayer.com/tags/package">package</a>
                
                    <a class="label label-danger" href="https://sldn.softlayer.com/tags/router">router</a>
                          
        </div>
    </div>
    <hr>
    <div class="row">
		<div class="col-md-12">
            <div class="well well-sm  article" style="word-wrap: break-word;">
                <div class="article-title">
				    <h1>Order a Virtual and Bare Metal Server by frondend/backend vlan or router</h1>
                    <small>Examples to order a Virtual and Bare Metal Server by frondend/backend vlan or router.</small>
                </div>
				
                
				
                <h3 id="order-a-bare-metal-by-frondendbackend-vlan-or-router">Order a Bare Metal by frondend/backend vlan or router.</h3>
<ol>
<li>
<p>Find the package that you want to order. listServerPackages() will filter out all that are not bare metal
servers.</p>
</li>
<li>
<p>Use getServerPrices() to find the item keyNames you want to include in your order. These price IDs can be
included prices array directly, but Iâ€™ve included gatherPriceIds() to match up KeyNames to build a list of price
ids. getServerPrices() will also show the locations available for ordering.</p>
</li>
<li>
<p>listAvailableVlans() if you want to place the server on a specific VLAN.</p>
</li>
<li>
<p>listAvailableRouters() if you want to place the server on a specific router.</p>
</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nx">main</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;encoding/json&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;fmt&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;os&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;github.com/softlayer/softlayer-go/datatypes&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;github.com/softlayer/softlayer-go/filter&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;github.com/softlayer/softlayer-go/services&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;github.com/softlayer/softlayer-go/session&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;github.com/softlayer/softlayer-go/sl&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Create the session and services
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">var</span> <span class="nx">sess</span> <span class="p">=</span> <span class="nx">session</span><span class="p">.</span><span class="nf">New</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">packageService</span> <span class="p">=</span> <span class="nx">services</span><span class="p">.</span><span class="nf">GetProductPackageService</span><span class="p">(</span><span class="nx">sess</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">orderService</span> <span class="p">=</span> <span class="nx">services</span><span class="p">.</span><span class="nf">GetProductOrderService</span><span class="p">(</span><span class="nx">sess</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">accountServer</span> <span class="p">=</span> <span class="nx">services</span><span class="p">.</span><span class="nf">GetAccountService</span><span class="p">(</span><span class="nx">sess</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Parameters will help us to reduce the number of argument in a function.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">Parameters</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">hostname</span>             <span class="kt">string</span>
</span></span><span class="line"><span class="cl">	<span class="nx">domain</span>               <span class="kt">string</span>
</span></span><span class="line"><span class="cl">	<span class="nx">packageId</span>            <span class="kt">int</span>
</span></span><span class="line"><span class="cl">	<span class="nx">hourly</span>               <span class="kt">bool</span>
</span></span><span class="line"><span class="cl">	<span class="nx">location</span>             <span class="kt">string</span>
</span></span><span class="line"><span class="cl">	<span class="nx">items</span>                <span class="p">[]</span><span class="kt">string</span>
</span></span><span class="line"><span class="cl">	<span class="nx">backend</span>              <span class="kt">int</span>
</span></span><span class="line"><span class="cl">	<span class="nx">frontend</span>             <span class="kt">int</span>
</span></span><span class="line"><span class="cl">	<span class="nx">networkComponentType</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm">	Step 1, Find the processor type you want
</span></span></span><span class="line"><span class="cl"><span class="cm">	553  Dual E5-2600 v4 Series (12 Drives)  DUAL_E52600_V4_12_DRIVES  BARE_METAL_CPU
</span></span></span><span class="line"><span class="cl"><span class="cm">
</span></span></span><span class="line"><span class="cl"><span class="cm">	Remove the comment &#39;//&#39; below to get the &#39;listServerPackages()&#39; information.
</span></span></span><span class="line"><span class="cl"><span class="cm">	*/</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nf">ListServerPackage</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//packageId := 553
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">	<span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm">	Step 2, Collect all the pieces you want to order
</span></span></span><span class="line"><span class="cl"><span class="cm">	getServerPrices will list out all the keyNames and cost of components
</span></span></span><span class="line"><span class="cl"><span class="cm">	that can be ordered on a certain package. Will also list the DCs that this
</span></span></span><span class="line"><span class="cl"><span class="cm">	server is available in.
</span></span></span><span class="line"><span class="cl"><span class="cm">
</span></span></span><span class="line"><span class="cl"><span class="cm">	Remove the comment &#39;//&#39; below to &#39;getServerPrices()&#39; information.
</span></span></span><span class="line"><span class="cl"><span class="cm">	*/</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//GetServerPrices(packageId)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">//locationId := 138124
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">	<span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm">	Step 3, Will list all available public and private vlans.
</span></span></span><span class="line"><span class="cl"><span class="cm">
</span></span></span><span class="line"><span class="cl"><span class="cm">	Remove the comment &#39;//&#39; below to &#39;listAvailableVlans()&#39; information.
</span></span></span><span class="line"><span class="cl"><span class="cm">	*/</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//ListAvailableVlans(locationId)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">//pubVlanId := 1111
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">//privVlanId := 2222
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">	<span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm">	Step 4, Will list all available routers.
</span></span></span><span class="line"><span class="cl"><span class="cm">
</span></span></span><span class="line"><span class="cl"><span class="cm">	Remove the comment &#39;//&#39; below to &#39;listAvailableRouters()&#39; information.
</span></span></span><span class="line"><span class="cl"><span class="cm">	*/</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//ListAvailableRouters(locationId)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">//pubRouterId := 3333
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">//privRouterId := 4444
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">	<span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm">	Step 5, To order a bare metal server by backend/frontend vlan.
</span></span></span><span class="line"><span class="cl"><span class="cm">
</span></span></span><span class="line"><span class="cl"><span class="cm">	Remove the comment &#39;//&#39; below to order a bare metal server.
</span></span></span><span class="line"><span class="cl"><span class="cm">	*/</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//locationKeyName := &#34;DALLAS05&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">	<span class="c1">//OrderHardwareServer(packageId, locationKeyName, pubVlanId, privVlanId, &#34;vlan&#34;)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">	<span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm">	Step 6, To order a bare metal server by backend/frontend router.
</span></span></span><span class="line"><span class="cl"><span class="cm">
</span></span></span><span class="line"><span class="cl"><span class="cm">	Remove the comment &#39;//&#39; below to order a bare metal server.
</span></span></span><span class="line"><span class="cl"><span class="cm">	*/</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//OrderHardwareServer(packageId, locationKeyName, pubRouterId, privRouterId, &#34;router&#34;)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">OrderHardwareServer</span><span class="p">(</span><span class="nx">packageId</span> <span class="kt">int</span><span class="p">,</span> <span class="nx">locationKeyName</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">frontend</span> <span class="kt">int</span><span class="p">,</span> <span class="nx">backend</span> <span class="kt">int</span><span class="p">,</span> <span class="nx">networkComponentType</span> <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// KeyNames of the items
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">items</span> <span class="o">:=</span> <span class="p">[]</span><span class="kt">string</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="s">&#34;AUTOMATED_NOTIFICATION&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="s">&#34;MONITORING_HOST_PING&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="s">&#34;NOTIFICATION_EMAIL_AND_TICKET&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="s">&#34;REBOOT_KVM_OVER_IP&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="s">&#34;NESSUS_VULNERABILITY_ASSESSMENT_REPORTING&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="s">&#34;UNLIMITED_SSL_VPN_USERS_1_PPTP_VPN_USER_PER_ACCOUNT&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">		<span class="s">&#34;BANDWIDTH_500_GB&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="s">&#34;1_IP_ADDRESS&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="s">&#34;100_MBPS_REDUNDANT_PUBLIC_PRIVATE_NETWORK_UPLINKS&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">		<span class="s">&#34;DISK_CONTROLLER_NONRAID&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="s">&#34;HARD_DRIVE_1_00_TB_SATA_2&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="s">&#34;RAM_64_GB_DDR4_2133_ECC_NON_REG&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="s">&#34;OS_WINDOWS_2016_FULL_STD_64_BIT&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="s">&#34;INTEL_INTEL_XEON_E52620_V4_2_10&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">parameters</span> <span class="o">:=</span> <span class="nx">Parameters</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">hostname</span><span class="p">:</span>             <span class="s">&#34;myhostname&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="nx">domain</span><span class="p">:</span>               <span class="s">&#34;domain.com&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="nx">backend</span><span class="p">:</span>              <span class="nx">backend</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="nx">frontend</span><span class="p">:</span>             <span class="nx">frontend</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="nx">networkComponentType</span><span class="p">:</span> <span class="nx">networkComponentType</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="nx">items</span><span class="p">:</span>                <span class="nx">items</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="nx">location</span><span class="p">:</span>             <span class="nx">locationKeyName</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="nx">packageId</span><span class="p">:</span>            <span class="nx">packageId</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">prices</span> <span class="o">:=</span> <span class="nf">GetPrices</span><span class="p">(</span><span class="nx">packageId</span><span class="p">,</span> <span class="nx">items</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">// Build the Hardware Server array object.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">hardware</span> <span class="o">:=</span> <span class="nf">BuildArrayHardwareServer</span><span class="p">(</span><span class="nx">parameters</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">// Build the Container_Product_Order with the basic required data.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">containerOrder</span> <span class="o">:=</span> <span class="nx">datatypes</span><span class="p">.</span><span class="nx">Container_Product_Order</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">PackageId</span><span class="p">:</span> <span class="nx">sl</span><span class="p">.</span><span class="nf">Int</span><span class="p">(</span><span class="nx">parameters</span><span class="p">.</span><span class="nx">packageId</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">		<span class="nx">Location</span><span class="p">:</span>  <span class="nx">sl</span><span class="p">.</span><span class="nf">String</span><span class="p">(</span><span class="nx">parameters</span><span class="p">.</span><span class="nx">location</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">		<span class="nx">Hardware</span><span class="p">:</span>  <span class="nx">hardware</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="nx">Prices</span><span class="p">:</span>    <span class="nx">prices</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">// Use verifyOrder() method to check for errors. Replace this with placeOrder() when
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// you are ready to order.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">receipt</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">orderService</span><span class="p">.</span><span class="nf">VerifyOrder</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">containerOrder</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;Unable to verify/place the order: %s&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">// pretty print
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">jsonFormat</span><span class="p">,</span> <span class="nx">jsonErr</span> <span class="o">:=</span> <span class="nx">json</span><span class="p">.</span><span class="nf">MarshalIndent</span><span class="p">(</span><span class="nx">receipt</span><span class="p">,</span> <span class="s">&#34;&#34;</span><span class="p">,</span> <span class="s">&#34;   &#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">jsonErr</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">jsonErr</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nb">string</span><span class="p">(</span><span class="nx">jsonFormat</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">GetServerPrices</span><span class="p">(</span><span class="nx">packageID</span> <span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">mask</span> <span class="o">:=</span> <span class="s">&#34;mask[regions,items[prices],activeServerItems[prices]]&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="nx">result</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">packageService</span><span class="p">.</span><span class="nf">Mask</span><span class="p">(</span><span class="nx">mask</span><span class="p">).</span><span class="nf">Id</span><span class="p">(</span><span class="nx">packageID</span><span class="p">).</span><span class="nf">GetObject</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;Unable to retrieve items: %s\n&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="nx">os</span><span class="p">.</span><span class="nf">Exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;---------------- Locations -------------------&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;| %10s | %20s |\n&#34;</span><span class="p">,</span> <span class="s">&#34;Location Id&#34;</span><span class="p">,</span> <span class="s">&#34;Location Name&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">location</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">result</span><span class="p">.</span><span class="nx">Regions</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;| %10d &#34;</span><span class="p">,</span> <span class="o">*</span><span class="nx">location</span><span class="p">.</span><span class="nx">Location</span><span class="p">.</span><span class="nx">Location</span><span class="p">.</span><span class="nx">Id</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;| %20s |\n&#34;</span><span class="p">,</span> <span class="o">*</span><span class="nx">location</span><span class="p">.</span><span class="nx">Description</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">cores</span> <span class="o">:=</span> <span class="s">&#34;-&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="nx">recurringFee</span> <span class="o">:=</span> <span class="mf">0.0</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;----------------------------------------- Item Prices ------------------------------------------&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;| %10s | %50s | %10s | %10s | %40s |\n&#34;</span><span class="p">,</span> <span class="s">&#34;Price Id&#34;</span><span class="p">,</span> <span class="s">&#34;Description&#34;</span><span class="p">,</span> <span class="s">&#34;Cores&#34;</span><span class="p">,</span> <span class="s">&#34;Monthly Fee&#34;</span><span class="p">,</span> <span class="s">&#34;KeyName&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">item</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">result</span><span class="p">.</span><span class="nx">Items</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">price</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">item</span><span class="p">.</span><span class="nx">Prices</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="k">if</span> <span class="nx">price</span><span class="p">.</span><span class="nx">LocationGroupId</span> <span class="o">==</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="nx">price</span><span class="p">.</span><span class="nx">RecurringFee</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">					<span class="nx">recurringFee</span> <span class="p">=</span> <span class="nb">float64</span><span class="p">(</span><span class="o">*</span><span class="nx">price</span><span class="p">.</span><span class="nx">RecurringFee</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">				<span class="p">}</span>
</span></span><span class="line"><span class="cl">				<span class="k">if</span> <span class="nx">price</span><span class="p">.</span><span class="nx">CapacityRestrictionType</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">					<span class="nx">cores</span> <span class="p">=</span> <span class="nx">fmt</span><span class="p">.</span><span class="nf">Sprintf</span><span class="p">(</span><span class="s">&#34;%s - %s&#34;</span><span class="p">,</span> <span class="o">*</span><span class="nx">price</span><span class="p">.</span><span class="nx">CapacityRestrictionMinimum</span><span class="p">,</span> <span class="o">*</span><span class="nx">price</span><span class="p">.</span><span class="nx">CapacityRestrictionMaximum</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">					<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;| %10d &#34;</span><span class="p">,</span> <span class="o">*</span><span class="nx">price</span><span class="p">.</span><span class="nx">Id</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">					<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;| %50s &#34;</span><span class="p">,</span> <span class="o">*</span><span class="nx">item</span><span class="p">.</span><span class="nx">Description</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">					<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;| %10s &#34;</span><span class="p">,</span> <span class="nx">cores</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">					<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;| %10f &#34;</span><span class="p">,</span> <span class="o">*</span><span class="nx">price</span><span class="p">.</span><span class="nx">RecurringFee</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">					<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;| %40s |\n&#34;</span><span class="p">,</span> <span class="o">*</span><span class="nx">item</span><span class="p">.</span><span class="nx">KeyName</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">				<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">					<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;| %10d &#34;</span><span class="p">,</span> <span class="o">*</span><span class="nx">price</span><span class="p">.</span><span class="nx">Id</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">					<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;| %50s &#34;</span><span class="p">,</span> <span class="o">*</span><span class="nx">item</span><span class="p">.</span><span class="nx">Description</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">					<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;| %10s &#34;</span><span class="p">,</span> <span class="nx">cores</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">					<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;| %10f &#34;</span><span class="p">,</span> <span class="o">*</span><span class="nx">price</span><span class="p">.</span><span class="nx">RecurringFee</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">					<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;| %40s |\n&#34;</span><span class="p">,</span> <span class="o">*</span><span class="nx">item</span><span class="p">.</span><span class="nx">KeyName</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">				<span class="p">}</span>
</span></span><span class="line"><span class="cl">			<span class="p">}</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">ListServerPackage</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">objFilter</span> <span class="o">:=</span> <span class="nx">filter</span><span class="p">.</span><span class="nf">Path</span><span class="p">(</span><span class="s">&#34;type.keyName&#34;</span><span class="p">).</span><span class="nf">Eq</span><span class="p">(</span><span class="s">&#34;BARE_METAL_CPU&#34;</span><span class="p">).</span><span class="nf">Build</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	<span class="nx">packages</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">packageService</span><span class="p">.</span><span class="nf">Mask</span><span class="p">(</span><span class="s">&#34;mask[type]&#34;</span><span class="p">).</span><span class="nf">Filter</span><span class="p">(</span><span class="nx">objFilter</span><span class="p">).</span><span class="nf">GetAllObjects</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;Package %s doesn&#39;t exists\n&#34;</span><span class="p">,</span> <span class="s">&#34;BARE_METAL_CPU&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="nx">os</span><span class="p">.</span><span class="nf">Exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;| %10s | %45s | %45s | %20s |\n&#34;</span><span class="p">,</span> <span class="s">&#34;Id&#34;</span><span class="p">,</span> <span class="s">&#34;Name&#34;</span><span class="p">,</span> <span class="s">&#34;KeyName&#34;</span><span class="p">,</span> <span class="s">&#34;Type&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">item</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">packages</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;| %10d &#34;</span><span class="p">,</span> <span class="o">*</span><span class="nx">item</span><span class="p">.</span><span class="nx">Id</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;| %45s &#34;</span><span class="p">,</span> <span class="o">*</span><span class="nx">item</span><span class="p">.</span><span class="nx">Name</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;| %45s &#34;</span><span class="p">,</span> <span class="o">*</span><span class="nx">item</span><span class="p">.</span><span class="nx">KeyName</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;| %20s |\n&#34;</span><span class="p">,</span> <span class="o">*</span><span class="nx">item</span><span class="p">.</span><span class="nx">Type</span><span class="p">.</span><span class="nx">KeyName</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// GetPrices returns the list of prices.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="nf">GetPrices</span><span class="p">(</span><span class="nx">packageID</span> <span class="kt">int</span><span class="p">,</span> <span class="nx">itemKeyNames</span> <span class="p">[]</span><span class="kt">string</span><span class="p">)</span> <span class="p">[]</span><span class="nx">datatypes</span><span class="p">.</span><span class="nx">Product_Item_Price</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">objMask</span> <span class="o">:=</span> <span class="s">&#34;mask[id,itemCategory,keyName,prices[categories]]&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">items</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">packageService</span><span class="p">.</span><span class="nf">Mask</span><span class="p">(</span><span class="nx">objMask</span><span class="p">).</span><span class="nf">Id</span><span class="p">(</span><span class="nx">packageID</span><span class="p">).</span><span class="nf">GetItems</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;Unable to retrieve items: %s\n&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="nx">os</span><span class="p">.</span><span class="nf">Exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">prices</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">([]</span><span class="nx">datatypes</span><span class="p">.</span><span class="nx">Product_Item_Price</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="nx">itemKeyNames</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">for</span> <span class="nx">idx</span><span class="p">,</span> <span class="nx">itemKeyName</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">itemKeyNames</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">prices</span><span class="p">[</span><span class="nx">idx</span><span class="p">].</span><span class="nx">Id</span><span class="p">,</span> <span class="nx">err</span> <span class="p">=</span> <span class="nf">GetPriceIDIfMatch</span><span class="p">(</span><span class="nx">itemKeyName</span><span class="p">,</span> <span class="nx">items</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="nx">os</span><span class="p">.</span><span class="nf">Exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="nx">prices</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// GetPriceIDIfMatch returns a priceID or error if keyName doesnt exists.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="nf">GetPriceIDIfMatch</span><span class="p">(</span><span class="nx">keyName</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">items</span> <span class="p">[]</span><span class="nx">datatypes</span><span class="p">.</span><span class="nx">Product_Item</span><span class="p">)</span> <span class="p">(</span><span class="nx">priceID</span> <span class="o">*</span><span class="kt">int</span><span class="p">,</span> <span class="nx">err</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="kd">var</span> <span class="nx">matchingItem</span> <span class="nx">datatypes</span><span class="p">.</span><span class="nx">Product_Item</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// find the item keyname
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">item</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">items</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">if</span> <span class="nx">keyName</span> <span class="o">==</span> <span class="o">*</span><span class="nx">item</span><span class="p">.</span><span class="nx">KeyName</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="nx">matchingItem</span> <span class="p">=</span> <span class="nx">item</span>
</span></span><span class="line"><span class="cl">			<span class="k">break</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// returns error if keyName doesn&#39;t exists in the items list
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">if</span> <span class="nx">matchingItem</span><span class="p">.</span><span class="nx">KeyName</span> <span class="o">==</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span> <span class="kc">nil</span><span class="p">,</span> <span class="nx">fmt</span><span class="p">.</span><span class="nf">Errorf</span><span class="p">(</span><span class="s">&#34;The item %s doesn&#39;t exists in the package&#34;</span><span class="p">,</span> <span class="nx">keyName</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// find the standard priceID
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">price</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">matchingItem</span><span class="p">.</span><span class="nx">Prices</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">if</span> <span class="nx">price</span><span class="p">.</span><span class="nx">LocationGroupId</span> <span class="o">==</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="nx">priceID</span> <span class="p">=</span> <span class="nx">price</span><span class="p">.</span><span class="nx">Id</span>
</span></span><span class="line"><span class="cl">			<span class="k">break</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">return</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// BuildArrayHardwareServer builds the esqueleton of Hardware Server array.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="nf">BuildArrayHardwareServer</span><span class="p">(</span><span class="nx">args</span> <span class="nx">Parameters</span><span class="p">)</span> <span class="p">[]</span><span class="nx">datatypes</span><span class="p">.</span><span class="nx">Hardware</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">hardware</span> <span class="o">:=</span> <span class="p">[]</span><span class="nx">datatypes</span><span class="p">.</span><span class="nx">Hardware</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="nx">Hostname</span><span class="p">:</span> <span class="nx">sl</span><span class="p">.</span><span class="nf">String</span><span class="p">(</span><span class="nx">args</span><span class="p">.</span><span class="nx">hostname</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">			<span class="nx">Domain</span><span class="p">:</span>   <span class="nx">sl</span><span class="p">.</span><span class="nf">String</span><span class="p">(</span><span class="nx">args</span><span class="p">.</span><span class="nx">domain</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">		<span class="p">},</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">args</span><span class="p">.</span><span class="nx">networkComponentType</span> <span class="o">==</span> <span class="s">&#34;vlan&#34;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">if</span> <span class="nx">args</span><span class="p">.</span><span class="nx">backend</span> <span class="p">&gt;</span> <span class="mi">0</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="nx">hardware</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">PrimaryBackendNetworkComponent</span> <span class="p">=</span> <span class="o">&amp;</span><span class="nx">datatypes</span><span class="p">.</span><span class="nx">Network_Component</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">				<span class="nx">NetworkVlan</span><span class="p">:</span> <span class="o">&amp;</span><span class="nx">datatypes</span><span class="p">.</span><span class="nx">Network_Vlan</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">					<span class="nx">Id</span><span class="p">:</span> <span class="nx">sl</span><span class="p">.</span><span class="nf">Int</span><span class="p">(</span><span class="nx">args</span><span class="p">.</span><span class="nx">backend</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">				<span class="p">},</span>
</span></span><span class="line"><span class="cl">			<span class="p">}</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">		<span class="k">if</span> <span class="nx">args</span><span class="p">.</span><span class="nx">frontend</span> <span class="p">&gt;</span> <span class="mi">0</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="nx">hardware</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">PrimaryNetworkComponent</span> <span class="p">=</span> <span class="o">&amp;</span><span class="nx">datatypes</span><span class="p">.</span><span class="nx">Network_Component</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">				<span class="nx">NetworkVlan</span><span class="p">:</span> <span class="o">&amp;</span><span class="nx">datatypes</span><span class="p">.</span><span class="nx">Network_Vlan</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">					<span class="nx">Id</span><span class="p">:</span> <span class="nx">sl</span><span class="p">.</span><span class="nf">Int</span><span class="p">(</span><span class="nx">args</span><span class="p">.</span><span class="nx">frontend</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">				<span class="p">},</span>
</span></span><span class="line"><span class="cl">			<span class="p">}</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">if</span> <span class="nx">args</span><span class="p">.</span><span class="nx">backend</span> <span class="p">&gt;</span> <span class="mi">0</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="nx">hardware</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">PrimaryBackendNetworkComponent</span> <span class="p">=</span> <span class="o">&amp;</span><span class="nx">datatypes</span><span class="p">.</span><span class="nx">Network_Component</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">				<span class="nx">Router</span><span class="p">:</span> <span class="o">&amp;</span><span class="nx">datatypes</span><span class="p">.</span><span class="nx">Hardware</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">					<span class="nx">Id</span><span class="p">:</span> <span class="nx">sl</span><span class="p">.</span><span class="nf">Int</span><span class="p">(</span><span class="nx">args</span><span class="p">.</span><span class="nx">backend</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">				<span class="p">},</span>
</span></span><span class="line"><span class="cl">			<span class="p">}</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">		<span class="k">if</span> <span class="nx">args</span><span class="p">.</span><span class="nx">frontend</span> <span class="p">&gt;</span> <span class="mi">0</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="nx">hardware</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">PrimaryNetworkComponent</span> <span class="p">=</span> <span class="o">&amp;</span><span class="nx">datatypes</span><span class="p">.</span><span class="nx">Network_Component</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">				<span class="nx">Router</span><span class="p">:</span> <span class="o">&amp;</span><span class="nx">datatypes</span><span class="p">.</span><span class="nx">Hardware</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">					<span class="nx">Id</span><span class="p">:</span> <span class="nx">sl</span><span class="p">.</span><span class="nf">Int</span><span class="p">(</span><span class="nx">args</span><span class="p">.</span><span class="nx">frontend</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">				<span class="p">},</span>
</span></span><span class="line"><span class="cl">			<span class="p">}</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="nx">hardware</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">ListAvailableVlans</span><span class="p">(</span><span class="nx">locationId</span> <span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">objMask</span> <span class="o">:=</span> <span class="s">&#34;mask[billingItem[location]]&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="nx">objFilter</span> <span class="o">:=</span> <span class="nx">filter</span><span class="p">.</span><span class="nf">Path</span><span class="p">(</span><span class="s">&#34;publicNetworkVlans.billingItem.location.id&#34;</span><span class="p">).</span><span class="nf">Eq</span><span class="p">(</span><span class="nx">locationId</span><span class="p">).</span><span class="nf">Build</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">publicVlans</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">accountServer</span><span class="p">.</span><span class="nf">Mask</span><span class="p">(</span><span class="nx">objMask</span><span class="p">).</span><span class="nf">Filter</span><span class="p">(</span><span class="nx">objFilter</span><span class="p">).</span><span class="nf">GetPublicNetworkVlans</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;Unable to retrieve the publicVlans: %s\n&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="nx">os</span><span class="p">.</span><span class="nf">Exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;---------------------------------- PUBLIC VLANS ---------------------------------------&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;| %10s | %20s |%20s |%20s | \n&#34;</span><span class="p">,</span> <span class="s">&#34;Id&#34;</span><span class="p">,</span> <span class="s">&#34;Name&#34;</span><span class="p">,</span> <span class="s">&#34;VlanNumber&#34;</span><span class="p">,</span> <span class="s">&#34;Location&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">name</span> <span class="o">:=</span> <span class="s">&#34;-&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">publicVlan</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">publicVlans</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">if</span> <span class="nx">publicVlan</span><span class="p">.</span><span class="nx">Name</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="nx">name</span> <span class="p">=</span> <span class="o">*</span><span class="nx">publicVlan</span><span class="p">.</span><span class="nx">Name</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;| %10d &#34;</span><span class="p">,</span> <span class="o">*</span><span class="nx">publicVlan</span><span class="p">.</span><span class="nx">Id</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;| %20s &#34;</span><span class="p">,</span> <span class="nx">name</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;| %20d &#34;</span><span class="p">,</span> <span class="o">*</span><span class="nx">publicVlan</span><span class="p">.</span><span class="nx">VlanNumber</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;| %20s |\n&#34;</span><span class="p">,</span> <span class="o">*</span><span class="nx">publicVlan</span><span class="p">.</span><span class="nx">BillingItem</span><span class="p">.</span><span class="nx">Location</span><span class="p">.</span><span class="nx">LongName</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">objFilterPrivate</span> <span class="o">:=</span> <span class="nx">filter</span><span class="p">.</span><span class="nf">Path</span><span class="p">(</span><span class="s">&#34;privateNetworkVlans.billingItem.location.id&#34;</span><span class="p">).</span><span class="nf">Eq</span><span class="p">(</span><span class="nx">locationId</span><span class="p">).</span><span class="nf">Build</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">privateVlans</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">accountServer</span><span class="p">.</span><span class="nf">Mask</span><span class="p">(</span><span class="nx">objMask</span><span class="p">).</span><span class="nf">Filter</span><span class="p">(</span><span class="nx">objFilterPrivate</span><span class="p">).</span><span class="nf">GetPrivateNetworkVlans</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;Unable to retrieve the privateVlans: %s\n&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="nx">os</span><span class="p">.</span><span class="nf">Exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;---------------------------------- PRIVATE VLANS ----------------------------------&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;| %10s | %20s |%20s |%20s | \n&#34;</span><span class="p">,</span> <span class="s">&#34;Id&#34;</span><span class="p">,</span> <span class="s">&#34;Name&#34;</span><span class="p">,</span> <span class="s">&#34;VlanNumber&#34;</span><span class="p">,</span> <span class="s">&#34;Location&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">privateVlan</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">privateVlans</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;| %10d &#34;</span><span class="p">,</span> <span class="o">*</span><span class="nx">privateVlan</span><span class="p">.</span><span class="nx">Id</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;| %20s &#34;</span><span class="p">,</span> <span class="o">*</span><span class="nx">privateVlan</span><span class="p">.</span><span class="nx">Name</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;| %20d &#34;</span><span class="p">,</span> <span class="o">*</span><span class="nx">privateVlan</span><span class="p">.</span><span class="nx">VlanNumber</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;| %20s |\n&#34;</span><span class="p">,</span> <span class="o">*</span><span class="nx">privateVlan</span><span class="p">.</span><span class="nx">BillingItem</span><span class="p">.</span><span class="nx">Location</span><span class="p">.</span><span class="nx">LongName</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">ListAvailableRouters</span><span class="p">(</span><span class="nx">locationId</span> <span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">objFilter</span> <span class="o">:=</span> <span class="nx">filter</span><span class="p">.</span><span class="nf">Path</span><span class="p">(</span><span class="s">&#34;routers.topLevelLocation.id&#34;</span><span class="p">).</span><span class="nf">Eq</span><span class="p">(</span><span class="nx">locationId</span><span class="p">).</span><span class="nf">Build</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">routers</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">accountServer</span><span class="p">.</span><span class="nf">Filter</span><span class="p">(</span><span class="nx">objFilter</span><span class="p">).</span><span class="nf">GetRouters</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;Unable to retrieve the routers: %s\n&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="nx">os</span><span class="p">.</span><span class="nf">Exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;| %10s | %20s |%20s | \n&#34;</span><span class="p">,</span> <span class="s">&#34;Id&#34;</span><span class="p">,</span> <span class="s">&#34;Hostname&#34;</span><span class="p">,</span> <span class="s">&#34;Location&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">router</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">routers</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;| %10d &#34;</span><span class="p">,</span> <span class="o">*</span><span class="nx">router</span><span class="p">.</span><span class="nx">Id</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;| %20s &#34;</span><span class="p">,</span> <span class="o">*</span><span class="nx">router</span><span class="p">.</span><span class="nx">Hostname</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;| %20s| \n&#34;</span><span class="p">,</span> <span class="o">*</span><span class="nx">router</span><span class="p">.</span><span class="nx">TopLevelLocation</span><span class="p">.</span><span class="nx">LongName</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><h3 id="order-a-virtual-server-by-backendfrontend-vlan-ids">Order a Virtual Server by backend/frontend vlan ids.</h3>
<ol>
<li>
<p>Find the package that you want to order. listServerPackages() will filter out all VIRTUAL_SERVER_INSTANCE.</p>
</li>
<li>
<p>Use getServerPrices() to find the item keyNames you want to include in your order. These price IDs can be
included prices array directly, but Iâ€™ve included gatherPriceIds() to match up KeyNames to build a list of price
ids. getServerPrices() will also show the locations available for ordering.</p>
</li>
<li>
<p>listActivePresets() will list all active presets for a specific package.</p>
</li>
<li>
<p>listAvailableVlans() if you want to place the server on a specific VLAN.</p>
</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nx">main</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;encoding/json&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;fmt&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;os&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;github.com/softlayer/softlayer-go/datatypes&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;github.com/softlayer/softlayer-go/filter&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;github.com/softlayer/softlayer-go/services&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;github.com/softlayer/softlayer-go/session&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;github.com/softlayer/softlayer-go/sl&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Create the session and services
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">var</span> <span class="nx">sess</span> <span class="p">=</span> <span class="nx">session</span><span class="p">.</span><span class="nf">New</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">packageService</span> <span class="p">=</span> <span class="nx">services</span><span class="p">.</span><span class="nf">GetProductPackageService</span><span class="p">(</span><span class="nx">sess</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">orderService</span> <span class="p">=</span> <span class="nx">services</span><span class="p">.</span><span class="nf">GetProductOrderService</span><span class="p">(</span><span class="nx">sess</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">accountServer</span> <span class="p">=</span> <span class="nx">services</span><span class="p">.</span><span class="nf">GetAccountService</span><span class="p">(</span><span class="nx">sess</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Parameters will help us to reduce the number of argument in a function.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">Parameters</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">hostname</span>  <span class="kt">string</span>
</span></span><span class="line"><span class="cl">	<span class="nx">domain</span>    <span class="kt">string</span>
</span></span><span class="line"><span class="cl">	<span class="nx">packageId</span> <span class="kt">int</span>
</span></span><span class="line"><span class="cl">	<span class="nx">hourly</span>    <span class="kt">bool</span>
</span></span><span class="line"><span class="cl">	<span class="nx">location</span>  <span class="kt">string</span>
</span></span><span class="line"><span class="cl">	<span class="nx">items</span>     <span class="p">[]</span><span class="kt">string</span>
</span></span><span class="line"><span class="cl">	<span class="nx">backend</span>   <span class="kt">int</span>
</span></span><span class="line"><span class="cl">	<span class="nx">frontend</span>  <span class="kt">int</span>
</span></span><span class="line"><span class="cl">	<span class="nx">flavor</span>    <span class="kt">int</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm">	Step 1, find the package server type you want
</span></span></span><span class="line"><span class="cl"><span class="cm">	e.g. 835  PUBLIC_CLOUD_SERVER
</span></span></span><span class="line"><span class="cl"><span class="cm">
</span></span></span><span class="line"><span class="cl"><span class="cm">	Remove the comment &#39;//&#39; below to get the &#39;listServerPackages()&#39; information.
</span></span></span><span class="line"><span class="cl"><span class="cm">	*/</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//ListServerPackage()
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">packageId</span> <span class="o">:=</span> <span class="mi">835</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm">	Step 2, Collect all the pieces you want to order
</span></span></span><span class="line"><span class="cl"><span class="cm">	getServerPrices will list out all the keyNames and cost of components
</span></span></span><span class="line"><span class="cl"><span class="cm">	that can be ordered on a certain package. Will also list the DCs that this
</span></span></span><span class="line"><span class="cl"><span class="cm">	server is available in.
</span></span></span><span class="line"><span class="cl"><span class="cm">
</span></span></span><span class="line"><span class="cl"><span class="cm">	Remove the comment &#39;//&#39; below to &#39;getServerPrices()&#39; information.
</span></span></span><span class="line"><span class="cl"><span class="cm">	*/</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//GetServerPrices(packageId)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">//locationId := 138124
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">	<span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm">	Step 3, will list all active presets.
</span></span></span><span class="line"><span class="cl"><span class="cm">
</span></span></span><span class="line"><span class="cl"><span class="cm">	Remove the comment &#39;//&#39; below to &#39;getServerPrices()&#39; information.
</span></span></span><span class="line"><span class="cl"><span class="cm">	*/</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//ListActivePresets(packageId)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">presetId</span> <span class="o">:=</span> <span class="mi">345</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm">	Step 4, Will list all available public and private vlans.
</span></span></span><span class="line"><span class="cl"><span class="cm">
</span></span></span><span class="line"><span class="cl"><span class="cm">	Remove the comment &#39;//&#39; below to &#39;listAvailableVlans()&#39; information.
</span></span></span><span class="line"><span class="cl"><span class="cm">	*/</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//ListAvailableVlans(locationId)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">pubVlanId</span> <span class="o">:=</span> <span class="mi">1111</span>
</span></span><span class="line"><span class="cl">	<span class="nx">privVlanId</span> <span class="o">:=</span> <span class="mi">2222</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm">	Step 5, Order a virtual server by backend/frontend vlan.
</span></span></span><span class="line"><span class="cl"><span class="cm">
</span></span></span><span class="line"><span class="cl"><span class="cm">	Remove the comment &#39;//&#39; below to order a bare metal server.
</span></span></span><span class="line"><span class="cl"><span class="cm">	*/</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">locationKeyName</span> <span class="o">:=</span> <span class="s">&#34;DALLAS05&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nf">OrderVirtualServer</span><span class="p">(</span><span class="nx">packageId</span><span class="p">,</span> <span class="nx">locationKeyName</span><span class="p">,</span> <span class="nx">presetId</span><span class="p">,</span> <span class="nx">pubVlanId</span><span class="p">,</span> <span class="nx">privVlanId</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">OrderVirtualServer</span><span class="p">(</span><span class="nx">packageId</span> <span class="kt">int</span><span class="p">,</span> <span class="nx">locationKeyName</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">flavor</span> <span class="kt">int</span><span class="p">,</span> <span class="nx">frontend</span> <span class="kt">int</span><span class="p">,</span> <span class="nx">backend</span> <span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// KeyNames of the items
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">items</span> <span class="o">:=</span> <span class="p">[]</span><span class="kt">string</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="s">&#34;1_GBPS_PUBLIC_PRIVATE_NETWORK_UPLINKS&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="s">&#34;BANDWIDTH_0_GB_2&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="s">&#34;1_IP_ADDRESS&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="s">&#34;OS_UBUNTU_16_04_LTS_XENIAL_XERUS_MINIMAL_64_BIT_FOR_VSI&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="s">&#34;REBOOT_REMOTE_CONSOLE&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="s">&#34;MONITORING_HOST_PING&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="s">&#34;NOTIFICATION_EMAIL_AND_TICKET&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="s">&#34;AUTOMATED_NOTIFICATION&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="s">&#34;UNLIMITED_SSL_VPN_USERS_1_PPTP_VPN_USER_PER_ACCOUNT&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">parameters</span> <span class="o">:=</span> <span class="nx">Parameters</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">hostname</span><span class="p">:</span>  <span class="s">&#34;myhostname&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="nx">domain</span><span class="p">:</span>    <span class="s">&#34;domain.com&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="nx">backend</span><span class="p">:</span>   <span class="nx">backend</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="nx">frontend</span><span class="p">:</span>  <span class="nx">frontend</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="nx">items</span><span class="p">:</span>     <span class="nx">items</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="nx">location</span><span class="p">:</span>  <span class="nx">locationKeyName</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="nx">packageId</span><span class="p">:</span> <span class="nx">packageId</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="nx">flavor</span><span class="p">:</span>    <span class="nx">flavor</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="nx">hourly</span><span class="p">:</span>    <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">prices</span> <span class="o">:=</span> <span class="nf">GetPrices</span><span class="p">(</span><span class="nx">packageId</span><span class="p">,</span> <span class="nx">items</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">// Build the Virtual Server array object.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">virtualGuests</span> <span class="o">:=</span> <span class="nf">BuildArrayVirtualServer</span><span class="p">(</span><span class="nx">parameters</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">// Build the Container_Product_Order with the basic required data
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">containerOrder</span> <span class="o">:=</span> <span class="nx">datatypes</span><span class="p">.</span><span class="nx">Container_Product_Order</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">PackageId</span><span class="p">:</span>        <span class="nx">sl</span><span class="p">.</span><span class="nf">Int</span><span class="p">(</span><span class="nx">parameters</span><span class="p">.</span><span class="nx">packageId</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">		<span class="nx">Location</span><span class="p">:</span>         <span class="nx">sl</span><span class="p">.</span><span class="nf">String</span><span class="p">(</span><span class="nx">parameters</span><span class="p">.</span><span class="nx">location</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">		<span class="nx">VirtualGuests</span><span class="p">:</span>    <span class="nx">virtualGuests</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="nx">Prices</span><span class="p">:</span>           <span class="nx">prices</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="nx">UseHourlyPricing</span><span class="p">:</span> <span class="nx">sl</span><span class="p">.</span><span class="nf">Bool</span><span class="p">(</span><span class="nx">parameters</span><span class="p">.</span><span class="nx">hourly</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// Add presetId to the Container_Product_Order if a flavor exists
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">if</span> <span class="nx">parameters</span><span class="p">.</span><span class="nx">flavor</span> <span class="p">&gt;</span> <span class="mi">0</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">containerOrder</span><span class="p">.</span><span class="nx">PresetId</span> <span class="p">=</span> <span class="o">&amp;</span><span class="nx">flavor</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">// Build the order template that will be used to order the virtual server
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">orderTemplate</span> <span class="o">:=</span> <span class="nx">datatypes</span><span class="p">.</span><span class="nx">Container_Product_Order_Virtual_Guest</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">Container_Product_Order_Hardware_Server</span><span class="p">:</span> <span class="nx">datatypes</span><span class="p">.</span><span class="nx">Container_Product_Order_Hardware_Server</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="nx">Container_Product_Order</span><span class="p">:</span> <span class="nx">containerOrder</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="p">},</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">// Use verifyOrder() method to check for errors. Replace this with placeOrder() when
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// you are ready to order.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">receipt</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">orderService</span><span class="p">.</span><span class="nf">VerifyOrder</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">orderTemplate</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;Unable to verify/place the order: %s&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">// pretty print
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">jsonFormat</span><span class="p">,</span> <span class="nx">jsonErr</span> <span class="o">:=</span> <span class="nx">json</span><span class="p">.</span><span class="nf">MarshalIndent</span><span class="p">(</span><span class="nx">receipt</span><span class="p">,</span> <span class="s">&#34;&#34;</span><span class="p">,</span> <span class="s">&#34;   &#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">jsonErr</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">jsonErr</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nb">string</span><span class="p">(</span><span class="nx">jsonFormat</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">GetServerPrices</span><span class="p">(</span><span class="nx">packageID</span> <span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">mask</span> <span class="o">:=</span> <span class="s">&#34;mask[regions,items[prices],activeServerItems[prices]]&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="nx">result</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">packageService</span><span class="p">.</span><span class="nf">Mask</span><span class="p">(</span><span class="nx">mask</span><span class="p">).</span><span class="nf">Id</span><span class="p">(</span><span class="nx">packageID</span><span class="p">).</span><span class="nf">GetObject</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;Unable to retrieve items: %s\n&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="nx">os</span><span class="p">.</span><span class="nf">Exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;---------------- Locations -------------------&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;| %10s | %20s |\n&#34;</span><span class="p">,</span> <span class="s">&#34;Location Id&#34;</span><span class="p">,</span> <span class="s">&#34;Location Name&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">location</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">result</span><span class="p">.</span><span class="nx">Regions</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;| %10d &#34;</span><span class="p">,</span> <span class="o">*</span><span class="nx">location</span><span class="p">.</span><span class="nx">Location</span><span class="p">.</span><span class="nx">Location</span><span class="p">.</span><span class="nx">Id</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;| %20s |\n&#34;</span><span class="p">,</span> <span class="o">*</span><span class="nx">location</span><span class="p">.</span><span class="nx">Description</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">cores</span> <span class="o">:=</span> <span class="s">&#34;-&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="nx">recurringFee</span> <span class="o">:=</span> <span class="mf">0.0</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;----------------------------------------- Item Prices ------------------------------------------&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;| %10s | %50s | %10s | %10s | %40s |\n&#34;</span><span class="p">,</span> <span class="s">&#34;Price Id&#34;</span><span class="p">,</span> <span class="s">&#34;Description&#34;</span><span class="p">,</span> <span class="s">&#34;Cores&#34;</span><span class="p">,</span> <span class="s">&#34;Monthly Fee&#34;</span><span class="p">,</span> <span class="s">&#34;KeyName&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">item</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">result</span><span class="p">.</span><span class="nx">Items</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">price</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">item</span><span class="p">.</span><span class="nx">Prices</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="k">if</span> <span class="nx">price</span><span class="p">.</span><span class="nx">LocationGroupId</span> <span class="o">==</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">				<span class="k">if</span> <span class="nx">price</span><span class="p">.</span><span class="nx">RecurringFee</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">					<span class="nx">recurringFee</span> <span class="p">=</span> <span class="nb">float64</span><span class="p">(</span><span class="o">*</span><span class="nx">price</span><span class="p">.</span><span class="nx">RecurringFee</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">				<span class="p">}</span>
</span></span><span class="line"><span class="cl">				<span class="k">if</span> <span class="nx">price</span><span class="p">.</span><span class="nx">CapacityRestrictionType</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">					<span class="nx">cores</span> <span class="p">=</span> <span class="nx">fmt</span><span class="p">.</span><span class="nf">Sprintf</span><span class="p">(</span><span class="s">&#34;%s - %s&#34;</span><span class="p">,</span> <span class="o">*</span><span class="nx">price</span><span class="p">.</span><span class="nx">CapacityRestrictionMinimum</span><span class="p">,</span> <span class="o">*</span><span class="nx">price</span><span class="p">.</span><span class="nx">CapacityRestrictionMaximum</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">					<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;| %10d &#34;</span><span class="p">,</span> <span class="o">*</span><span class="nx">price</span><span class="p">.</span><span class="nx">Id</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">					<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;| %50s &#34;</span><span class="p">,</span> <span class="o">*</span><span class="nx">item</span><span class="p">.</span><span class="nx">Description</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">					<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;| %10s &#34;</span><span class="p">,</span> <span class="nx">cores</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">					<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;| %10f &#34;</span><span class="p">,</span> <span class="nx">recurringFee</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">					<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;| %40s |\n&#34;</span><span class="p">,</span> <span class="o">*</span><span class="nx">item</span><span class="p">.</span><span class="nx">KeyName</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">				<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">					<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;| %10d &#34;</span><span class="p">,</span> <span class="o">*</span><span class="nx">price</span><span class="p">.</span><span class="nx">Id</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">					<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;| %50s &#34;</span><span class="p">,</span> <span class="o">*</span><span class="nx">item</span><span class="p">.</span><span class="nx">Description</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">					<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;| %10s &#34;</span><span class="p">,</span> <span class="nx">cores</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">					<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;| %10f &#34;</span><span class="p">,</span> <span class="nx">recurringFee</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">					<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;| %40s |\n&#34;</span><span class="p">,</span> <span class="o">*</span><span class="nx">item</span><span class="p">.</span><span class="nx">KeyName</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">				<span class="p">}</span>
</span></span><span class="line"><span class="cl">			<span class="p">}</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">ListServerPackage</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">objFilter</span> <span class="o">:=</span> <span class="nx">filter</span><span class="p">.</span><span class="nf">Path</span><span class="p">(</span><span class="s">&#34;type.keyName&#34;</span><span class="p">).</span><span class="nf">Eq</span><span class="p">(</span><span class="s">&#34;VIRTUAL_SERVER_INSTANCE&#34;</span><span class="p">).</span><span class="nf">Build</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	<span class="nx">packages</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">packageService</span><span class="p">.</span><span class="nf">Mask</span><span class="p">(</span><span class="s">&#34;mask[type]&#34;</span><span class="p">).</span><span class="nf">Filter</span><span class="p">(</span><span class="nx">objFilter</span><span class="p">).</span><span class="nf">GetAllObjects</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;Package %s doesn&#39;t exists\n&#34;</span><span class="p">,</span> <span class="s">&#34;VIRTUAL_SERVER_INSTANCE&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="nx">os</span><span class="p">.</span><span class="nf">Exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;| %10s | %45s | %45s | %20s |\n&#34;</span><span class="p">,</span> <span class="s">&#34;Id&#34;</span><span class="p">,</span> <span class="s">&#34;Name&#34;</span><span class="p">,</span> <span class="s">&#34;KeyName&#34;</span><span class="p">,</span> <span class="s">&#34;Type&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">item</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">packages</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;| %10d &#34;</span><span class="p">,</span> <span class="o">*</span><span class="nx">item</span><span class="p">.</span><span class="nx">Id</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;| %45s &#34;</span><span class="p">,</span> <span class="o">*</span><span class="nx">item</span><span class="p">.</span><span class="nx">Name</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;| %45s &#34;</span><span class="p">,</span> <span class="o">*</span><span class="nx">item</span><span class="p">.</span><span class="nx">KeyName</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;| %20s |\n&#34;</span><span class="p">,</span> <span class="o">*</span><span class="nx">item</span><span class="p">.</span><span class="nx">Type</span><span class="p">.</span><span class="nx">KeyName</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// GetPrices returns the list of prices.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="nf">GetPrices</span><span class="p">(</span><span class="nx">packageID</span> <span class="kt">int</span><span class="p">,</span> <span class="nx">itemKeyNames</span> <span class="p">[]</span><span class="kt">string</span><span class="p">)</span> <span class="p">[]</span><span class="nx">datatypes</span><span class="p">.</span><span class="nx">Product_Item_Price</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">objMask</span> <span class="o">:=</span> <span class="s">&#34;mask[id,itemCategory,keyName,prices[categories]]&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">items</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">packageService</span><span class="p">.</span><span class="nf">Mask</span><span class="p">(</span><span class="nx">objMask</span><span class="p">).</span><span class="nf">Id</span><span class="p">(</span><span class="nx">packageID</span><span class="p">).</span><span class="nf">GetItems</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;Unable to retrieve items: %s\n&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="nx">os</span><span class="p">.</span><span class="nf">Exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">prices</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">([]</span><span class="nx">datatypes</span><span class="p">.</span><span class="nx">Product_Item_Price</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="nx">itemKeyNames</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">for</span> <span class="nx">idx</span><span class="p">,</span> <span class="nx">itemKeyName</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">itemKeyNames</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">prices</span><span class="p">[</span><span class="nx">idx</span><span class="p">].</span><span class="nx">Id</span><span class="p">,</span> <span class="nx">err</span> <span class="p">=</span> <span class="nf">GetPriceIDIfMatch</span><span class="p">(</span><span class="nx">itemKeyName</span><span class="p">,</span> <span class="nx">items</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="nx">os</span><span class="p">.</span><span class="nf">Exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="nx">prices</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// GetPriceIDIfMatch returns a priceID or error if keyName doesnt exists.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="nf">GetPriceIDIfMatch</span><span class="p">(</span><span class="nx">keyName</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">items</span> <span class="p">[]</span><span class="nx">datatypes</span><span class="p">.</span><span class="nx">Product_Item</span><span class="p">)</span> <span class="p">(</span><span class="nx">priceID</span> <span class="o">*</span><span class="kt">int</span><span class="p">,</span> <span class="nx">err</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="kd">var</span> <span class="nx">matchingItem</span> <span class="nx">datatypes</span><span class="p">.</span><span class="nx">Product_Item</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// find the item keyname
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">item</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">items</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">if</span> <span class="nx">keyName</span> <span class="o">==</span> <span class="o">*</span><span class="nx">item</span><span class="p">.</span><span class="nx">KeyName</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="nx">matchingItem</span> <span class="p">=</span> <span class="nx">item</span>
</span></span><span class="line"><span class="cl">			<span class="k">break</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// returns error if keyName doesn&#39;t exists in the items list
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">if</span> <span class="nx">matchingItem</span><span class="p">.</span><span class="nx">KeyName</span> <span class="o">==</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span> <span class="kc">nil</span><span class="p">,</span> <span class="nx">fmt</span><span class="p">.</span><span class="nf">Errorf</span><span class="p">(</span><span class="s">&#34;The item %s doesn&#39;t exists in the package&#34;</span><span class="p">,</span> <span class="nx">keyName</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// find the standard priceID
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">price</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">matchingItem</span><span class="p">.</span><span class="nx">Prices</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">if</span> <span class="nx">price</span><span class="p">.</span><span class="nx">LocationGroupId</span> <span class="o">==</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="nx">priceID</span> <span class="p">=</span> <span class="nx">price</span><span class="p">.</span><span class="nx">Id</span>
</span></span><span class="line"><span class="cl">			<span class="k">break</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">return</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// BuildArrayVirtualServer builds the esqueleton of Virtual Server array.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="nf">BuildArrayVirtualServer</span><span class="p">(</span><span class="nx">args</span> <span class="nx">Parameters</span><span class="p">)</span> <span class="p">[]</span><span class="nx">datatypes</span><span class="p">.</span><span class="nx">Virtual_Guest</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">virtualGuests</span> <span class="o">:=</span> <span class="p">[]</span><span class="nx">datatypes</span><span class="p">.</span><span class="nx">Virtual_Guest</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="nx">Hostname</span><span class="p">:</span> <span class="nx">sl</span><span class="p">.</span><span class="nf">String</span><span class="p">(</span><span class="nx">args</span><span class="p">.</span><span class="nx">hostname</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">			<span class="nx">Domain</span><span class="p">:</span>   <span class="nx">sl</span><span class="p">.</span><span class="nf">String</span><span class="p">(</span><span class="nx">args</span><span class="p">.</span><span class="nx">domain</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">		<span class="p">},</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">args</span><span class="p">.</span><span class="nx">backend</span> <span class="p">&gt;</span> <span class="mi">0</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">virtualGuests</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">PrimaryBackendNetworkComponent</span> <span class="p">=</span> <span class="o">&amp;</span><span class="nx">datatypes</span><span class="p">.</span><span class="nx">Virtual_Guest_Network_Component</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="nx">NetworkVlan</span><span class="p">:</span> <span class="o">&amp;</span><span class="nx">datatypes</span><span class="p">.</span><span class="nx">Network_Vlan</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">				<span class="nx">Id</span><span class="p">:</span> <span class="nx">sl</span><span class="p">.</span><span class="nf">Int</span><span class="p">(</span><span class="nx">args</span><span class="p">.</span><span class="nx">backend</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">			<span class="p">},</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">args</span><span class="p">.</span><span class="nx">frontend</span> <span class="p">&gt;</span> <span class="mi">0</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">virtualGuests</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">PrimaryNetworkComponent</span> <span class="p">=</span> <span class="o">&amp;</span><span class="nx">datatypes</span><span class="p">.</span><span class="nx">Virtual_Guest_Network_Component</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="nx">NetworkVlan</span><span class="p">:</span> <span class="o">&amp;</span><span class="nx">datatypes</span><span class="p">.</span><span class="nx">Network_Vlan</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">				<span class="nx">Id</span><span class="p">:</span> <span class="nx">sl</span><span class="p">.</span><span class="nf">Int</span><span class="p">(</span><span class="nx">args</span><span class="p">.</span><span class="nx">frontend</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">			<span class="p">},</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="nx">virtualGuests</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">ListAvailableVlans</span><span class="p">(</span><span class="nx">locationId</span> <span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">objMask</span> <span class="o">:=</span> <span class="s">&#34;mask[billingItem[location]]&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="nx">objFilter</span> <span class="o">:=</span> <span class="nx">filter</span><span class="p">.</span><span class="nf">Path</span><span class="p">(</span><span class="s">&#34;publicNetworkVlans.billingItem.location.id&#34;</span><span class="p">).</span><span class="nf">Eq</span><span class="p">(</span><span class="nx">locationId</span><span class="p">).</span><span class="nf">Build</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">publicVlans</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">accountServer</span><span class="p">.</span><span class="nf">Mask</span><span class="p">(</span><span class="nx">objMask</span><span class="p">).</span><span class="nf">Filter</span><span class="p">(</span><span class="nx">objFilter</span><span class="p">).</span><span class="nf">GetPublicNetworkVlans</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;Unable to retrieve the publicVlans: %s\n&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="nx">os</span><span class="p">.</span><span class="nf">Exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;---------------------------------- PUBLIC VLANS ---------------------------------------&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;| %10s | %20s |%20s |%20s | \n&#34;</span><span class="p">,</span> <span class="s">&#34;Id&#34;</span><span class="p">,</span> <span class="s">&#34;Name&#34;</span><span class="p">,</span> <span class="s">&#34;VlanNumber&#34;</span><span class="p">,</span> <span class="s">&#34;Location&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">name</span> <span class="o">:=</span> <span class="s">&#34;-&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">publicVlan</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">publicVlans</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">if</span> <span class="nx">publicVlan</span><span class="p">.</span><span class="nx">Name</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="nx">name</span> <span class="p">=</span> <span class="o">*</span><span class="nx">publicVlan</span><span class="p">.</span><span class="nx">Name</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;| %10d &#34;</span><span class="p">,</span> <span class="o">*</span><span class="nx">publicVlan</span><span class="p">.</span><span class="nx">Id</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;| %20s &#34;</span><span class="p">,</span> <span class="nx">name</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;| %20d &#34;</span><span class="p">,</span> <span class="o">*</span><span class="nx">publicVlan</span><span class="p">.</span><span class="nx">VlanNumber</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;| %20s |\n&#34;</span><span class="p">,</span> <span class="o">*</span><span class="nx">publicVlan</span><span class="p">.</span><span class="nx">BillingItem</span><span class="p">.</span><span class="nx">Location</span><span class="p">.</span><span class="nx">LongName</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">objFilterPrivate</span> <span class="o">:=</span> <span class="nx">filter</span><span class="p">.</span><span class="nf">Path</span><span class="p">(</span><span class="s">&#34;privateNetworkVlans.billingItem.location.id&#34;</span><span class="p">).</span><span class="nf">Eq</span><span class="p">(</span><span class="nx">locationId</span><span class="p">).</span><span class="nf">Build</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">privateVlans</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">accountServer</span><span class="p">.</span><span class="nf">Mask</span><span class="p">(</span><span class="nx">objMask</span><span class="p">).</span><span class="nf">Filter</span><span class="p">(</span><span class="nx">objFilterPrivate</span><span class="p">).</span><span class="nf">GetPrivateNetworkVlans</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;Unable to retrieve the privateVlans: %s\n&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="nx">os</span><span class="p">.</span><span class="nf">Exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;---------------------------------- PRIVATE VLANS ----------------------------------&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;| %10s | %20s |%20s |%20s | \n&#34;</span><span class="p">,</span> <span class="s">&#34;Id&#34;</span><span class="p">,</span> <span class="s">&#34;Name&#34;</span><span class="p">,</span> <span class="s">&#34;VlanNumber&#34;</span><span class="p">,</span> <span class="s">&#34;Location&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">privateVlan</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">privateVlans</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;| %10d &#34;</span><span class="p">,</span> <span class="o">*</span><span class="nx">privateVlan</span><span class="p">.</span><span class="nx">Id</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;| %20s &#34;</span><span class="p">,</span> <span class="o">*</span><span class="nx">privateVlan</span><span class="p">.</span><span class="nx">Name</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;| %20d &#34;</span><span class="p">,</span> <span class="o">*</span><span class="nx">privateVlan</span><span class="p">.</span><span class="nx">VlanNumber</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;| %20s |\n&#34;</span><span class="p">,</span> <span class="o">*</span><span class="nx">privateVlan</span><span class="p">.</span><span class="nx">BillingItem</span><span class="p">.</span><span class="nx">Location</span><span class="p">.</span><span class="nx">LongName</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">ListAvailableRouters</span><span class="p">(</span><span class="nx">locationId</span> <span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">objFilter</span> <span class="o">:=</span> <span class="nx">filter</span><span class="p">.</span><span class="nf">Path</span><span class="p">(</span><span class="s">&#34;routers.topLevelLocation.id&#34;</span><span class="p">).</span><span class="nf">Eq</span><span class="p">(</span><span class="nx">locationId</span><span class="p">).</span><span class="nf">Build</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">routers</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">accountServer</span><span class="p">.</span><span class="nf">Filter</span><span class="p">(</span><span class="nx">objFilter</span><span class="p">).</span><span class="nf">GetRouters</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;Unable to retrieve the routers: %s\n&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="nx">os</span><span class="p">.</span><span class="nf">Exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;| %10s | %20s |%20s | \n&#34;</span><span class="p">,</span> <span class="s">&#34;Id&#34;</span><span class="p">,</span> <span class="s">&#34;Hostname&#34;</span><span class="p">,</span> <span class="s">&#34;Location&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">router</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">routers</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;| %10d &#34;</span><span class="p">,</span> <span class="o">*</span><span class="nx">router</span><span class="p">.</span><span class="nx">Id</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;| %20s &#34;</span><span class="p">,</span> <span class="o">*</span><span class="nx">router</span><span class="p">.</span><span class="nx">Hostname</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;| %20s| \n&#34;</span><span class="p">,</span> <span class="o">*</span><span class="nx">router</span><span class="p">.</span><span class="nx">TopLevelLocation</span><span class="p">.</span><span class="nx">LongName</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">ListActivePresets</span><span class="p">(</span><span class="nx">packageId</span> <span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">active_presets</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">packageService</span><span class="p">.</span><span class="nf">Id</span><span class="p">(</span><span class="nx">packageId</span><span class="p">).</span><span class="nf">GetActivePresets</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;Unable to retrieve the active presets: %s\n&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="nx">os</span><span class="p">.</span><span class="nf">Exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;| %10s | %20s |%20s | \n&#34;</span><span class="p">,</span> <span class="s">&#34;Id&#34;</span><span class="p">,</span> <span class="s">&#34;Description&#34;</span><span class="p">,</span> <span class="s">&#34;KeyName&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">preset</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">active_presets</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;| %10d &#34;</span><span class="p">,</span> <span class="o">*</span><span class="nx">preset</span><span class="p">.</span><span class="nx">Id</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;| %20s &#34;</span><span class="p">,</span> <span class="o">*</span><span class="nx">preset</span><span class="p">.</span><span class="nx">Description</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;| %20s| \n&#34;</span><span class="p">,</span> <span class="o">*</span><span class="nx">preset</span><span class="p">.</span><span class="nx">KeyName</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div>
            </div>
        </div>

    </div>
    <hr>
    <div class="row">
        <div class="row">
            <div class="col-md-6">
    <div class="well well-sm footer" style="word-wrap: break-word;"> 
        <strong>Feedback? <span class="fas fa-comment"/></strong>
            <p>
                If this article contains any error, or leaves any of your questions unanswered, please help us out by 
                opening up a github issue.<br>
                <a class="" href="https://github.com/softlayer/githubio_source/issues/new?title=Feedback%20for%20go%20-%20Order%20a%20Virtual%20and%20Bare%20Metal%20Server%20by%20frondend%2fbackend%20vlan%20or%20router&body=Feedback+regarding%3A%20https%3a%2f%2fsldn.softlayer.com%2fgo%2forder_server_by_vlan_router.go%2f"> Open an issue</a>
                <i class="fab fa-github" alt="github"></i>
                <span> - </span>
                <a class="" href="https://github.com/softlayer/githubio_source/edit/master/content/go/go/order_server_by_vlan_router.go.md" style="text-align: right;"> Quick Edit</a>
                <i class="fab fa-github" alt="github"></i>

            </p>
    </div>
</div>

        </div>
    </div>
<footer>
    <div class="row">
        <div class="col-sm-12 footer">
            <p>&copy; SoftLayer 2024<br>
            Built with <a href="https://github.com/spf13/hugo">Hugo</a></p>
        </div>
    </div>
</footer>
</div>

    <script src="https://sldn.softlayer.com/js/jquery.js"></script>
    <script src="https://sldn.softlayer.com/js/bootstrap.js"></script>
</body>
</html>
