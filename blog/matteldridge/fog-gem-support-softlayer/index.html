<!doctype html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="SoftLayer API Examples, implementations, and release notes.">
    <meta name="author" content="SoftLayer">

    <title>Fog Gem Support for SoftLayer - https://sldn.softlayer.com/</title>
    <link rel="canonical" href="https://sldn.softlayer.com/blog/matteldridge/fog-gem-support-softlayer/">
        <link href="https://sldn.softlayer.com/css/main.css" rel="stylesheet">
    <link href="https://sldn.softlayer.com/css/bootstrap.css" rel="stylesheet">
    <link href="https://sldn.softlayer.com/css/custom.css" rel="stylesheet">
    <link href="https://sldn.softlayer.com/css/monokai.css" rel="stylesheet">
    <link href="https://sldn.softlayer.com/css/highlight/solarized_dark.css" rel="stylesheet">

    <script src="https://sldn.softlayer.com/js/highlight.pack.js"></script>

    <script>hljs.initHighlightingOnLoad();</script>
    <link rel="shortcut icon" href="https://sldn.softlayer.com/img/favicon.ico" type="image/x-icon" />
	<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Lato" />
            

    <script src="https://sldn.softlayer.com/js/jquery-3.3.1.min.js"></script> 
    <script src="https://sldn.softlayer.com/js/sldn.js"></script>


    <link href="https://sldn.softlayer.com/fontawesome/css/fontawesome.min.css" rel="stylesheet" type="text/css">
    <link href="https://sldn.softlayer.com/fontawesome/css/brands.min.css" rel="stylesheet" type="text/css">
    <link href="https://sldn.softlayer.com/fontawesome/css/solid.min.css" rel="stylesheet" type="text/css">
    
    <script defer src="https://sldn.softlayer.com/fontawesome/js/solid.min.js"></script>
    <script defer src="https://sldn.softlayer.com/fontawesome/js/brands.min.js"></script>
    <script defer src="https://sldn.softlayer.com/fontawesome/js/fontawesome.min.js"></script>

    <script>
		$(document).ready(function() {
			$('table').addClass("table table-hover table-striped")
		})
	</script>
    
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-88235803-1', 'auto');
	
	ga('send', 'pageview');
}
</script>

</head>

<body>
    <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                    <span class="sr-only">Toggle Navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="https://sldn.softlayer.com/">SoftLayer API</a>
            </div>
            <div class="collapse navbar-collapse navbar-ex1-collapse">
                <ul class="nav navbar-nav">
                    
                        <li><a href="https://sldn.softlayer.com/article/">Articles</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/reference/softlayerapi">Documentation</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/go/">Go</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/java/">Java</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/perl/">Perl</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/php/">PHP</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/python/">Python</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/rest/">Rest</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/ruby/">Ruby</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/tools/">Tools</a></li>
                    

                    
                </ul>
                <div id="custom-search-input" class="pull-right">
                  <form class="navbar-form" role="search" method="get" action="https://www.bing.com/search">
                    <div class="input-group col-md-12">
                      <input type="text" class="form-control input-md" placeholder="Search" name="q" id="srch-term">
                      <input type="hidden" name="q1" value="site:sldn.softlayer.com" />
                      <div class="input-group-btn">
                        <button class="btn btn-info" type="submit">
                          <i class="glyphicon glyphicon-search"></i>
                        </button>
                      </div>
                    </div>
                  </form>
                </div>
            </div>
        </div>
    </nav>

<div class="container">
    <div class="row">
    
        <div class="col-md-3">
            <div style="word-wrap: break-word;"> 
                <h4>June 19, 2014<br></h4>
            </div>
        </div>
        <div class="col-md-9">

                <strong>Classes <span class="fa fa-book"/></strong>
                
                <br>
                <strong>Tags <span class="fa fa-tags"/></strong>
                
                    <a class="label label-danger" href="https://sldn.softlayer.com/tags/blog">blog</a>
                          
        </div>
    </div>
    <hr>
    <div class="row">
		<div class="col-md-12">
            <div class="well well-sm  article" style="word-wrap: break-word;">
                <div class="article-title">
				    <h1>Fog Gem Support for SoftLayer</h1>
                    <small>Things just got easier for developers working with the SoftLayer API.  Support for SoftLayer is introduced with the rele</small>
                </div>
				
                
				
                <p>Things just got easier for developers working with the SoftLayer API.  Support for SoftLayer is introduced with the release of <a href="http://rubygems.org/gems/fog-softlayer">fog-softlayer</a>, which is a provider gem for <a href="http://fog.io/">fog</a>, the Ruby cloud services library.</p>
<p>Fog is an open source cloud services library implemented in Ruby.</p>
<h5 id="call-it-what-you-will-fog-calls-it-what-it-is"><strong>Call it what you will, fog calls it what it is.</strong></h5>
<p><code>CCI</code>, <code>VM</code>, <code>Cloud Server</code>, <code>Elastic Cloud Compute Instance</code>, <code>EC2</code>, <code>Compute Instance</code>. All of these terms mean the exact same thing! They&rsquo;re all different ways of saying <strong>an instance of an operating system is running on virtualized hardware in a cloud</strong>. The name you use depends on which cloud provider you&rsquo;re working with.</p>
<p>When you&rsquo;re using fog gem&rsquo;s production proven object models, there is <em>one</em> set of resource names shared among every provider. It doesn&rsquo;t matter what the provider calls the resource. And it doesn’t matter if the API that has access to it is REST, SOAP, or uses XML or JSON, as a developer you have one interface to learn and use.</p>
<p>Within fog are different providers, each one represents a cloud provider with publicly accessible APIs. Through the release of <a href="http://rubygems.org/gems/fog-softlayer">fog-softlayer</a>, SoftLayer is now available as a provider.</p>
<p>Each provider offers at least the three following services.</p>
<ul>
<li>Compute – A service that supports actions to create/update/destroy one or more instances of a cloud server.</li>
<li>DNS – A service that allows you to create/update/destroy records in the <a href="http://en.wikipedia.org/wiki/Domain_Name_System">Domain Name System</a>.</li>
<li>Storage – A service that allows you to create/update/destroy directories and files in an <a href="http://en.wikipedia.org/wiki/Object_storage">object-storage</a> service.</li>
</ul>
<p>In turn, each service exposes a set of models associated with that service. Based on the capabilities of different providers, there is some variation in models associated with a given service.</p>
<ul>
<li>Compute Models: Server, Image and Flavor</li>
<li>DNS Models: Zone and Record</li>
<li>Storage Models: Directory and File</li>
</ul>
<h5 id="fog-in-action"><strong>Fog in Action</strong></h5>
<p>Let&rsquo;s take a look at two examples. The first launches a server on OpenStack and the second on native SoftLayer.</p>
<ruby>
require 'fog/softlayer'
<h1 id="initialize-an-openstack-provider-object">initialize an OpenStack provider object.</h1>
<p>@openstack = Fog::Compute[:openstack] # assumes credentials are in ~/.fog config file</p>
<h1 id="get-smallest-flavor-id-and-default-image-id-for-openstack">get smallest flavor ID and default image ID for OpenStack</h1>
<p>flavor = @openstack.flavors.first.id # =&gt; &ldquo;1&rdquo;
image = @openstack.images.first.id # =&gt; &ldquo;0e09fbd6-43c5-448a-83e9-0d3d05f9747e&rdquo;</p>
<h1 id="launch-a-small-server-on-openstack">launch a small server on OpenStack</h1>
<p>openstack_server = @openstack.servers.create(:flavor_ref =&gt; flavor, :image_ref =&gt; image, :name =&gt; &lsquo;test-server&rsquo;)</p>
<h1 id="initialize-a-softlayer-provider-object">initialize a SoftLayer provider object.</h1>
<p>@softlayer = Fog::Compute[:softlayer] # assumes credentials are in ~/.fog config file</p>
<h1 id="get-smallest-flavor-id-and-default-image-id-for-softlayer">get smallest flavor ID and default image ID for SoftLayer</h1>
<p>flavor = @softlayer.flavors.first.id # =&gt; &ldquo;m1.tiny&rdquo;
image = @softlayer.images.first.id #=&gt; &ldquo;3b235124-a190-40b5-9720-c020e61b99e1&rdquo;</p>
<h1 id="launch-a-small-server-on-openstack-1">launch a small server on OpenStack</h1>
<p>softlayer_server = @softlayer.servers.create(:flavor_id =&gt; flavor, :image_id =&gt; image, :name =&gt; &lsquo;test-server&rsquo;)</p>
</ruby>
<p>That&rsquo;s about as painless as we can ask for. Most of the code is actually the same.</p>
<p>Let&rsquo;s get even those lingering differences out of the way.</p>
<ruby>
require 'fog/softlayer'
<p>class SmallServer
attr_accessor :name
attr_reader :flavor, :image
def initialize(provider)
@provider = provider
@connection = Fog::Compute[provider]
self.launch
end</p>
<p>def launch
begin
@connection.servers.create(options)
end
end</p>
<p>def flavor
@connection.flavors.first.id
end</p>
<p>def image
@connection.images.first.id
end</p>
<p>def name
@name ||= &lsquo;test&rsquo;
end</p>
<p>def options
_flavor = openstack? ? :flavor_ref : :flavor_id
_image = openstack? ? :image_ref : :image_id
{ _flavor =&gt; flavor, _image =&gt; image, :name =&gt; name}
end</p>
<p>def openstack?
@provider.match(/openstack/)
end
end</p>
</ruby>
With that class available, let's implement our example task of launching one server on each cloud.
<ruby>
require 'fog/softlayer'
include SmallServer
<h1 id="launch-a-small-server-on-openstack-2">launch a small server on OpenStack</h1>
<p>openstack_server = SmallServer.new(:openstack)</p>
<h1 id="launch-a-small-server-on-softlayer">launch a small server on SoftLayer</h1>
<p>sl_server = SmallServer.new(:softlayer)
</ruby></p>
<p>If we don&rsquo;t count <code>require</code> and <code>include</code>, we&rsquo;re down to <em>two</em> lines of code.</p>
<p>You can install fog-softlayer from <a href="http://rubygems.org/">rubygems.org</a> via <code>gem install fog-softlayer</code>, or you can grab <a href="https://github.com/softlayer/fog-softlayer">the source</a> from <a href="https://github.com/">github.com</a>.</p>
<p>Alternatively, for something a little more lightweight, you can use the SoftLayer module as a stand-alone gem. Install that with <code>gem install fog-softlayer</code> or use <a href="https://github.com/softlayer/fog-softlayer">the source</a>.</p>
<p>\- Matt</p>
<p>&ndash;
If you have questions about or problems with <a href="http://rubygems.org/gems/fog-softlayer">fog-softlayer</a> open an <a href="https://github.com/softlayer/fog-softlayer/issues">issue</a> or <a href="mailto:matt.eldridge@us.ibm.com?subject=fog-softlayer">email me</a>.</p>

            </div>
        </div>

    </div>
    <hr>
    <div class="row">
        <div class="row">
            <div class="col-md-6">
    <div class="well well-sm" style="word-wrap: break-word;"> 
        <strong>Feedback? <span class="fas fa-comment"/></strong>
            <p>
                If this article contains any error, or leaves any of your questions unanswered, please help us out by 
                opening up a github issue.<br>
                <a class="" href="https://github.com/softlayer/githubio_source/issues/new?title=Feedback%20for%20blog%20-%20Fog%20Gem%20Support%20for%20SoftLayer&body=Feedback+regarding%3A%20https%3a%2f%2fsldn.softlayer.com%2fblog%2fmatteldridge%2ffog-gem-support-softlayer%2f"> Open an issue</a>
                <i class="fab fa-github" alt="github"></i>
            </p>
    </div>
</div>
        </div>
    </div>
        <footer>
            <div class="row">
                <hr>
                <div class="col-sm-12">
                    <p>&copy; SoftLayer 2020<br>
                    Built with <a href="https://github.com/spf13/hugo">Hugo</a></p>
                </div>
            </div>
        </footer>
</div>

    <script src="https://sldn.softlayer.com/js/jquery.js"></script>
    <script src="https://sldn.softlayer.com/js/bootstrap.js"></script>
</body>
</html>
